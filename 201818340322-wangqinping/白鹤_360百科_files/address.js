!function(){function c(b,c){for(;b&&b.nodeType!==a;){if("function"==typeof b.matches&&b.matches(c))return b;b=b.parentNode}}function d(a,b,c,d,e){var g=f.apply(this,arguments);return a.addEventListener(c,g,e),{destroy:function(){a.removeEventListener(c,g,e)}}}function e(a,b,c,e,f){return"function"==typeof a.addEventListener?d.apply(null,arguments):"function"==typeof c?d.bind(null,document).apply(null,arguments):("string"==typeof a&&(a=document.querySelectorAll(a)),Array.prototype.map.call(a,function(a){return d(a,b,c,e,f)}))}function f(a,b,d,e){return function(d){d.delegateTarget=c(d.target,b),d.delegateTarget&&e.call(a,d)}}function m(a){var b,c,d,e,f,g,h,k,l,m;if(null===a.parentNode||"none"==a.style.display)return[0,0,0,0];if(b=null,d=0,e=0,f=a.offsetWidth,g=a.offsetHeight,a.getBoundingClientRect)c=a.getBoundingClientRect(),h=Math.max(document.documentElement.scrollTop,document.body.scrollTop),k=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),d=c.left+k,e=c.top+h;else{if(document.getBoxObjectFor)c=document.getBoxObjectFor(a),l=a.style.borderLeftWidth?parseInt(a.style.borderLeftWidth):0,m=a.style.borderTopWidth?parseInt(a.style.borderTopWidth):0,d=c.x-l,e=c.y-m;else{if(d=a.offsetLeft,e=a.offsetTop,b=a.offsetParent,b!=a)for(;b;)d+=b.offsetLeft,e+=b.offsetTop,b=b.offsetParent;(i||j&&"absolute"==a.style.position)&&(d-=document.body.offsetLeft,e-=document.body.offsetTop)}for(b=a.parentNode?a.parentNode:null;b&&"BODY"!=b.tagName&&"HTML"!=b.tagName;)d-=b.scrollLeft,e-=b.scrollTop,b=b.parentNode?b.parentNode:null}return[d,e,f,g]}function o(){}function p(a,b,c){function l(){j.parentNode&&j.parentNode.removeChild(j),window[e]=o,k&&clearTimeout(k)}function m(){window[e]&&l()}var d,e,f,g,h,i,j,k;return"function"==typeof b&&(c=b,b={}),b||(b={}),d=b.prefix||"__jp",e=b.name||d+n++,f=b.param||"callback",g=null!=b.timeout?b.timeout:6e4,h=encodeURIComponent,i=document.getElementsByTagName("script")[0]||document.head,g&&(k=setTimeout(function(){l(),c&&c(new Error("Timeout"))},g)),window[e]=function(a){l(),c&&c(a)},a+=(~a.indexOf("?")?"&":"?")+f+"="+h(e),a=a.replace("?&","?"),j=document.createElement("script"),j.src=a,i.parentNode.insertBefore(j,i),m}function q(){var a=document.createElement("script");a.type="text/javascript",a.src="https://api.map.so.com/js?key=您的密钥&callback=__initialize",document.body.appendChild(a)}function s(){if(window.innerHeight)return window.innerHeight;var a=document.body,b=document.documentElement;return Math.min(b.clientHeight,a.clientHeight)}function t(){if(window.innerWidth)return window.innerWidth;var a=document.body,b=document.documentElement;return Math.min(b.clientWidth,a.clientWidth)}function D(a,b){var j,k,c=m(a),d=b.offsetX+c[0],e=c[1]+c[3],f=t(),g=s(),h=Math.max(document.documentElement.scrollTop,document.body.scrollTop),i=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);e+C>g+h&&(e=c[1]-C),d+B>f+i&&(d-=C),j=a.innerText,A=a,x&&x==j||(y[j]?E(y[j],d,e):(k="https://restapi.map.so.com/api/simple.php?sid=7000&formatted=true&address="+j,p(k,{},function(a){var b,c,f,g;a&&"OK"==a.info&&(b=a.geocodes,b&&(c=b[0].location,f=c.split(","),g=new so.maps.LatLng(f[1],f[0]),y[j]=g,E(g,d,e)))})),x=j)}function E(a,b,c){var d,e;u?(u.style.display="block",u.style.left=b+"px",u.style.top=c+"px"):(u=document.createElement("div"),u.style.cssText="z-index:10000;position:absolute;height:"+C+"px;width:"+B+"px;top:"+c+"px;left:"+b+"px;border:1px solid #999;",document.body.appendChild(u)),so.maps.event.addDomListener(u,"mouseover",function(){r=!1}),so.maps.event.addDomListener(u,"mouseout",function(){r=!0,setTimeout(function(){r&&(u.style.display="none")},100),x=null}),d=function(){var a=A.innerText,b=A.getAttribute("src");F(a,b)},v?(v.setCenter(a),w.setPosition(a)):(e={zoom:16,center:a||new so.maps.LatLng(39.906247,116.397558),disableDefaultUI:!0,mapTypeId:so.maps.MapTypeId.ROADMAP,draggable:!1,scrollwheel:!1,disableDoubleClickZoom:!0,__hideCopyRight__:!0},v=new so.maps.Map(u,e),w=new so.maps.Marker({position:a,map:v}),v.on("click",d),w.on("click",d))}function F(a,b){var c=document.createElement("a");c.target="_blank",c.href="https://ditu.so.com/?k="+encodeURIComponent(a)+"&src="+b,c.click()}var b,g,h,i,j,k,l,n,r,u,v,w,x,A,y,B,C,a=9;"undefined"==typeof Element||Element.prototype.matches||(b=Element.prototype,b.matches=b.matchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector||b.webkitMatchesSelector),g=navigator.userAgent,h=/msie (\d+\.\d+)/i.test(g)?document.documentMode||+RegExp["$1"]:0,i=/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(g)?+(RegExp["$6"]||RegExp["$2"]):0,j=/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(g)&&!/chrome/i.test(g)?+(RegExp["$1"]||RegExp["$2"]):0,k=[],l=document,k.isReady=!1,k.ready=function(a){k.initReady(),k.isReady?a():k.push(a)},k.initReady=function(){return arguments.callee.used?void 0:(arguments.callee.used=!0,"complete"===l.readyState?k.fireReady():(h&&9>h?(l.attachEvent("onreadystatechange",function(){"complete"==l.readyState&&(l.detachEvent("onreadystatechange",arguments.callee),k.fireReady())}),function(){if(!k.isReady){var a=new Image;try{a.doScroll(),a=null}catch(b){return setTimeout(arguments.callee,64),void 0}k.fireReady()}}()):l.addEventListener("DOMContentLoaded",function(){l.removeEventListener("DOMContentLoaded",arguments.callee,!1),k.fireReady()},!1),void 0))},k.fireReady=function(){if(!k.isReady){if(!l.body)return setTimeout(k.fireReady,16);if(k.isReady=!0,k.length)for(var b,a=0;b=k[a];a++)b()}},n=0,r=!0,y={},B=300,C=300,__initialize=function(){e(document.body,"a","mouseover",function(a){var c,d,b=a.delegateTarget;1==b.getAttribute("address")&&(b.style.display="inline-block",b.style.textIndent="0",b.target="_blank",c=b.getAttribute("src"),d=b.innerText,b.href="https://ditu.so.com/?k="+encodeURIComponent(d)+"&src="+c)}),e(document.body,"a","mousemove",function(a){var b=a.delegateTarget;1==b.getAttribute("address")&&(r=!1,D(b,a))}),e(document.body,"a","mouseout",function(a){var b=a.delegateTarget;1==b.getAttribute("address")&&(r=!0,setTimeout(function(){r&&u&&(u.style.display="none")},100),x=null)})},k.ready(function(){q()})}();