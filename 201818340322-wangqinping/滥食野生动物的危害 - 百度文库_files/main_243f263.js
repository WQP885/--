define("wkview:widget/common_toc/reader_html/page_body/main.js",function(e,i,t){function o(e){u(document).scrollTop()>=300&&"fixed"!==u(e).css("position")?u(e).css({position:"fixed",top:"50px"}):u(document).scrollTop()<300&&"absolute"!==u(e).css("position")&&u(e).css({position:"absolute",top:"294px"})}e("wkcommon:widget/ui/lib/async_widget/async_widget.js");var n=e("wkcommon:widget/ui/lib/browser/browser.js"),a=e("wkview:widget/crmAd/crmAd2.js"),d=e("wkview:widget/crm_multi/crm_multi.js"),c=e("wkview:widget/crmAd/zyAd.js"),l=e("wkview:widget/commerce/fengchao/modelAnimation.js"),s=e("wkview:widget/ui/detectImgBlock/detectImgBlock.js"),r=e("wkcommon:widget/ui/lib/BigPipe/BigPipe.js"),w=e("wkview:widget/crmAd/crmAd3.js"),m=e("wkview:widget/fengchao_right/fengchao_right.js"),f=e("wkcommon:widget/vipNoAdDialog/vipNoAdDialog.js"),g=e("wkview:widget/commerce/fengchao/left.js"),h=e("wkcommon:widget/lib/tangram/base/base.js"),u=e("wkcommon:widget/ui/lib/jquery/jquery.js"),v=e("wkview:widget/ad_xpageForm/xpageForm.js"),p=e("wkview:widget/node_modules/@baidu/wenku-model-user/index.js"),k=e("wkcommon:widget/ui/js_core/log/log.js"),A=e("wkcommon:widget/lib/fis/data/data.js"),R=A.get("WkInfo")||{},_=R&&R.WkAdInfo,b=_.blockStatus,x=e("wkcommon:widget/ui/lib/hxABtest/hxABtest.js"),j=function(e){u.extend(!0,this.ops,e),this.bindEvent().run()};j.prototype={constructor:j,ops:{docId:"",docTitle:"",flag:1,needShowAd:1,needShowAd2:1,orgName:"",wkAdMid:"",viewFcReqRate:""},bindEvent:function(){var e=function(){var e=u(".daily-recom-wrap"),i=u(".reader-container").width();e.css("width",i),900>i?e.addClass("small-wrap"):e.removeClass("small-wrap")};return e(),h.lang.eventCenter.addEventListener("Reader.zoomChange",e),this},run:function(){var e=this.ops;if(u(function(){u(".async-widget").widgetAsync({effect:n.ie&&n.ie<8?"show":"slideDown",effect_speed:!1})}),!e.flag)return this;var i=s.detectImgBlock(),t=[];t.push({url:"/browse/widget/viewrecom?pagelets[]=view-like-recom&doc_id="+e.docId,id:"view-like-recom"});var h=function(){this.next=function(){if(t.length){var n=t.shift();r.fetch(n.url,n.id)}else u.event.trigger("orgRightRecon"),u.event.trigger("rightDocLoadEnd");u("#wkgg").on("click",function(){k.xsend(1,102148,{})}),u("#ggbtm").on("click",".fc-link",function(){k.xsend(1,102149,{})});var s=!1;p.getVipInfo().done(function(e){e&&(e.isClassicVip||e.isJiaoyuVip||e.isVip||e.isWenkuEduVip||e.isWenkuVip)&&(s=!0)});var h=A.get("WkInfo")||{};u("#fc-left")&&!s&&h.DocInfo&&"19"!==h.DocInfo.flag&&u.ajax({url:"//wenku.baidu.com/xpage/form/getform?id=fcpcview",success:function(e){if(0===e.status.code){var i=e.data.form_data.left;Math.floor(100*Math.random())<=i&&g.fetchData().then(function(e){var i=e.ads[0];if(i.title&&i.title.length>22&&(i.title=i.title.substr(0,22)+"..."),i.style.idea3009||i.style.idea2062){if(!window.ecom||!window.ecom.pl3){var t=document.createElement("script");t.innerHTML=e.script,document.body.appendChild(t)}u("#fc-left .content").text(i.title),u("#fc-left #fc-click").attr("href",i.link),u("#fc-left #fc-click").attr("datasign",e.time),i.style&&i.style.idea3009&&i.style.idea3009.image_item&&i.style.idea3009.image_item.length&&u("#fc-left img").attr("src",i.style.idea3009.image_item[0].image_link),i.style&&i.style.idea2062&&i.style.idea2062.pic_url&&u("#fc-left img").attr("src",i.style.idea2062.pic_url),o("#fc-left"),u("#fc-left").show(),u("#fc-left").on("click",".vip",function(){new f}),u("#fc-left").on("click",".close",function(){u("#fc-left").hide()}),k.xsend(1,102036,{index:1}),u("#fc-left").on("click",function(){window.ecom&&window.ecom.ck&&window.ecom.ck.addCkOnUrl&&(i.link=window.ecom.ck.addCkOnUrl(i.link,e.time),u("#fc-left #fc-click").attr("href",i.link))}),u(window).scroll(function(){o("#fc-left")})}})}}});var R=100*Math.random();if(e.needShowAd&&u.when(i).then(u(".other-like-doc").height()>10?function(){new w({ele:u("#guess-like-doc"),pid:7,rateRandom:R,viewFcReqRate:e.viewFcReqRate})}:function(){m.init()}),e.needShowAd2||e.is_tianyancha_doc){var j=x.getCookie(+u("#jiaoyu-vip-data").val(),"adOnView","/view");if(j)return;var y=new d({title:e.docTitle,wkAdMid:e.wkAdMid,rateRandom:R,viewFcReqRate:e.viewFcReqRate}),D=function(){var i,t=Math.random();i=.5>=t?22011:22012;new a({ele:u("#wkad18"),pid:18,isVip:s,animEid:i,rateRandom:R,viewFcReqRate:e.viewFcReqRate}),new a({ele:u("#wkad21"),pid:21,isVip:s,wkAdMid:e.wkAdMid,animEid:i,rateRandom:R,viewFcReqRate:e.viewFcReqRate});if(c.show2To3({el:u("#wkad21-2"),next:function(){y.show2To3(function(){new w({ele:u("#wkad21-2"),pid:5,rateRandom:R,viewFcReqRate:e.viewFcReqRate})},t)}}),s?u(".ad-vip-close-bottom").remove():y.showDocBtm(u.noop,t),c.show3To4({el:u("#html-reader-AD-3t4"),next:function(){R<+e.viewFcReqRate?l.fetchData(i).then(function(e){e.ads[2].length?(window.Apex.plugin["parallax-scrolling-webku"]("#html-reader-AD-3t4",{im_time_sign:e.im_time_sign,ads:e.ads[2],animEid:i}),u("#html-reader-AD-3t4").append('<a class="ad-logo"></a>')):c.show3To4Wangmeng()}).fail(function(){c.show3To4Wangmeng()}):c.show3To4Wangmeng()}}),u("#html-reader-AD-4t5").length>0&&c.show4To5({el:u("#html-reader-AD-4t5"),next:function(){R<+e.viewFcReqRate?l.fetchData(i).then(function(e){e.ads[3].length?(window.Apex.plugin["parallax-scrolling-webku"]("#html-reader-AD-4t5",{im_time_sign:e.im_time_sign,ads:e.ads[3],animEid:i}),u("#html-reader-AD-4t5").append('<a class="ad-logo"></a>'),u("#html-reader-AD-4t5").on("click",".ad-logo",function(){if(+u("#jiaoyu-vip-data").val()){u(".ad-onff").remove();var e=h.DocInfo||{},i=_&&_.wkAdMid&&JSON.parse(_.wkAdMid),t=i&&i.vipNoAd||{};x.setUpCookie("adOnView","/view",{vipNoAd:t,jiaoyu_vip_stime:e.jiaoyu_vip_stime})}else{new f}})):y.show4To5(t)}).fail(function(){y.show4To5(t)}):y.show4To5(t)}}),c.show5To6({el:u("#html-reader-AD-5t6"),next:function(){new v({el:"#html-reader-AD-5t6",orgName:e.orgName,vipNoAd:e.vipNoAd})}}),s||b)return void u(".ggbtm-vip-close").remove();c.showFooter({el:u("#ggbtm"),next:function(){new w({ele:u("#ggbtm"),pid:2,animEid:i,rateRandom:R,viewFcReqRate:e.viewFcReqRate})}});var o=u("#ggbtm");o&&o.length&&0===o.html().length&&u(".ggbtm-vip-close").remove()};u.when(i).then(function(){D()})}}},R=new h;if(r.on("pagerendercomplete",R.next,this),t.length){var j=t.shift();r.fetch(j.url,j.id)}return this}},t.exports=j});