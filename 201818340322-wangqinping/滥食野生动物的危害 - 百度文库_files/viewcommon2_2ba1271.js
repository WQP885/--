define("wkview:widget/ui/view/down_doc/downRec.js",function(e){var n=e("wkcommon:widget/lib/tangram/base/base.js"),o=e("wkcommon:widget/lib/fis/data/data.js"),d=e("wkcommon:widget/ui/js_core/log/log.js"),a=e("wkview:widget/format_convert/download_handler/download_handler.js"),t=o.get("WkInfo").otherLikeDocRec,i=o.get("WkInfo").DocInfo,r=!1,w=0,l=4;!function(){function e(e){var n=e&&e.struData;if(n&&n.length)for(var d=0,a=n.length;a>d&&!(w>l);d++)n[d].related_doc_infos&&n[d].related_doc_infos.length&&w++;w>l&&(r&&o(),r=!1)}function o(e){var n=e.disableBlank,o=e.query||"";if(window.getDonwloadCompletePage=function(e){var a="/browse/downloadrec?doc_id="+(i&&i.docId)+"&"+o;return i&&1===i.wpsf?(d.xsend(1,101845,{index:10}),a="/browse/downloadrec?doc_id="+(i&&i.docId)+"&wp=1&"+o):i&&2===i.wpsf&&(d.xsend(1,101845,{index:11}),a="/browse/downloadrec?doc_id="+(i&&i.docId)+"&wp=2&"+o),e&&(a+="&"+$.param(e)),{url:a,disableBlank:n}},d.mark("markDownRec","1"),!a.needConvert(window.dataFormatConvert,i,window.vipInfo)){var t=window.getDonwloadCompletePage();t.disableBlank?location.href=t.url:window.open(t.url,"_blank")}}t&&(w+=t.length),n.lang.eventCenter.addEventListener("recDataForDownLoad",n.fn.bind(e,this)),n.lang.eventCenter.addEventListener("download.realStart",n.fn.bind(o,this))}()});
;define("wkview:widget/ui/view/down_doc/down_org_vip.js",function(o){var e=o("wkcommon:widget/ui/lib/jquery/jquery.js"),n=o("wkcommon:widget/lib/tangram/base/base.js"),d=o("wkcommon:widget/ui/js_core/dialog/dialog.js"),a=o("wkview:widget/ui/doc_business/doc_business.js"),i=o("wkcommon:widget/ui/js_core/log/log.js"),t=o("wkcommon:widget/ui/js_core/login/login.js").login,s=o("wkview:widget/doc_download_main/submit.js"),c=function(){var o=null;return function(){return o||(o=d.dialogCreate()),o}}(),r={wealth:0,pay:0,code:0,orgName:"",down_doc_dialog:null,actionUrl:{userUrl:"/user/submit/download",vipUrl:"/orgvip/submit/download"},mes:[["","\u7acb\u5373\u4e0b\u8f7d"],["","\u5207\u6362\u81f3\u4e2a\u4eba\u8d26\u53f7\u4e0b\u8f7d"],[],["\u672c\u8d26\u53f7\u4eca\u65e5\u4e0b\u8f7d\u603b\u91cf\u5df2\u8d85\u51fa\u6700\u5927\u6b21\u6570\u9650\u5236\uff0c\u8bf7\u660e\u5929\u518d\u8bd5","\u5207\u6362\u81f3\u4e2a\u4eba\u8d26\u53f7\u4e0b\u8f7d"],["\u7cfb\u7edf\u9519\u8bef\uff0c\u8bf7\u5728\u9875\u9762\u5237\u65b0\u540e\u91cd\u65b0\u4e0b\u8f7d","\u786e\u5b9a"],["\u5f53\u524d\u4e0b\u8f7d\u7528\u6237\u592a\u591a\uff0c\u8bf710\u5206\u949f\u4e4b\u540e\u518d\u6765","\u5207\u6362\u81f3\u4e2a\u4eba\u8d26\u53f7\u4e0b\u8f7d"],["\u5f53\u524d\u4e0b\u8f7d\u7528\u6237\u8fc7\u591a\uff0c\u8bf7\u4f11\u606f\u4e00\u4e0b\uff0c\u660e\u5929\u518d\u6765","\u5173\u95ed"],["\u5f53\u524d\u7f51\u7edcIP\u4eca\u65e5\u4e0b\u8f7d\u603b\u91cf\u5df2\u8d85\u51fa\u6700\u5927\u6b21\u6570\u9650\u5236\uff0c\u8bf7\u660e\u65e5\u518d\u8bd5","\u5207\u6362\u81f3\u4e2a\u4eba\u8d26\u53f7\u4e0b\u8f7d"]],initIndex:[],isOrg:!0,isControlKey:!0,init:function(o){var n=this;e.extend(r,o),n.caniuse&&void 0!==n.caniuse.status.code?(n.wealth=0,n.pay=0,n.code=4,n.resSuccess(n.caniuse)):e.ajax({url:"/orgvip/interface/caniuse",cache:!1,async:!1,type:"get",data:{doc_id:n.WkInfo.DocInfo.docId,dowmloadTime:(new Date).getTime()},success:function(o){n.wealth=0,n.pay=0,n.code=4,o&&void 0!==o.status.code&&n.resSuccess(o)}})},resSuccess:function(o){var e=this;void 0!==o.data.org_privilege_left&&(e.wealth=o.data.org_privilege_left||0),void 0!==o.data.doc_privilege_use_num&&(e.pay=o.data.doc_privilege_use_num||0),e.code=o.status.code,e.vipType=+o.data.vip_type,1===+o.data.is_repeat_user&&(e.code=4),e.orgName=decodeURIComponent(o.data.org_name)||"",e.isBDLosgin=o.data.isBDLosgin||!1,e.eventInit()},changePersonDownLoad:function(){var o=this;t.verlogin(function(){var n=new o.downDoc;o.isControlKey=!1,e(document.downloadForm).attr("action",o.actionUrl.userUrl),n.start(!0)},null,null,{actionName:"download",fromMod:"download"},!1)},postGetFile:function(){var o=window.postVcode||0,d=window.postVinput||0;e(document.downloadForm).find("input[name=v_code]").val(o),e(document.downloadForm).find("input[name=v_input]").val(d),n.lang.eventCenter.dispatchEvent("download.realStart"),s.run(document.downloadForm)},eventInit:function(o){var n=this;e.extend(n,o),n.down_doc_dialog=new a,e(document.downloadForm).attr("action",n.actionUrl.vipUrl);var d=[0,-1,99,99,99,99,3,99,1];return d[13]=5,d[14]=6,d[15]=7,n.caniuse&&n.caniuse.data&&1===+n.caniuse.data.eduai?!1:void(-1!==+d[n.code]&&(99===d[n.code]?n.changePersonDownLoad():n.dialogInit(d[n.code])))},dialogInit:function(o){var n=this;switch(n.down_doc_dialog.reset(),o){case 0:i.xsend(1,100261),n.mes[o][0]=11===n.vipType||12===n.vipType?"":"";break;case 1:i.xsend(1,100266),n.mes[o][0]="\u8d26\u53f7\u6301\u6709\u4e0b\u8f7d\u7279\u6743:<em> "+n.wealth+"</em><span>\u65e0\u6cd5\u5b8c\u6210\u672c\u6b21\u4e0b\u8f7d</span>";break;case 3:i.xsend(1,100264)}var d=!1;switch(o){case 2:i.xsend(1,100262),n.down_doc_dialog.vcodePass=!1,n.down_doc_dialog.creat_2(),e(".org_name").html(n.orgName),n.down_doc_dialog.bindEvent();break;case 4:n.down_doc_dialog.set0Msg(n.mes[o][0]);break;case 5:case 6:n.down_doc_dialog.set1Msg("\u60a8\u6b63\u5728\u4f7f\u7528\u7684\u5408\u4f5c\u673a\u6784\u8d26\u53f7 : "+n.orgName),n.down_doc_dialog.set2Msg(n.mes[o][0],"warning"),n.down_doc_dialog.setBtnMsg(n.mes[o][1]),d=!0;break;default:n.down_doc_dialog.set1Msg("\u60a8\u6b63\u5728\u4f7f\u7528\u7684\u5408\u4f5c\u673a\u6784\u8d26\u53f7 : "+n.orgName),n.down_doc_dialog.set2Msg(n.mes[o][0]),n.down_doc_dialog.setBtnMsg(n.mes[o][1]),d=!0}n.down_doc_dialog.bindDownLoadBtton(function(){d?n.isBDLosgin?n.downloaddoc():t.log():n.downloaddoc()}),n.down_doc_dialog.bindChangePerson(function(){1===+o&&i.xsend(1,100267),2===+o&&i.xsend(1,100263),3===+o&&i.xsend(1,100265),n.changePersonDownLoad()}),n.down_doc_dialog.show()},downloaddoc:function(){var o=this;c().confirm({title:"\u4e0b\u8f7d\u6587\u6863",content:'<iframe width="460" height="220" name="runDown" frameborder="0"></iframe>',width:500,height:220,onRendered:function(){o.postGetFile()}}),c().hide()}};return r});
;define("wkview:widget/ui/view/down_doc/exchange_ticket/exchange_ticket.js",function(e,t,i){var n=e("wkcommon:widget/ui/lib/jquery/jquery.js"),c=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,a=e("wkcommon:widget/ui/js_core/mvp/template/template.js").template,s=c({Options:{el:"",tpl:'<div class="view-exchange-wrap">\n    <div class="exchange-box clearfix">\n        <span class="tips">\u53ef\u4ee5\u5151\u6362\uff1a</span>\n        <div class="exchange-input">\n            <div class="drop-bar">\n                <i class="iconfont">&#xe629;</i>\n            </div>\n            <p class="selected-content"></p>\n            <ul class="select-bar">\n                <% for(var i = 0; i < exchangeList.length; i++) { %>\n                    <li class="<%if(i==0){%>first<%}%>" data-ticket="<%=exchangeList[i].ticket%>">\n                        <%=exchangeList[i].ticket%>\u4e0b\u8f7d\u5238\n                    </li>\n                <% } %>\n                <li data-ticket="0">\u81ea\u5b9a\u4e49</li>\n            </ul>\n        </div>\n        <p class="gift">\u518d\u8d603\u4e0b\u8f7d\u5238</p>\n    </div>\n    <p class="consume">\u9700\u8981\u6d88\u8017\uff1a<em class="n">0</em>\u79ef\u5206<span>\uff08\u60a8\u62e5\u6709\u79ef\u5206<%=allWealth%>\uff09</span></p>\n    <p class="error-msg"></p>\n</div>\n',allWealth:0,exchangeRate:4,defaultTicket:30,exchangeList:[{ticket:5,giftTicket:0,validity:7},{ticket:10,giftTicket:0,validity:30},{ticket:30,giftTicket:3,validity:30},{ticket:50,giftTicket:5,validity:30}]},_init:function(){var e=this,t=this.render({exchangeList:e.exchangeList,allWealth:e.allWealth});this.bindEvent(t),e.fire("ex:afterSelectTicket",{ticket:e.defaultTicket}),e.maxTicket=Math.floor(e.allWealth/e.exchangeRate)},render:function(e){return n(this.el).html(a(this.tpl,e))},bindEvent:function(e){var t=this;e.find(".drop-bar").on("mouseover",function(){e.find(".drop-bar .iconfont").html("&#xe628;"),e.find(".select-bar").show()}),e.find(".exchange-input").on("mouseleave",function(){e.find(".drop-bar .iconfont").html("&#xe629;"),e.find(".select-bar").hide()}),e.find(".select-bar li").on("click",function(){var i=n(this),c=i.data("ticket");0===+c?t.fire("ex:showUserDefined"):t.fire("ex:afterSelectTicket",{ticket:c}),e.find(".select-bar").hide()}),e.find(".selected-content").on("keyup","input",function(){var e=+t.validateTicketNum(n(this).val());n(this).val(0===+e?"":e),t.fire("ex:afterSelectTicket",{ticket:e,isUserDefined:!0})}),e.find(".selected-content").on("focus","input",function(){t.fire("ex:userInputTicket")}),e.find(".selected-content").on("blur","input",function(){t.fire("ex:userFinishInputTicket")}),t.on("ex:afterSelectTicket",function(i){var n=t.getGiftTicketNum(i.ticket),c=t.getValidity(i.ticket);e.find(".gift").html(+n>0?"\u518d\u8d60"+n+"\u4e0b\u8f7d\u5238":""),e.find(".consume .n").html(~~i.ticket*t.exchangeRate),i.isUserDefined?e.find(".selected-content span").html(i.ticket?"\uff08\u6709\u6548\u671f"+c+"\u5929\uff09":""):e.find(".selected-content").html(i.ticket+"\u4e0b\u8f7d\u5238<span>\uff08\u6709\u6548\u671f"+c+"\u5929\uff09</span>"),i.ticket>t.maxTicket?t.fire("ex:notHaveEnoughWealth",{msg:"\u79ef\u5206\u4e0d\u8db3\uff0c\u60a8\u6700\u591a\u53ef\u5151\u6362"+t.maxTicket+"\u5f20\u4e0b\u8f7d\u5238"}):i.ticket>500?t.fire("ex:ExceedMax",{msg:"\u5df2\u8d85\u51fa\u5151\u6362\u4e0a\u9650\uff0c\u60a8\u4e00\u6b21\u6700\u591a\u53ef\u5151\u6362500\u5f20\u4e0b\u8f7d\u5238"}):t.fire("ex:clearError")}),t.on("ex:showUserDefined",function(){e.find(".selected-content").html('<input type="text">\u4e0b\u8f7d\u5238<span></span>'),e.find(".selected-content input").focus(),t.fire("ex:afterSelectTicket",{ticket:0,isUserDefined:!0})}),t.on("ex:notHaveEnoughWealth",function(t){e.find(".error-msg").html('<i class="iconfont">&#xe614;</i>'+t.msg)}),t.on("ex:haveEnoughWealth",function(){e.find(".error-msg").html("")}),t.on("ex:ExceedMax",function(t){e.find(".error-msg").html('<i class="iconfont">&#xe614;</i>'+t.msg)}),t.on("ex:clearError",function(){e.find(".error-msg").html("")})},getGiftTicketNum:function(e){for(var t=this.exchangeList,i=t.length-1;i>=0;i--)if(e>=t[i].ticket)return t[i].giftTicket;return 0},getValidity:function(e){for(var t=this.exchangeList,i=t.length-1;i>=0;i--)if(e>t[i].ticket)return i===t.length-1?t[i].validity:t[i+1].validity;return t[0].validity},validateTicketNum:function(e){if((""+e).match(/^\d+/))var t=+(""+e).match(/^\d{0,4}/)[0];else t=0;return t}});i.exports=s});
;define("wkview:widget/ui/view/vip_cashier/conf.js",function(s,a,e){var n={goodsOrder:[9,110,101,106],map:{9:{goodsId:9,goodsShowTile:"\u5e74",rightCorner:"\u4f4e\u81f38.3\u5143/\u6708",desc:'<span class="ori">&yen;129.9</span>',decsAct:"\u770130\u8d603\u4e2a\u6708",shareTicketInfo:'<span class="num">100\u6b21/\u5e74</span><span class="privilege">\u5171\u4eab\u6587\u6863\u4e0b\u8f7d</span>',vipTicketInfo:'<span class="num">60\u6b21/\u5e74</span><span class="privilege">VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d</span>',shareTicketAct:'<span class="num">124\u6b21/\u5e74</span><span class="privilege">\u5171\u4eab\u6587\u6863\u4e0b\u8f7d</span>',vipTicketAct:'<span class="num">75\u6b21/\u5e74</span><span class="privilege">VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d</span>',giveTwoTicket:"\u8d60\u4e24\u79cd\u4e0b\u8f7d\u7279\u6743\u54048\u4e2a",giveShareTicket:"\u8d60\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u674312\u4e2a",giveVipTicket:"\u8d60VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u67434\u4e2a"},1:{goodsId:1,goodsShowTile:"\u6708",rightCorner:"\u8c6a\u534e\u7248",desc:'<span class="ori">&yen;25.9</span>',shareTicketInfo:'<span class="num">20\u6b21/\u6708</span><span class="privilege">\u5171\u4eab\u6587\u6863\u4e0b\u8f7d</span>',vipTicketInfo:'<span class="num">12\u6b21/\u6708</span><span class="privilege">VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d</span>',giveTwoTicket:"\u8d60\u4e24\u79cd\u4e0b\u8f7d\u7279\u6743\u54042\u4e2a",giveShareTicket:"\u8d60\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u67432\u4e2a",giveVipTicket:"\u8d60VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u67432\u4e2a"},200:{goodsId:200,goodsShowTile:"\u8fde\u7eed\u5305\u6708",rightCornerNew:"\u65b0\u5ba2\u798f\u5229",rightCornerOld:"\u4e13\u4eab\u4f18\u60e0",desc:"\u7701\u5fc3\u5b9e\u60e0",descNew:'<span class="ori">&yen;14.9</span>',shareTicketInfo:'<span class="num">15\u6b21/\u6708</span><span class="privilege">\u5171\u4eab\u6587\u6863\u4e0b\u8f7d</span>',vipTicketInfo:'<span class="num">9\u6b21/\u6708</span><span class="privilege">VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d</span>'},110:{goodsId:110,goodsShowTile:"\u8fde\u7eed\u5305\u6708",rightCornerNew:"\u65b0\u5ba2\u798f\u5229",rightCornerOld:"\u4e13\u4eab\u4f18\u60e0",desc:"\u7701\u5fc3\u5b9e\u60e0",descNew:'<span class="ori">&yen;16.9</span>',shareTicketInfo:'<span class="num">15\u6b21/\u6708</span><span class="privilege">\u5171\u4eab\u6587\u6863\u4e0b\u8f7d</span>',vipTicketInfo:'<span class="num">9\u6b21/\u6708</span><span class="privilege">VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d</span>'},3:{goodsId:3,goodsShowTile:"\u534a\u5e74",desc:'<span class="ori">&yen;25.9</span>',shareTicketInfo:'<span class="num">8\u6b21/\u6708</span><span class="privilege">\u5171\u4eab\u6587\u6863\u4e0b\u8f7d</span>',vipTicketInfo:'<span class="num">5\u6b21/\u6708</span><span class="privilege">VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d</span>',giveTwoTicket:"\u8d60\u4e24\u79cd\u4e0b\u8f7d\u7279\u6743\u54046\u4e2a",giveShareTicket:"\u8d60\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u67439\u4e2a",giveVipTicket:"\u8d60VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u67433\u4e2a"},101:{goodsId:101,goodsShowTile:"\u6708",rightCorner:"\u8c6a\u534e\u7248",desc:'<span class="ori">&yen;25.9</span>',shareTicketInfo:'<span class="num">21\u6b21/\u6708</span><span class="privilege">\u5171\u4eab\u6587\u6863\u4e0b\u8f7d</span>',vipTicketInfo:'<span class="num">12\u6b21/\u6708</span><span class="privilege">VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d</span>',giveTwoTicket:"\u8d60\u4e24\u79cd\u4e0b\u8f7d\u7279\u6743\u54042\u4e2a",giveShareTicket:"\u8d60\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u67432\u4e2a",giveVipTicket:"\u8d60VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u67432\u4e2a"},106:{goodsId:106,goodsShowTile:"\u534a\u5e74",desc:'<span class="ori">&yen;79.9</span>',shareTicketInfo:'<span class="num">9\u6b21/\u6708</span><span class="privilege">\u5171\u4eab\u6587\u6863\u4e0b\u8f7d</span>',vipTicketInfo:'<span class="num">5\u6b21/\u6708</span><span class="privilege">VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d</span>',giveTwoTicket:"\u8d60\u4e24\u79cd\u4e0b\u8f7d\u7279\u6743\u54046\u4e2a",giveShareTicket:"\u8d60\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u67439\u4e2a",giveVipTicket:"\u8d60VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u67433\u4e2a"}},vipAct:["1365-end_of_year"],autoPayMap:["200","110"],autoPayMonthMap:["200","110"],isAutoPay:function(s){var a=s+"";return this.autoPayMap.indexOf(a)>-1},isAutoPayMonth:function(s){var a=s+"";return this.autoPayMonthMap.indexOf(a)>-1}};e.exports=n});
;define("wkview:widget/ui/view/vip_cashier/vip_cashier.js",function(e,s,a){var o,c=e("wkcommon:widget/ui/lib/jquery/jquery.js"),t=e("wkcommon:widget/lib/doT/doT.min.js"),n=(e("wkcommon:widget/lib/tangram/base/base.js"),e("wkcommon:widget/lib/fis/data/data.js")),d=n.get("WkInfo"),r=e("wkview:widget/ui/view/vip_cashier/conf.js"),p=e("wkcommon:widget/ui/js_core/log/log.js"),v=e("wkcommon:widget/ui/js_core/login/login.js").login,l=e("wkcommon:widget/ui/lib/cookie/cookie.js"),h=e("wkview:widget/node_modules/davidshimjs-qrcodejs/qrcode.js"),u=function(i){c.extend(!0,this.data,i),this.init()},g=110;u.prototype={constructor:u,data:{userInfo:{},vipInfo:{},goodsData:{},goodsType:3,goodsId:g,isContract:0,isLogin:0,isSelectedGoods:0,qrcode:"",checkQrcodeTimes:0,uticket:0,isNeedCheckTicket:!1,vouchers:{},stopCheckqrpay:!1,isContractUser:0,userType:0,selectedVoucherId:"",selectedVoucherPrice:0,returnUrl:"",docType:"share",isAct:0},init:function(){this.data.vipInfo=window.vipInfo||{},this.data.isLogin=+d.UserInfo.isLogin||0;var i=c(window).width(),e=c(window).height();c(".bg-mask","#vip-cashier").width(i).height(e),this.checkDocType(),this.getVoucherData()},checkDocType:function(){var i=d.DocInfo||{},e="";i.docTicket&&!isVipFreeDoc?e="share":i.docTicket&&isVipFreeDoc?e="vipfree":0===i.docTicket?e="freedoc":+i.professionalDoc&&(e="profession"),this.data.docType=e,p.xsend(1,102283,{docType:e})},getGoodsData:function(){var i=this,e=this.data.isLogin,s=e?i.data.vipInfo.user_type:1;this.data.userType=s,c.ajax({type:"get",url:"/ndcashier/api/fetchJiaoyuVipGoods",success:function(e){if(e.status&&0===e.status.code&&e.data){i.data.goodsData=e.data||{};var a=[],o=e.data,t=r.map;if(c.each(r.goodsOrder,function(){o[this].goodsShowTile=t[this].goodsShowTile,o[this].vipTicketInfo=t[this].vipTicketInfo,o[this].shareTicketInfo=t[this].shareTicketInfo,o[this].desc=r.isAutoPay(this)&&s?t[this].descNew:t[this].desc,o[this].voucherList=i.data.vouchers[this],i.data.goodsData[this].voucherList=i.data.vouchers[this],i.data.goodsData[this].conf=t[this],a.push(o[this])}),o[9]&&o[9].vip_act&&-1!==r.vipAct.indexOf(o[9].vip_act)&&(o[9].desc=t[9].decsAct,o[9].vipTicketInfo=t[9].vipTicketAct,o[9].shareTicketInfo=t[9].shareTicketAct,i.data.isAct=1),i.data.isSelectedGoods=9,1===+s||2===+s){o[g].isSelected=!0;var n=o[g].virtual_voucher||{},d=+n.voucher_price||0;o[g].showPrice=+o[g].sale_price-d,o[g].conf.rightCorner=1===+s?t[g].rightCornerNew:t[g].rightCornerOld}else o[g].showPrice=+o[g].sale_price,o[9].isSelected=!0;i.render(a)}}})},getVoucherData:function(i){var e=this,s=e.data.isLogin;return s?void c.ajax({url:"/ndcashier/api/fetchVouchers",data:{goodsType:"jiaoyu_vip"},success:function(s){var a=s.data||{},o=a.voucher_info||{};c.each(o,function(i,e){c.isArray(e)&&e.push({is_selected:0,valid_time:"",voucher_name:"\u4e0d\u4f7f\u7528\u4ee3\u91d1\u5238",voucher_price:0})}),e.data.vouchers=o,i?e.updateVoucher(i):e.getGoodsData()}}):void e.getGoodsData()},updateVoucher:function(e){if(!e)return c(".vip-voucher-wrap",".vip-cashier-wrap").hide(),void this.changePayInfo(this.data.isSelectedGoods);if(200===+e)return this.data.selectedVoucherId="",this.data.selectedVoucherPrice=0,c(".vip-voucher-wrap",".vip-cashier-wrap").hide(),void this.changePayInfo(e);var s=this.data.vouchers,a=s[e]||[],o=[];if(0===a.length)this.data.selectedVoucherId="",this.data.selectedVoucherPrice=0,c(".vip-voucher-wrap",".vip-cashier-wrap").hide(),this.changePayInfo(e);else{for(o.push('<div class="voucher-goods-type-wrap voucher-goods-type-'+e+'">'),i=0;i<a.length;i++){var t=a[i].voucher_price,n=t?(t/100).toFixed(1)+"\u5143":"",d=a[i].valid_time?"\uff08\u6709\u6548\u671f\u81f3"+a[i].valid_time+"\uff09":"";if(0===i){var r=[];r.push('<div class="voucher-item"  data-voucher-id="'+a[i].voucher_id+'" data-voucher-price="'+t+'">'),r.push(n+a[i].voucher_name),r.push(d),r.push("</div>"),c(".voucher-selected",".vip-cashier-wrap").html(r.join(""))}o.push('<div class="voucher-item"  data-voucher-id="'+a[i].voucher_id+'" data-voucher-price="'+t+'">'),o.push(n+a[i].voucher_name),o.push(d),o.push("</div>")}o.push("</div>"),c(".voucher-list",".vip-cashier-wrap").html(o.join("")),c(".vip-voucher-wrap",".vip-cashier-wrap").show();var p=c(".voucher-goods-type-"+e,".vip-cashier-wrap").find(".voucher-item").first();this.selectVoucher(p,e)}},selectVoucher:function(i,e){if(r.isAutoPay(e))return void this.changePayInfo(e);c(".voucher-selected",".vip-cashier-wrap").html(i.html());var s=i.data();this.data.selectedVoucherId=s.voucherId,this.data.selectedVoucherPrice=s.voucherPrice,c(".voucher-goods-type-wrap",".vip-cashier-wrap").hide(),this.changePayInfo(e)},bindVoucherEvemt:function(){var i=this,e=c("#vip-cashier");e.on("click",".voucher-selected",function(){c(".voucher-goods-type-wrap",e).show()}),e.on("click",".vip-voucher-wrap",function(i){var s=c(i.target);s.closest(".section-content").length||c(".voucher-goods-type-wrap",e).hide()}),e.on("click",".voucher-item",function(e){{var s=c(e.target);s.data()}i.selectVoucher(s,i.data.isSelectedGoods)})},changePayInfo:function(i){var e=this;if(!e.data.isContractUser&&+i){var s=e.data.goodsData[i]||{},a=+s.sale_price||0,t=e.data.selectedVoucherId||"",n=+e.data.selectedVoucherPrice||0,d=0;if(r.isAutoPay(i)){if(d=1,1===e.data.userType||2===e.data.userType){var p=s.virtual_voucher||{};n=+p.voucher_price||0,t=p.voucher_id||""}}else d=this.data.isContract;var v=t&&n?a-n:a;if(c(".price-show",".vip-cashier-wrap").text((v/100).toFixed(1)),e.data.isLogin){var l={goods_type:3,goods_id:i,price:a,cashier_code:"ViewVipCashier"};t&&(l.voucher_id=t),c.ajax({type:"get",url:"/ndcashier/api/fetchvipqrpaycode",data:{goods_type:3,goods_id:i,price:v,voucher_id:t,cashier_code:"ViewVipCashier"+this.data.docType,auth_pay:d},success:function(i){if(i&&i.data&&i.status&&0===i.status.code){e.data.qrcode=i.data.qr_code||"",clearTimeout(o),e.data.stopCheckqrpay=!1,c("#vip-cashier-qrcode").unbind("click").empty(),c("#vip-cashier-qrcode").removeClass("login").removeClass("qr-nologin").removeClass("qr-reload"),c("#vip-cashier-qrcode").empty();{new h(c("#vip-cashier-qrcode")[0],{text:location.origin+"/qv/"+e.data.qrcode,width:80,height:80})}e.data.checkQrcodeTimes=120,e.checkqrpay()}else i&&i.status&&2003===i.status.code?e.showLoginQrCode():e.showRefreshQrCode()},error:function(){e.showRefreshQrCode()}})}else e.showLoginQrCode()}},showLoginQrCode:function(){c("#vip-cashier-qrcode").unbind("click").empty(),c("#vip-cashier-qrcode").removeClass("qr-reload"),c("#vip-cashier-qrcode").addClass("qr-nologin").addClass("login").on("click",function(){localStorage.setItem("vipCashierShow",1),c("#vip-cashier").hide(),v.login.verlogin()})},showRefreshQrCode:function(){var i=this,e=c(".goods-show",".vip-cashier-wrap").data("goodsId")||i.data.goodsId;c("#vip-cashier-qrcode").unbind("click").empty(),c("#vip-cashier-qrcode").removeClass("qr-nologin").removeClass("login"),c("#vip-cashier-qrcode").addClass("qr-reload").on("click",function(){i.changePayInfo(e)})},checkqrpay:function(){var i=this;i.data.stopCheckqrpay||(i.data.checkQrcodeTimes?(i.data.checkQrcodeTimes--,c.ajax({type:"get",url:"/ndcashier/api/checkvipqrpay",async:!1,data:{code:i.data.qrcode},success:function(e){var s=e.status,a=e.data;if(s&&2003===+s.code)return clearTimeout(o),void i.showLoginQrCode();if(a.status&&1===+a.status){clearTimeout(o);var c=d.DocInfo.docId||"";l.set("BAIDU_DOC_NACT"+c,"download",{expires:6048e5}),location.reload()}else o=setTimeout(function(){i.checkqrpay()},5e3)},error:function(){i.showRefreshQrCode()}})):i.showRefreshQrCode())},selectGoodsItem:function(i){var e=c(".vip-cashier-wrap");c(".goods-item",e).removeClass("goods-show"),c(".goods-item-"+i,e).addClass("goods-show");var s=c(".goods-item-"+i,e).data("goodsId");this.data.isSelectedGoods=s,r.isAutoPay(s)?c(".goods-contract",e).hide():c(".goods-contract",e).show(),this.setRenewalInfo(s),this.getVoucherData(s)},setRenewalInfo:function(i){var e=this.data.vipInfo,s=this.data.goodsData,a=e.renewal_vip_info,o=this.data.userType,t=[],n="",d="";if(!i||!s[i])return void c(".xf-info",".vip-cashier-wrap").hide();if(r.isAutoPayMonth(i)&&!o)return void c(".xf-info",".vip-cashier-wrap").hide();if(r.isAutoPayMonth(i)&&1===o)return n="icon-xk",t=['<i class="icon '+n+'"></i>','<span class="red">\u65b0\u5ba2</span>\u9996\u6708\u4ec5','<span class="red">12.9\u5143</span>\uff0c',"\u4f1a\u5458\u5230\u671f\u524d1\u5929\u81ea\u52a8\u6263\u6b3e\u7eed\u8d3914.9\u5143\uff0c\u53ef\u968f\u65f6\u53d6\u6d88"],void c(".xk-info",".vip-cashier-wrap").html(t.join("")).show();if(r.isAutoPayMonth(i)&&2===o)return n="icon-xk",t=['<i class="icon '+n+'"></i>','<span class="red">\u4e13\u4eab\u4f18\u60e0</span>\u9996\u6708\u4ec5','<span class="red">12.9\u5143</span>\uff0c',"\u4f1a\u5458\u5230\u671f\u524d1\u5929\u81ea\u52a8\u6263\u6b3e\u7eed\u8d3914.9\u5143\uff0c\u53ef\u968f\u65f6\u53d6\u6d88"],void c(".xk-info",".vip-cashier-wrap").html(t.join("")).show();if(!e.global_vip_status||!this.data.isLogin)return c(".xf-info",".vip-cashier-wrap").hide(),void c(".xk-info",".vip-cashier-wrap").hide();if(a&&a.jiaoyu_vip_info&&a.jiaoyu_vip_info.is_vip)n="icon-xf",d=a.jiaoyu_vip_info.end_time,t=['<i class="icon '+n+'"></i>',s[i].renew_info," \u7eed\u8d39\u4f1a\u5458\u751f\u6548\u65e5\u671f\uff1a"+d];else{if(!(a&&a.vip_info&&a.vip_info.is_vip))return c(".xf-info",".vip-cashier-wrap").hide(),void c(".xk-info",".vip-cashier-wrap").hide();if(n="icon-sj",a.vip_info.flag)t=["\u4f1a\u5458\u5168\u65b0\u5347\u7ea7\uff0c\u8d60","\u767e\u5ea6\u9605\u8bfbVIP\u7cbe\u54c1\u7248\uff0c\u5347\u7ea7\u540e\u7acb\u5373\u751f\u6548"];else{var p=(Math.ceil((+new Date-1e3*a.vip_info.expire_time)/864e5),a.vip_info.left_day,s[i].len_of_time);renewalVipInfo.normal_download_ticket_total<=1&&renewalVipInfo.pro_download_ticket_total<=1?t=["\u5347\u7ea7"+p+"VIP\uff0c\u5343\u672c\u56fe\u4e66\u514d\u8d39\u770b\uff0c",s[i].conf.giveTwoTicket,"\uff08\u7acb\u5373\u53ef\u7528\uff09"]:renewalVipInfo.normal_download_ticket_total<=1?t=["\u5347\u7ea7"+p+"VIP\uff0c\u5343\u672c\u56fe\u4e66\u514d\u8d39\u770b\uff0c",s[i].conf.giveShareTicket,"\uff08\u7acb\u5373\u53ef\u7528\uff09"]:renewalVipInfo.pro_download_ticket_total<=1?t=["\u5347\u7ea7"+p+"VIP\uff0c\u5343\u672c\u56fe\u4e66\u514d\u8d39\u770b\uff0c",s[i].conf.giveVipTicket,"\uff08\u7acb\u5373\u53ef\u7528\uff09"]:renewalVipInfo.pro_download_ticket_total>1&&renewalVipInfo.normal_download_ticket_total>1&&(total=renewalVipInfo.pro_download_ticket_total+renewalVipInfo.normal_download_ticket_total,t=["\u5347\u7ea7"+p+"VIP\uff0c\u5343\u672c\u56fe\u4e66\u514d\u8d39\u770b\uff0c","\u5269\u4f59"+total+"\u4e0b\u8f7d\u7279\u6743\u5ef6\u65f630\u5929"])}}c(".xk-info",".vip-cashier-wrap").hide(),c(".xf-info",".vip-cashier-wrap").html(t.join("")).show()},render:function(i){var e=this,s=null,a=document.body,o=[],n=d.UserInfo||{},r=e.data.vipInfo,p=d.DocInfo||{},v="",l=+p.professionalDoc||0,h=+p.docTicket||0;if(e.data.isLogin){r.global_vip_status?(v+=r.isJiaoyuVip?'<span class="iconfont ic-jiaoyuVip"></span>':"",v+=r.isClassicVip?'<span class="iconfont ic-classVip">&#xe64e;</span>':"",v+=r.isWenkuEduVip?'<span class="iconfont ic-eduVip">&#xe64e;</span>':""):v='<span class="iconfont ic-not-vip">&#xe64e;</span>';var u=r.renewal_vip_info||{},g=u.jiaoyu_vip_info||{},f=u.vip_info||{};e.data.isContractUser=g&&g.is_contract_pay?1:f&&f.is_contract_pay?1:0}var w={isLogin:e.data.isLogin,userImg:n.headicon||"",displayName:n.displayname||"\u6587\u5e93\u65b0\u4eba",icon:v,docType:p.docType||"unknown",docTitle:p.title||"",docTicket:p.docTicket||0,goodsList:i,vipInfo:r,isContractUser:e.data.isContractUser,isVipProDoc:l,docTicket:h,proDownloadTicket:+r.proDownloadTicket||0,normalDownloadTicket:+r.normalDownloadTicket||0,isAct:e.data.isAct},m=t.template('<div class="vip-cashier-wrap">\n<div class="bg-mask "></div>\n<div class="vip-cashier">\n<div class="vip-head-wrap">\n{{? it.isLogin }}<div class="user-info">\n<img class="user-img" src="{{=it.userImg}}" />\n<span class="display-name">{{=it.displayName}}</span>\n{{=it.icon}}</div>\n{{??}}<div class="user-info no-login">\n<div class="user-img img-nologin"></div>\n<span class="display-name login">\u70b9\u51fb\u767b\u5f55</span>\n</div>\n{{?}}<div class="vip-privilege">\n<span class="privilege-item first-item">\n<i class="ico ico-doc"></i>\u6587\u6863\u4e0b\u8f7d\u7279\u6743</span>\n<span class="privilege-item">\n<i class="ico ico-free"></i>\u767e\u4e07\u514d\u8d39\u6587\u6863</span>\n<span class="privilege-item">\n<i class="ico ico-yd"></i>\u9605\u8bfb\u7cbe\u54c1\u56fe\u4e66</span>\n</div>\n<div class="close"></div>\n</div>\n<div class="vip-doc-wrap">\n<div class="doc-info">\n<div class="doc-type doc-{{=it.docType}}"></div>\n<div class="doc-content">\n<div class="doc-name">{{=it.docTitle}}</div>\n{{? !it.isLogin && !it.isVipProDoc}}<div class="doc-quan">\n\u672c\u6587\u9700\u8981<span class="green">{{=it.docTicket}}\u4e0b\u8f7d\u5238</span>\n<a class="login">\u767b\u5f55</a>\u540e\u67e5\u770b\u4e0b\u8f7d\u5238</div>\n{{?? !it.isLogin && it.isVipProDoc}}<div class="doc-quan">\n\u672c\u6587\u9700\u8981<span class="green">1VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743</span>\n<a class="login">\u767b\u5f55</a>\u540e\u67e5\u770b\u7279\u6743</div>\n{{?? it.vipInfo.global_vip_status && it.isVipProDoc }}<div class="doc-quan">\n\u672c\u6587\u9700\u8981<span class="green">1VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743</span>\n\u5f53\u524d\u62e5\u6709<span class="green">{{=it.proDownloadTicket}}</span>\u7eed\u8d39VIP\u83b7\u5f97\u514d\u8d39\u4e0b\u8f7d\u7279\u6743</div>\n{{?? it.vipInfo.global_vip_status && it.docTicket }}<div class="doc-quan">\n\u672c\u6587\u9700\u8981<span class="green">1\u5171\u4eab\u6587\u6863\u6587\u6863\u4e0b\u8f7d\u7279\u6743</span>\n\u5f53\u524d\u62e5\u6709<span class="green">{{=it.normalDownloadTicket}}</span>\u7eed\u8d39VIP\u83b7\u5f97\u514d\u8d39\u4e0b\u8f7d\u7279\u6743</div>\n{{?? !it.vipInfo.global_vip_status && it.isVipProDoc }}<div class="doc-quan">\n\u672c\u6587\u9700\u8981<span class="green">1VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743</span>\n\u5f53\u524d\u62e5\u6709<span class="green uticket-num">0</span>\u5f00\u901aVIP\u83b7\u5f97\u514d\u8d39\u4e0b\u8f7d\u7279\u6743</div>\n{{??}}<div class="doc-quan">\n\u672c\u6587\u9700\u8981<span class="green">{{=it.docTicket}}\u4e0b\u8f7d\u5238</span>\n\u5f53\u524d\u62e5\u6709<span class="green uticket-num">0</span>\u5f00\u901aVIP\u83b7\u5f97\u514d\u8d39\u4e0b\u8f7d\u7279\u6743</div>\n{{?}}</div>\n{{? it.vipInfo.global_vip_status }}<a class="vip-package" href="/ndcashier/browse/vippackagecashier" target="_blank">\u5355\u72ec\u8865\u5145\u7279\u6743</a>\n{{?}}</div>\n</div>\n<div class="vip-goods-wrap">\n<div class="xf-info"></div>\n<div class="goods-info">\n{{~it.goodsList :item:i}}<div class="goods-item goods-item-{{=item.goods_id}} {{? +item.goods_id === 9 && it.isAct }}goods-act{{?}}"\n                    data-goods-id="{{=item.goods_id}}"\n                    data-sale-price="{{=item.sale_price}}">\n{{? +item.goods_id === 9 && it.isAct }}<div class="right-corner right-corner-act"></div>\n{{?? item.conf.rightCorner}}<div class="right-corner">{{= item.conf.rightCorner}}</div>\n{{?}}<div class="goods-show-type">{{= item.goodsShowTile}}</div>\n<div class="goods-price-wrap">\n<span class="yuan">&yen;</span>\n{{? +item.goods_id === 200}}<span class="goods-price">{{= (item.showPrice / 100).toFixed(1)}}</span>\n{{?? +item.goods_id === 110 }}<span class="goods-price">{{= (item.showPrice / 100).toFixed(1)}}</span>\n{{??}}<span class="goods-price">{{= (item.sale_price / 100).toFixed(1)}}</span>\n{{?}}<div class="goods-tip">{{= item.desc}}</div>\n</div>\n<div class="goods-line"></div>\n<div class="goods-privilege">\n<div class="privilge-tip share-ticket">\n{{= item.vipTicketInfo}}</div>\n<div class="privilge-tip vip-ticket">\n{{= item.shareTicketInfo}}</div>\n</div>\n<div class="goods-selected"></div>\n</div>\n{{~}}</div>\n<div class="xk-info"></div>\n<div class="goods-contract">\n<span class="contract-check"></span>\u5f00\u901a\u81ea\u52a8\u7eed\u8d39\uff0c\u7eed\u8d39\u6210\u529f\u540e\u5269\u4f59\u7279\u6743\u5ef6\u65f630\u5929\uff0c\u53ef\u968f\u65f6\u53d6\u6d88\u3002</div>\n</div>\n<div class="vip-voucher-wrap">\n<div class="section-label">\u4f18\u60e0\u5361\u5238\uff1a</div>\n<div class="section-content">\n<div class="voucher-selected"></div>\n<div class="voucher-list">\n</div>\n</div>\n</div>\n{{? +it.isContractUser }}<div class="contract-pay-wrap">\n\u81ea\u52a8\u7eed\u8d39\u7528\u6237\u9700\u5148\u53d6\u6d88\u81ea\u52a8\u7eed\u8d39\u624d\u53ef\u7eed\u8d39VIP<a href="/user/vip" target="_blank">\u53d6\u6d88\u81ea\u52a8\u7eed\u8d39></a>\n</div>\n{{??}}<div class="vip-qrcode-wrap new-qrcode-wrap">\n<div class="select-wrap">\n<div class="select-item scan-item">\n<i class="ic-scan"></i>\n<span class="scan-tip">\u626b\u7801\u652f\u4ed8</span>\n</div>\n<div class="select-item grey-item"></div>\n</div>\n<div class="scan-main-wrap">\n<div class="qrcode-wrap">\n<div class="img-bd img-bd-lt"></div>\n<div class="img-bd img-bd-rt"></div>\n<div class="img-bd img-bd-lb"></div>\n<div class="img-bd img-bd-rb"></div>\n<div id="vip-cashier-qrcode" class="qrcode {{? !it.isLogin }} qr-nologin login {{?}}">\n</div>\n</div>\n<div class="pay-info-wrap">\n<div class="pay-title">\u652f\u4ed8\u91d1\u989d\uff1a</div>\n<div class="price">&yen;<span class="price-show"></span></div>\n<div class="pay-channel">\n\u652f\u6301\u4f7f\u7528\uff1a<div class="item">\n<i class="ch-ic ic-dxm"></i>\n\u5ea6\u5c0f\u6ee1</div>\n<div class="item">\n<i class="ch-ic ic-zfb"></i>\n\u652f\u4ed8\u5b9d</div>\n<div class="item">\n<i class="ch-ic ic-wx"></i>\n\u5fae\u4fe1\u652f\u4ed8</div>\n</div>\n</div>\n</div>\n</div>\n{{?}}</div>\n</div>')(w);o.push(m),s=document.createElement("div"),s.id="vip-cashier",s.style.display="none",s.innerHTML=m,a.insertBefore(s,a.firstChild),c(s).show(),e.selectGoodsItem(e.data.isSelectedGoods),e.getUserDownloadTicket(),this.bindEvent(),this.bindVoucherEvemt()},bindEvent:function(){var i=this,e=c("#vip-cashier");e.on("click",".close",function(){clearTimeout(o),e.hide()}),e.on("click",".login",function(){e.hide(),v.verlogin()}),e.on("click",".goods-item",function(){i.data.checkQrcodeTimes=0,clearTimeout(o),i.data.stopCheckqrpay=!0;var e=c(this).data("goodsId");i.selectGoodsItem(e)}),e.on("click",".contract-check",function(e){var s=c(e.currentTarget);s.hasClass("checked")?(i.data.isContract=0,i.changePayInfo(i.data.isSelectedGoods),s.removeClass("checked")):(i.data.isContract=1,i.changePayInfo(i.data.isSelectedGoods),s.addClass("checked"))})},getUserDownloadTicket:function(){var i=this,e=c("#vip-cashier");i.data.isNeedCheckTicket&&c.ajax({url:"/customer/interface/getuserdownloadticket",type:"post"}).done(function(e){var s={};e&&0===e.status.code&&(s=e.data),i.data.uticket=parseInt(s.uticket)>0?s.uticket:0}),c(".uticket-num",e).text(i.data.uticket)}},a.exports=u});
;define("wkview:widget/ui/view/small_flow_vipcashier/smallFlow.js",function(t,e,r){function a(t){try{var e={},r=t.total,a=0,i=[];if(o.each(t.strategy,function(t,e){var r=e.percent,o=e.name;for(a+=r;r-->0;)i.push(o)}),a!==r)throw"percent error: "+a;return e.total=r,e.strategy=i,e}catch(n){}}function i(t){var e=n.cookie.get("BAIDUID");if(e){var r=(parseInt(e.substr(0,6),16)||0)%t;return r}}var o=t("wkcommon:widget/ui/lib/jquery/jquery.js"),n=t("wkcommon:widget/lib/tangram/base/base.js");r.exports=function(t){var e=a(t),r=i(e.total);if(e&&!isNaN(r))var o=e.strategy[r];return o=n.cookie.get("view_cashier_radio")||o,o?o:void 0}});
;define("wkview:widget/ui/view/small_flow_vipcashier/smallflow_vip_conf.js",function(e,n,a){var r={strategy:[{name:"new_view_popup",percent:5},{name:"control_group_one",percent:15},{name:"view_duizhao",percent:5},{name:"control_group_two",percent:15},{name:"new_cashier_shiyan",percent:10},{name:"new_cashier_shiyan2",percent:10},{name:"oneday_vip_shiyan1",percent:0},{name:"oneday_vip_shiyan2",percent:0},{name:"xunjie_vip_ratio",percent:0},{name:"tag_view_group",percent:10},{name:"control_group_four",percent:10},{name:"control_group_five",percent:10},{name:"view_cashier_radio",percent:0},{name:"cashier_normal",percent:10}],total:100};a.exports=r});
;define("wkview:widget/ui/view/vcode/status.js",function(e,i,t){var s={SUCCESS:1,FAILED:2,CLOSE:3};t.exports=s});
;define("wkview:widget/ui/view/vcode/vcode.js",function(e,i,n){var o=e("wkview:widget/ui/view/vcode/status.js"),s=e("wkcommon:widget/ui/lib/jquery/jquery.js"),t=e("wkcommon:widget/lib/doT/doT.min.js"),c=e("wkcommon:widget/ui/js_core/log/log.js"),d=function(e){s.extend(!0,this.data,e),this.init()};d.prototype={constructor:d,data:{passVcode:null,vcodecallback:null},init:function(){this.render()},initPassEnv:function(){if(window.PassMachine&&window.PassMachine.mkd){var e=this,i=window.PassMachine.mkd,n=new i({type:"slide",id:"pass-vcode",ak:"f6c1f7830fc65ebb0efc379c05cc07b0",slideConfig:{finishTitle:"\u9a8c\u8bc1\u6210\u529f",headTitle:"\u5b89\u5168\u9a8c\u8bc1",conTitle:"\u6ed1\u81f3\u6700\u53f3 \u5b8c\u6210\u9a8c\u8bc1",bottomTitle:"\u4e3a\u4e86\u4f60\u7684\u5e10\u53f7\u5b89\u5168\uff0c\u672c\u6b21\u64cd\u4f5c\u9700\u8981\u8fdb\u884c\u5b89\u5168\u9a8c\u8bc1"},verifySuccessFn:function(i){window.postDS=i.ds,window.postTK=i.tk,e.closeDialog(o.SUCCESS)},initApiSuccessFn:function(){n.initVcode({},function(){e.hook()})}});e.data.passVcode=n}},hook:function(){setTimeout(function(){s(".vcode-slide-feedback-txt").text("\u610f\u89c1\u53cd\u9988"),s("#new-vcode-wrapper").show()},50)},render:function(){var e={},i=t.template('<div class="vcode-dialog-wrap">\n<div class="vcode-bg-mask"></div>\n<div class="pass-vcode-wrap">\n<div id="pass-vcode"></div>\n<div class="pass-close"></div>\n</div>\n</div>')(e),n=document.createElement("div");n.id="new-vcode-wrapper",n.style.display="none",n.innerHTML=i,document.body.insertBefore(n,document.body.firstChild),this.initPassEnv(),this.bindEvent()},bindEvent:function(){var e=this,i=s("#new-vcode-wrapper");i.on("click",".pass-close",function(){e.closeDialog(o.CLOSE)})},closeDialog:function(e){var i=this.data.vcodecallback;s("#new-vcode-wrapper").remove(),i&&i(e),c.xsend(1,102373,{result:e,type:"pass"})}},n.exports=d});
;define("wkview:widget/ui/view/down_doc/dialog_down_doc/dialog_down_doc.js",function(i,t,e){var o=i("wkcommon:widget/ui/lib/jquery/jquery.js"),n=(i("wkcommon:widget/ui/js_core/dialog/dialog.js"),i("wkcommon:widget/lib/tangram/base/base.js")),s=i("wkcommon:widget/lib/fis/data/data.js"),a=s.get("WkInfo"),c=i("wkcommon:widget/ui/js_core/log/log.js"),d=i("wkcommon:widget/ui/js_core/xform/xform.js"),l=(i("wkcommon:widget/ui/js_core/dialogCashier/dialogCashier.js"),i("wkview:widget/ui/view/down_doc/exchange_ticket/exchange_ticket.js")),p=(i("wkcommon:widget/ui/js_core/login/login.js").login,i("wkview:widget/format_convert/dialog_down_doc/format_convert.js")),r=i("wkview:widget/model/vipData.js"),u=i("wkview:widget/node_modules/davidshimjs-qrcodejs/qrcode.js"),h=i("wkview:widget/ui/view/vip_cashier/vip_cashier.js"),v=i("wkview:widget/ui/view/small_flow_vipcashier/smallFlow.js"),b=i("wkview:widget/ui/view/small_flow_vipcashier/smallflow_vip_conf.js"),g=i("wkview:widget/ui/view/vcode/vcode.js"),w=i("wkview:widget/ui/view/vcode/status.js"),f={isZhuangyuan:!1,getIsZhuangyuan:function(){var i=this;o.get("/pgc/interface/zhuangyuanbiji?uname="+i.uname,function(t){0===t.status.code&&t.data.is_zhuangyuan&&(i.isZhuangyuan=!0,o("#tip-notice-new").remove(),i.isZhuangyuan&&d.getJSON("2015gaokao_zhuangyuanbiji_view",{success:function(t){i.zhuangyuanQcode=t.image}}))})},init:function(){this.isPgc=a.verify_user_info,this.isPgc&&(this.uname=a.DocInfo.creater,this.getIsZhuangyuan())}};setTimeout(function(){a=s.get("WkInfo"),f.init()},200);var m=function(){var i=function(i){this.init.apply(this,[i])};return i.prototype={constructor:i,initFormatConvertWrap:function(i,t){var e=s.get("WkInfo"),n=e.DocInfo||{},a=n.vipHuixueConvert||{};0!==+a.is_open&&r.run(function(){o(window).on("switch-format-doc-type",function(i,t){var e=o(".dialog-top .final-doc-icon");if(e&&e.length){for(var n=e[0].classList,s=[],a=0;a<n.length;a++){var c=n[a];/^doc-icon-/.test(c)&&s.push(c)}e.removeClass(s.join(" ")).addClass("doc-icon-"+t.docTypeText)}}),p.init(i,{transType:t,vipInfo:window.vipInfo})})},initPublicTpl:function(){var i=this,t=a.DocInfo||{},e=a.transType||{},o=t.vipHuixueConvert||{};0===+o.is_open&&(e={}),i.publicTpl={wealth_doc_ad:f.isZhuangyuan?['<div class="qcode-miti">','<img src="'+f.zhuangyuanQcode+'" />','<p class="subtitle">\u626b\u63cf\u4e0b\u8f7d\u89c5\u9898</p>','<p class="text">\u672c\u6587\u514d\u8d39\u8fd8\u9001\u5168\u5957\u72b6\u5143\u7b14\u8bb0</p>',"</div>"].join(""):"",publicHdTpl:['<div class="close-btn"></div>','<div class="dialog-left-greenbar"></div>','<div class="dialog-top">','<p class="doc-title" rel="new-dialog" alt="dialog_tit">'+i.docTitle+"</p>",'<p class="doc-size doc-size-4">\uff08'+i.docSize+"K\uff09</p>",'<div class="format-convert-wrap"></div>',"</div>"].join(""),dialogAdWrap:['<div class="dialog-ad">','   <div class="dialog-ad-hd"></div>'].join(""),vcodeTpl:['<div class="vcode-box">','    <input type="text" class="vcode-ipt" />','    <img src="" />','    <span class="vcode-change">\u6362\u4e00\u6362</span>','    <b class="vcode-right"></b>','    <p class="error-tip"><b class="vcode-error"></b><span>\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801\uff01</span></p>',"</div>"].join(""),vipFreeDocLimitedBottomTpl:['<p class="vipdoc-limited hide">','<span class="iconfont ico-vip">&#xe64e;</span>','<a href="/cashier/browse/dispatch?dqStatCode=31_8_171_175&from_doc='+a.DocInfo.docId+'" class="log-xsend" ','data-logxsend="[1, 100462]" target="_blank">','VIP\u9650\u514d\u6587\u6863 <span class="vipdoc-limited-con"></span></a>',"</p>"].join(""),finishYdAppTaskTpl:['<div class="dialog-bottom-yd">','<div class="toast-it-downdoc hide">\u9886\u53d6\u5931\u8d25,\u4efb\u52a1\u5b8c\u6210\u540e\u518d\u8bd5\u8bd5</div>','<p class="ydtip-text"><span class="yd-ticket"></span>\u767e\u5ea6\u9605\u8bfb\u9001\u60a8\u4e0b\u8f7d\u5238\u4e00\u5f20</p>','<p class="ydtip-app">\u626b\u7801\u8fdb\u5165APP\u5e76\u7b7e\u5230\uff0c\u5b8c\u6210\u540e','<a href="javascript:void(0);" class="getyddownloadticket">\u70b9\u51fb\u6b64\u5904\u9886\u53d6</a></p>','<div class="qrcode-img"></div>','<a href="/task/browse/other?from=view-pop" target="_blank"','class="log-xsend dialog-bottom-yd-toNA" data-logxsend="[1, 101031, {index:2}]">',"\u83b7\u53d6\u66f4\u591a\u4e0b\u8f7d\u5238</a>","</div>"].join(""),finishWkAppTaskTpl:['<div class="dialog-bottom-yd">','<p class="ydtip-text"><span class="yd-ticket"></span>\u767e\u5ea6\u6587\u5e93\u9001\u60a8\u4e0b\u8f7d\u5238\u4e24\u5f20</p>','<p class="ydtip-app">\u65b0\u7528\u6237\u626b\u7801\u4e0b\u8f7d\u6587\u5e93APP\u5e76\u6309\u7167\u5f15\u5bfc\u767b\u5f55\uff0c\u5b8c\u6210\u540e','<a href="javascript:void(0);" class="getwkdownloadticket">\u70b9\u6b64\u5237\u65b0</a>',"</p>",'<div class="qrcode-wk-img"></div>',"</div>"].join("")},(a.DocInfo.jiaoyu_vip_type>0||a.DocInfo.vip_type>0)&&(i.publicTpl.dialogAdWrap=[])},_dialog:{},dialogObj:null,$iframe:{content:null},setDialog:function(i){this.dialogObj=i},getTestCashierCode:function(){var i=n.url.getQueryValue(location.href,"isVipfree")||"",t="";return(1===+i||2===+i)&&(t="download_frSearch_test"),c.xsend(1,102497,{isVip:0,jingpin_vip_test:i}),t},init:function(i){this.options=i,this.docTitle=n.string.getByteLength(a.DocInfo.title)<26?a.DocInfo.title:n.string.subByte(a.DocInfo.title,26,"..."),this.docSize=(a.DocInfo.size/1024+"").replace(/^(\d+\.\d)\d+$/,"$1"),this.prerogativeTxt="\u901a\u7528\u4e0b\u8f7d\u7279\u6743",a.UserInfo&&1===+a.UserInfo.smallFlowProfessionalDoc&&(this.prerogativeTxt="\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743");var t=n.url.getQueryValue(location.href,"____needpass___");if(t)this.showPassVcode=!0;else{{this.calTestId(100)}this.showPassVcode=this.options.isShowVcode&&(!n.browser.ie||n.browser.ie&&n.browser.ie>8)&&window.PassMachine&&window.PassMachine.mkd}this.showImgVcode=!this.showPassVcode&&this.options.isShowVcode,this.options.isShowVcode&&c.xsend(1,102372,{type:this.showImgVcode?"img":"pass"}),this.isChrome=n.browser.chrome||n.browser.safari,this.smallFlow=v(b),this.smallFlowFlag="view_cashier_radio"===this.smallFlow?!0:!1,this.creat(),this.addEventListener(),this.initVcode(),this.initPublicTpl(),this.getAdvTpl(),document.downloadForm.storage.value=1,this.getDownloadYunyingAD()},calTestId:function(i){var t=-1,e=-1;try{var o=n.cookie.get("BAIDUID");t=parseInt(o.substring(0,6),16),e=t%(i||100)}catch(s){console.log("ABtestTool ERROR",s)}return e},getDownloadYunyingAD:function(){return o.ajax({type:"get",url:"/xpage/form/getform?id=wenku_pc_download_yunying",cache:!1}).done(function(i){var t=o(document).find(".download-yunying-img-content");if(1===t.length&&i.data.form_data.open){c.xsend(1,101535);var e=i.data.form_data.content,n=['<a href="'+e.link+'" class="log-xsend" data-logxsend="[1, 101534]"',' target="_blank" style="display:inline-block;">','<img src="'+e.img+'" alt="">',"</a>"].join("");t.css("marginTop","25px").html(n).parents(".dialog-bottom").css("height","194px");var s=t.parents(".WkDialogDownDoc"),a=s.offset().top;s.css("top",a-95)}}).fail(function(){})},getAdvTpl:function(){var i=["//wenku","baidu.com/shifen/get"],t=57,e=this;a.DocInfo.jiaoyu_vip_type>0||a.DocInfo.vip_type>0||o.ajax({type:"get",url:i[0]+"."+i[1],dataType:"jsonp",data:{pid:t,tid:1},success:function(i){if(i[0].ad_id){e.$el.find(".dialog-ad").css({width:590,background:"url("+i[0].tpl_data[0].infoImg+") center top"}),e.$el.find(".dialog-ad-hd").html(['<a target="_blank" href="'+i[0].tpl_data[0].link+'" ','class="dialog-ad-more">',"</a>"].join(""));for(var o=0;o<i.length;o++)c.xsend(1,100421,{action_type:"display",group_id:t,advertiser:i[o].from,ad_id:i[o].ad_id})}},error:function(){}})},creat:function(){var i=o(".WkDialogDownDoc").length+1,t=o('<div id="WkDialogDownDoc_'+i+'" class="WkDialogDownDoc '+(f.isZhuangyuan&&"zhuangyuan")+'"></div>'),e=o('<div class="dialog-container-iframe"><iframe allowTransparency="true" src="" frameborder="0" scrolling="no"></iframe></div>');this.$el=t,t.appendTo(o("body")),null==this.$iframe.content&&(this.$iframe.content=e,t.after(e))},show:function(i){o("#doc_reader")&&!this.isChrome&&(o("#doc_reader").css("visibility","hidden"),window.docReaderHideIEtxt="fuckIE");var t=this,e=o(window).height();this.$iframe.content.css({height:o("body").height()}).show(),this.$el.css("top",e/2-150).show(),"function"==typeof i&&i(t);var n=o(".dialog-top .format-convert-wrap"),s=a.transType||{};this.initFormatConvertWrap(n,s)},close:function(i){var t=this;this.$el.css("display","none"),this.$iframe.content.css("display","none"),o("#doc_reader")&&o("#doc_reader").css("visibility","visible"),"function"==typeof i&&i(t)},addEventListener:function(){var i=this;this.$el.on("click",".close-btn",function(){i.close()}),this.$el.on("click",".vcode-change",function(){i.vcodeImg()}),this.$el.on("click",".btn-diaolog-downdoc",o.proxy(this.handleDownload,this)),setTimeout(function(){o(".vcode-ipt").on("input propertychange",function(){if(o(this).val().length>5)i.vcodeError();else if(4===o(this).val().length){var t=o(this).val();o.get("/user/interface/vcodefordownload?m=check&&v_code="+i.vcodeValue+"&v_input="+t+"&t="+(new Date).getTime(),function(e){e.errno?i.vcodeError():(i.vcodeOk(),i.vcodePass=!1,window.postVcode=i.vcodeValue,window.postVinput=t)})}else i.$el.find(".vcode-box .vcode-right").css("visibility","hidden"),i.$el.find(".vcode-box .error-tip").css("height","0px")})},10)},handleDownload:function(){if(this.isFromViewRec()){var i=a.DocInfo||{},t=i.docTicket,e=function(){var t=!!s.get("VipFreeDoc");return t?0:i.docTicket}(),o=i.docId,n="";c.xsend(1,101322,{originPrice:t,salePrice:e,docId:o,goodsId:n,type:2})}},isFromViewRec:function(){return/mark_pay_doc/.test(location.search)&&/mark_rec_page/.test(location.search)&&/mark_rec_position/.test(location.search)?!0:!1},getDate:function(){var i=new Date;return{day:i.getDate(),month:i.getMonth()+1,year:i.getFullYear(),hour:i.getHours(),minutes:i.getMinutes(),today:i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()}},changeDateBySecond:function(i){var t=+i,e=parseInt(t/86400,10)>0?parseInt(t/86400,10):0,o=parseInt((t-86400*e)/3600,10);o=o>0?o:0;var n=parseInt((t-(86400*e+3600*o))/60,10);n=n>0?n:0;var s=t-(86400*e+3600*o+60*n);return s=s>0?s:0,{day:e,hour:o,min:n,sec:s}},initVcode:function(){var i=this;i.showImgVcode&&(i.vcodePass=!0,i.vcodeImg())},executeDownload:function(){c.xsend(1,100036),this.close(),n.lang.eventCenter.dispatchEvent("download.toGetFile")},vcodeOk:function(){o(".vcode-box .vcode-right").css("visibility","visible"),o(".vcode-box .error-tip").css("height","0px")},vcodeError:function(){o(".vcode-box .error-tip").css("height","16px"),o(".vcode-box .vcode-right").css("visibility","hidden")},vcodeImg:function(){var i=this;o.get("/vcode?t="+(new Date).getTime(),function(t){o(".vcode-box img").attr("src",t.imgurl),i.vcodeValue=t.vcode_str,window.postVcode=i.vcodeValue})},vipFreeDocLimitedCountDown:function(){var i=this,t={},e=null,o=function(){t=i.changeDateBySecond(i.options.vipDocLimitedTime);var e="\u5269\u4f59"+t.day+"\u5929"+t.hour+"\u65f6"+t.min+"\u5206"+t.sec+"\u79d2";i.$el.find(".vipdoc-limited-con").html(e)};this.$el.find(".bottom-btn").addClass("hide"),this.$el.find(".vipdoc-limited").removeClass("hide"),this.options.vipDocLimitedTime>0&&o(),e=setInterval(function(){i.options.vipDocLimitedTime>0?(i.options.vipDocLimitedTime--,o()):clearInterval(e)},1e3)},_changeDownloadTicket:function(){var i=this;if(i.dialogObj){if(i.options.needUticket<=i.options.UticketCount)return console.log("\u4e0b\u8f7d\u5238\u591f\u7528"),i._dialog["vipDocDialog-enough"]||(i._dialog["vipDocDialog-enough"]=i.dialogObj.get("vipDocDialog-enough",i.options)),void i._dialog["vipDocDialog-enough"].show();if(i.options.UticketCount<i.options.needUticket&&i.options.canUticket+i.options.UticketCount>=i.options.needUticket)return console.log("\u4e0b\u8f7d\u5238\u4e0d\u591f\u7528,\u5151\u6362\u540e\u53ef\u4ee5\u7528"),i._dialog["vipDocDialog-enough-afterexchage"]=i.dialogObj.get("vipDocDialog-enough-afterexchage",i.options),void i._dialog["vipDocDialog-enough-afterexchage"].show();if(i.options.UticketCount<i.options.needUticket&&i.options.canUticket+i.options.UticketCount<i.options.needUticket){if(console.log("\u4e0b\u8f7d\u5238\u4e0d\u591f\u7528,\u5151\u6362\u540e\u4e0d\u591f"),i.smallFlowFlag){{new h({uticket:i.options.UticketCount,isNeedCheckTicket:!1})}return}return i._dialog["vipDocDialog-noenough-afterexchage"]||(i._dialog["vipDocDialog-noenough-afterexchage"]=i.dialogObj.get("vipDocDialog-noenough-afterexchage",i.options)),void i._dialog["vipDocDialog-noenough-afterexchage"].show()}}},_changePrivilegeTicket:function(){n.lang.eventCenter.dispatchEvent("download.checkVipDownload")}},i}(),k={get:function(i,t){var e=function(){this.dialog=i,this.options=t,this.init.apply(this),this.not_hit_dump_doc=1===+t.not_hit_dump_doc,this.not_hit_dump_doc&&o(".wpUpload").length>0&&o(".wpUpload").remove()};return e.prototype=o.extend(new m(t),this[i]?this[i]:{}),new e},freeDocDialog:{tpl:function(){var i=this,t=s.get("verticalDocType")||"";if(2===+t)var e=['   <div class="dangjian-content">','       <div class="wapview-qrcode"></div>','       <div class="dangjian-inner">',"           <p>\u626b\u4e00\u626b</p>","           <p>\u7acb\u5373\u5206\u4eab\u7ed9\u597d\u53cb</p>",'           <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc" data-logxsend="">','               <b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u4e0b\u8f7d</b></a>',"       </div>","   </div>"].join("");else var e=['       <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\u4e0b\u8f7d\u5238\uff1a0</p>','       <div class="blank20"></div>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc" data-logxsend="">','           <b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u4e0b\u8f7d</b></a>','       <div class="wpUpload">','           <label for="wpUpload">','               <input type="checkbox" name="wpUpload" value="1" checked="checked">',"                   <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>","           </label>","       </div>","   </div>"].join("");return[i.publicTpl.dialogAdWrap,'<div class="dialog-container">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',e,function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-btn">','           <i class="iconfont" style="color:#2FAD85">&#xe601;</i>','           <a href="/cashier/browse/dispatch?dqStatCode=download_pop_tips" target="_blank">',"           \u52a0\u5165VIP\uff0c\u4e0b\u8f7d\u7279\u6743\u968f\u5fc3\u7528\uff01","       </p>",'       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){var i=this.tpl();this.$el.html(i),this.addEventListener()},addEventListener:function(){var i=this;if(o(".dangjian-content .wapview-qrcode").length>0)for(var t=a.DocInfo.docId,e="https://wk.baidu.com/view/"+t,n=0;n<o(".dangjian-content .wapview-qrcode").length;n++){new u(o(".dangjian-content .wapview-qrcode")[n],{text:e,width:103,height:103,correctLevel:u.CorrectLevel.L})}this.$el.on("click",".btn-diaolog-downdoc",function(){if(i.showImgVcode){if(i.vcodePass)return c.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;c.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=0,i.executeDownload()}else if(i.showPassVcode){new g({vcodecallback:function(t){t===w.SUCCESS&&(document.downloadForm.useTicket.value=0,i.executeDownload())}})}else document.downloadForm.useTicket.value=0,i.executeDownload()})}},vipFreeDocDialog:{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">','       <p class="ticket-num-msg msg1">\u672c\u6587\u4e3a\u6587\u5e93VIP\u514d\u8d39\u6587\u6863\uff0c\u60a8\u53ef\u76f4\u63a5\u4e0b\u8f7d</p>','       <p class="ticket-detail-msg msg2"></p>','       <div class="blank20"></div>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc">','           <b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u4e0b\u8f7d</b></a>','       <div class="wpUpload">','           <label for="wpUpload">','               <input type="checkbox" name="wpUpload" value="1" checked="checked">',"                   <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>","           </label>","       </div>","   </div>",function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <div class="blank20"></div>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.addEventListener(),c.xsend(1,100273)},addEventListener:function(){var i=this;this.$el.on("click",".btn-diaolog-downdoc",function(){if(i.showImgVcode){if(i.vcodePass)return c.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;c.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.req_vip_free_doc.value=1,i.executeDownload()}else if(i.showPassVcode){new g({vcodecallback:function(t){t===w.SUCCESS&&(document.downloadForm.req_vip_free_doc.value=1,i.executeDownload())}})}else document.downloadForm.req_vip_free_doc.value=1,i.executeDownload()})}},normalVipTicketDocDialog:{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1">\u60a8\u7684<strong>'+i.prerogativeTxt+'</strong>\u5269\u4f59\uff1a<b class="ml-5">'+i.options.ticketCount+"\u6b21</b></p>",'       <p class="ticket-detail-msg msg2"></p>','       <div class="blank20"></div>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc">','           <b class="ui-bz-btn-p-16 ui-bz-btc">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d</b></a>','       <div class="wpUpload">','           <label for="wpUpload">','               <input type="checkbox" name="wpUpload" value="1" checked="checked">',"                   <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>","           </label>","       </div>","   </div>",function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-btn"><a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a></p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.addEventListener(),c.xsend(1,100113)},addEventListener:function(){var i=this;this.$el.on("click",".btn-diaolog-downdoc",function(){if(i.showImgVcode){if(i.vcodePass)return c.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;c.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=1,i.executeDownload()}else if(i.showPassVcode){new g({vcodecallback:function(t){t===w.SUCCESS&&(document.downloadForm.useTicket.value=1,i.executeDownload())}})}else document.downloadForm.useTicket.value=1,i.executeDownload()}),this.$el.on("click",".btn-uDownTicket",function(){i.close(),i._changeDownloadTicket()})}},normalVipNoTicketDocDialog:{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1">\u60a8\u7684<strong>'+i.prerogativeTxt+'</strong>\u5269\u4f59\uff1a<b class="ml-5">0</b>\u6b21</p>','       <p class="ticket-detail-msg msg2"></p>','       <div class="blank20"></div>','       <a href="/cashier/browse/vippackagecashier?dqStatCode=31_23_38_39&from_doc='+a.DocInfo.docId+'" class="ui-bz-btn-senior"><b class="ui-bz-btn-p-16 ui-bz-btc">\u8865\u5145VIP\u7279\u6743</b></a>',"   </div>",'   <div class="dialog-bottom">','       <p class="bottom-btn"><a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a></p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.addEventListener(),c.xsend(1,100114)},addEventListener:function(){var i=this;this.$el.on("click",".btn-uDownTicket",function(){i.close(),i._changeDownloadTicket()})}},miniVipTicketDocDialog:{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1">\u60a8\u7684<strong>'+i.prerogativeTxt+'</strong>\u5269\u4f59\uff1a<b class="ml-5">'+i.options.ticketCount+"\u6b21</b></p>",i.leftTime,'       <div class="blank20"></div>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc">','           <b class="ui-bz-btn-p-16 ui-bz-btc">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d</b></a>','       <div class="wpUpload">','           <label for="wpUpload">','               <input type="checkbox" name="wpUpload" value="1" checked="checked">',"                   <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>","           </label>","       </div>","   </div>",function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-btn">','           <i class="iconfont" style="color:#2FAD85">&#xe601;</i>','           <a href="/cashier/browse/dispatch?dqStatCode=download_pop_tips" target="_blank">',"           \u52a0\u5165VIP\uff0c\u4e0b\u8f7d\u7279\u6743\u968f\u5fc3\u7528\uff01","       </p>",'       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){this.initEvent(),this.$el.html(this.tpl()),this.addEventListener(),c.xsend(1,100113)},initEvent:function(){var i=this,t=i.changeDateBySecond(i.options.is_mini_time);i.leftTime=0===t.day&&0===t.hour&&0===t.min&&t.sec>0?'<p class="ticket-detail-msg msg2 ps">\uff0824\u5c0f\u65f6VIP\u8fd8\u5269\u4e0d\u52301\u5206\u949f\u5230\u671f\uff09</p>':0===t.day?'<p class="ticket-detail-msg msg2 ps">\uff0824\u5c0f\u65f6VIP\u8fd8\u5269'+t.hour+"\u5c0f\u65f6"+t.min+"\u5206\u949f\u5230\u671f\uff09</p>":""},addEventListener:function(){var i=this;this.$el.on("click",".btn-diaolog-downdoc",function(){if(i.showImgVcode){if(i.vcodePass)return c.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;c.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=1,i.executeDownload()}else if(i.showPassVcode){new g({vcodecallback:function(t){t===w.SUCCESS&&(document.downloadForm.useTicket.value=1,i.executeDownload())}})}else document.downloadForm.useTicket.value=1,i.executeDownload()})}},miniVipNoTicketDocDialog:{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1">\u60a8\u7684<strong>'+i.prerogativeTxt+'</strong>\u5269\u4f59\uff1a<b class="ml-5">0</b>\u6b21</p>','       <p class="ticket-detail-msg msg2"></p>','       <div class="blank20"></div>','       <a href="/cashier/browse/dispatch?dqStatCode=31_8_158_159&from_doc='+a.DocInfo.docId+'" class="ui-bz-btn-senior">','<b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u7eed\u8d39</b></a>',"   </div>",'   <div class="dialog-bottom">','       <p class="bottom-btn"><a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a></p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.addEventListener(),c.xsend(1,100114)},addEventListener:function(){var i=this;this.$el.on("click",".btn-uDownTicket",function(){i.close(),i._changeDownloadTicket()})}},eduVipTicketDocDialog:{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1">\u60a8\u7684<strong>\u6559\u80b2\u4e0b\u8f7d\u7279\u6743</strong>\u5269\u4f59\uff1a<b class="ml-5">'+i.options.ticketCount+"\u6b21</b></p>",'       <p class="ticket-detail-msg msg2"></p>','       <div class="blank20"></div>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc">','           <b class="ui-bz-btn-p-16 ui-bz-btc">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d</b></a>','       <div class="wpUpload">','           <label for="wpUpload">','               <input type="checkbox" name="wpUpload" value="1" checked="checked">',"                   <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>","           </label>","       </div>","   </div>",function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-btn"><a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a></p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.addEventListener()},addEventListener:function(){var i=this;this.$el.on("click",".btn-diaolog-downdoc",function(){if(i.showImgVcode){if(i.vcodePass)return c.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;c.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=2,i.executeDownload()}else if(i.showPassVcode){new g({vcodecallback:function(t){t===w.SUCCESS&&(document.downloadForm.useTicket.value=2,i.executeDownload())}})}else document.downloadForm.useTicket.value=2,i.executeDownload()}),this.$el.on("click",".btn-uDownTicket",function(){i.close(),i._changeDownloadTicket()})}},eduNormalVipDocDialog:{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container eduNormalVipDocDialog need-wealth">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <div class="vip-select-layout">\u60a8\u7684','           <div class="vip-select-box">','               <span class="vip-select-box-value">\u6559\u80b2\u4e0b\u8f7d\u7279\u6743</span>','               <i class="vip-select-box-btn"></i>','               <ul class="option-list">','                   <li class="option checked"><a href="javascript:;" data-type="1">\u6559\u80b2\u4e0b\u8f7d\u7279\u6743</a></li>','                   <li class="option"><a href="javascript:;" data-type="2">'+i.prerogativeTxt+"</a></li>","               </ul>","           </div>",'           \u5269\u4f59\uff1a<em class="vip-ticket-count">0</em>\u6b21',"       </div>",'       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc" style="display:none"><b class="ui-bz-btn-p-16 ui-bz-btc">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d</b></a>','       <a href="/cashier/browse/vippackagecashier?dqStatCode=31_23_38_39&from_doc='+a.DocInfo.docId+'" class="ui-bz-btn-senior btn_goto_buyvip" style="display:none"><b class="ui-bz-btn-p-16 ui-bz-btc">\u8865\u5145VIP\u7279\u6743</b></a>',"   </div>",function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-btn"></p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.initDom(),this.addEventListener(),this._UI_init(+this.options.edu_download_ticket>0&&+this.options.ticketCount>0||+this.options.edu_download_ticket>0?1:2)},initDom:function(){this.E=this.E||{},this.E.$vipSelectBoxBtn=this.$el.find(".vip-select-box-btn"),this.E.$optionList=this.$el.find(".option-list"),this.E.$vipTicketCount=this.$el.find(".vip-ticket-count"),this.E.$vipSelectBoxValue=this.$el.find(".vip-select-box-value"),this.E.$btnDiaologDowndoc=this.$el.find(".btn-diaolog-downdoc"),this.E.$btnGotoBuyvip=this.$el.find(".btn_goto_buyvip"),this.E.$bottomBtn=this.$el.find(".bottom-btn"),this.E.$btnUDownTicket=this.$el.find(".btn-uDownTicket")},addEventListener:function(){var i=this;this.$el.on("click",".btn-uDownTicket",function(){i.close(),i._changeDownloadTicket()}),this.$el.on("click",function(){i.E.$vipSelectBoxBtn.removeClass("vip-select-box-btn-cur"),i.E.$optionList.hide()}),this.E.$vipSelectBoxBtn.on("click",function(t){t.stopPropagation(),o(this).hasClass("vip-select-box-btn-cur")?(o(this).removeClass("vip-select-box-btn-cur"),i.E.$optionList.hide()):(o(this).addClass("vip-select-box-btn-cur"),i.E.$optionList.show())}),this.E.$optionList.find(".option a").on("click",function(){var t=o(this),e=t.data("type");i._UI_init(e)}),this.E.$btnDiaologDowndoc.on("click",function(){if(i.showImgVcode){if(i.vcodePass)return c.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;c.xsend(1,102373,{result:1,type:"img"}),i.executeDownload()}else if(i.showPassVcode){new g({vcodecallback:function(t){t===w.SUCCESS&&i.executeDownload()}})}else i.executeDownload()})},_UI_init:function(i){var t=this;this.E.$optionList.find("a[data-type='"+i+"']").eq(0).parent().siblings().removeClass("checked").end().addClass("checked"),1===+i&&(t.E.$vipSelectBoxValue.html("\u6559\u80b2\u4e0b\u8f7d\u7279\u6743"),t.E.$vipTicketCount.html(t.options.edu_download_ticket),+t.options.edu_download_ticket>0?(t.E.$btnDiaologDowndoc.show(),t.E.$btnGotoBuyvip.hide(),t.E.$bottomBtn.html('<a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a>')):(t.E.$btnDiaologDowndoc.hide(),t.E.$btnGotoBuyvip.show(),t.E.$bottomBtn.html('<a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a>')),document.downloadForm.useTicket.value=2),2===+i&&(t.E.$vipSelectBoxValue.html(t.prerogativeTxt),t.E.$vipTicketCount.html(t.options.ticketCount),+t.options.ticketCount>0?(t.E.$btnDiaologDowndoc.show(),t.E.$btnGotoBuyvip.hide(),t.E.$bottomBtn.html('<a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a>')):(t.E.$btnDiaologDowndoc.hide(),t.E.$btnGotoBuyvip.show(),t.E.$bottomBtn.html('<a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a>')),document.downloadForm.useTicket.value=1)}},"vipDocDialog-enough":{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\u4e0b\u8f7d\u5238\uff1a','       <b class="ml-5">'+i.options.needUticket+"</b></p>",'       <p class="ticket-detail-msg msg2">\u60a8\u6301\u6709\u7684\u4e0b\u8f7d\u5238\uff1a'+i.options.UticketCount+"</p>",'       <div class="blank20"></div>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc log-xsend"','           data-logxsend="[1, 102063]">','           <b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u4e0b\u8f7d</b></a>','       <div class="wpUpload">','           <label for="wpUpload">','               <input type="checkbox" name="wpUpload" value="1" checked="checked">',"                   <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>","           </label>","       </div>","   </div>",function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0
}(),'   <div class="dialog-bottom">','       <p class="bottom-btn"><a href="javascript:;" class="btn-uTicket">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d</a></p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.addEventListener()},addEventListener:function(){var i=this;this.$el.on("click",".btn-diaolog-downdoc",function(){if(i.showImgVcode){if(i.vcodePass)return c.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;c.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=0,i.executeDownload()}else if(i.showPassVcode){new g({vcodecallback:function(t){t===w.SUCCESS&&(document.downloadForm.useTicket.value=0,i.executeDownload())}})}else document.downloadForm.useTicket.value=0,i.executeDownload()}),this.$el.on("click",".btn-uTicket",function(){i.close(),i._changePrivilegeTicket(i.options)})}},"vipDocDialog-enough-afterexchage":{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\u4e0b\u8f7d\u5238\uff1a','       <b class="ml-5">'+i.options.needUticket+"</b></p>",'       <p class="ticket-detail-msg msg2">\u60a8\u6301\u6709\uff1a'+i.options.UticketCount+"\u4e0b\u8f7d\u5238,",'       <span class="ps">\u53ef\u7528'+i.options.NTicket*i.options.exchangeRate+"\u79ef\u5206\u5151\u6362",i.options.NTicket+"\u4e0b\u8f7d\u5238</span></p>",'       <div class="blank20"></div>','       <div class="ticket-btn-container ticket-btn-container-vip">','           <a href="javascript:;" class="ui-bz-btn-senior">','               <b class="ui-bz-btn-p-16 ui-bz-btc btn-ticket-exchange">\u5151\u6362\u540e\u4e0b\u8f7d</b>',"           </a>","       </div>","   </div>",'   <div class="ticket-no-wealth-container hide">','       <div class="clear"></div>','       <div class="ticket-raido-container hidden">','           <div class="ticket-raido-bg">',"           </div>",'           <a class="btn-green btn-l ticket-exchange-download-btn log-xsend ','           ticket-exchange-download-btn-disable" href="javascript:;"','               data-logxsend="[1, 102062]">\u5151\u6362\u5e76\u4e0b\u8f7d\u6587\u6863</a>','           <div class="wpUpload">','               <label for="wpUpload">','                   <input type="checkbox" name="wpUpload" value="1" checked="checked">',"                       <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>","               </label>","           </div>","       </div>","   </div>",function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-btn"><a href="javascript:;" class="btn-uTicket">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d</a></p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){this.options.NTicket=this.options.needUticket-this.options.UticketCount,console.log(this.options),this.$el.html(this.tpl()),this.addEventListener(),this.$btn=this.$el.find(".ticket-exchange-download-btn"),this.$el.find(".ticket-no-wealth-container").removeClass("hide")},isDisableDownloadBtn:function(i){var t=this,e=this.options;return i=+i,i&&!(i>e.canUticket||0===i||i>500||i+e.UticketCount<e.needUticket)?(t.$btn.removeClass("ticket-exchange-download-btn-disable"),!0):(t.$btn.addClass("ticket-exchange-download-btn-disable"),!1)},getDefaultTicket:function(){var i=this.options;return i.canUticket>=50&&i.NTicket<=50?50:i.canUticket>=30&&i.NTicket<=30?30:i.canUticket>=10&&i.NTicket<=10?10:i.canUticket>=5&&i.NTicket<=5?5:(i.NTicket>i.canUticket&&$btn.addClass("ticket-exchange-download-btn-disable"),i.canUticket)},addEventListener:function(){var i=this;this.$el.on("click",".btn-ticket-exchange",function(){i.$el.find(".ticket-btn-container").addClass("hidden"),i.$el.find(".ticket-raido-container").removeClass("hidden");var t=i.getDefaultTicket(),e=new l({el:".ticket-raido-bg",allWealth:i.options.wealth,defaultTicket:t});i.isDisableDownloadBtn(t),o('input[name="target_uticket_num"]').val(t),e.on("ex:afterSelectTicket",function(t){i.isDisableDownloadBtn(t.ticket),o('input[name="target_uticket_num"]').val(t.ticket)}),c.xsend(1,100194,{isVip:i.options.isvip})}),this.$el.find(".ticket-exchange-download-btn").on("click",function(){var t=o(this);if(i.showImgVcode){if(i.vcodePass)return c.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;t.hasClass("ticket-exchange-download-btn-disable")||(c.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=0,i.executeDownload())}else if(i.showPassVcode){new g({vcodecallback:function(e){e===w.SUCCESS&&(t.hasClass("ticket-exchange-download-btn-disable")||(document.downloadForm.useTicket.value=0,i.executeDownload()))}})}else t.hasClass("ticket-exchange-download-btn-disable")||(document.downloadForm.useTicket.value=0,i.executeDownload())}),this.$el.on("click",".btn-uTicket",function(){i.close(),i._changePrivilegeTicket(i.options)})}},"vipDocDialog-noenough-afterexchage":{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\u4e0b\u8f7d\u5238\uff1a','           <b class="ml-5">'+i.options.needUticket+"</b></p>",'       <p class="ticket-detail-msg msg2">\u60a8\u6301\u6709\uff1a'+i.options.UticketCount+"\u4e0b\u8f7d\u5238\uff0c",'           <span class="ps">\u79ef\u5206\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5151\u6362\u4e0b\u8f7d\u5238</span></p>','       <div class="blank20"></div>','       <a href="/cashier/browse/vippackagecashier?dqStatCode=31_23_38_39&from_doc='+a.DocInfo.docId+'" class="ui-bz-btn-senior">','           <b class="ui-bz-btn-p-16 ui-bz-btc">\u8865\u5145VIP\u7279\u6743</b></a>',"   </div>",'   <div class="dialog-bottom">','       <p class="bottom-btn"><a href="javascript:;" class="btn-uTicket">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d</a></p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){var i=this;this.$el.html(this.tpl()),this.$el.on("click",".btn-uTicket",function(){i.close(),i._changePrivilegeTicket(i.options)})}},nonVipTicketsEnough:{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\u4e0b\u8f7d\u5238\uff1a','           <b class="ml-5">'+i.options.needUticket+"</b></p>",'       <p class="ticket-detail-msg msg2">','           \u60a8\u6301\u6709\u7684\u4e0b\u8f7d\u5238\uff1a<span class="col-red">'+i.options.UticketCount+"</span>","       </p>",'       <div class="blank20"></div>','       <div class="wealth-5-container">','           <a href="javascript:;" class="wealth-5-btn-use-down-load-ticket btn-gray btn-m log-xsend"','               data-logxsend="[1, 102063]">',"           \u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d","           </a>",function(){var i="";return i+='<a href="javascript:;" class="wealth-5-btn-use-free btn-green btn-m" >',i+='<i class="btn-ico"></i><span>\u514d\u4e0b\u8f7d\u5238\u4e0b\u8f7d</span>',i+="</a>"}(),'       <div class="wpUpload">','           <label for="wpUpload">','               <input type="checkbox" name="wpUpload" value="1" checked="checked">',"                   <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>","           </label>","       </div>","       </div>","   </div>",function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-btn">','           <i class="iconfont" style="color:#2FAD85">&#xe601;</i>','           <a href="/cashier/browse/dispatch?dqStatCode=download_pop_tips" target="_blank">',"           \u52a0\u5165VIP\uff0c\u4e0b\u8f7d\u7279\u6743\u968f\u5fc3\u7528\uff01","       </p>",i.publicTpl.vipFreeDocLimitedBottomTpl,'       <p class="price10-bottom-btn hide">\u7531\u4e8e\u6587\u6863\u4ef7\u683c\u8f83\u9ad8\uff0c\u5efa\u8bae\u60a8\u4f7f\u7528<span>\u4e0b\u8f7d\u7279\u6743</span>\u4e0b\u8f7d</p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>','       <p class="download-yunying-img-content"></p>',"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.options.isVipDocLimited&&this.vipFreeDocLimitedCountDown(),this.addEventListener()},addEventListener:function(){var i=this,t="/cashier/browse/dispatch?dqStatCode=";this.$el.on("click",".btn-diaolog-downdoc",function(){if(i.showImgVcode){if(i.vcodePass)return c.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;c.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=0,i.executeDownload()}else if(i.showPassVcode){new g({vcodecallback:function(t){t===w.SUCCESS&&(document.downloadForm.useTicket.value=0,i.executeDownload())}})}else document.downloadForm.useTicket.value=0,i.executeDownload()}),this.$el.on("click",".wealth-5-btn-use-down-load-ticket",function(){if(i.showImgVcode){if(i.vcodePass)return c.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;c.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=0,i.executeDownload()}else if(i.showPassVcode){new g({vcodecallback:function(t){t===w.SUCCESS&&(document.downloadForm.useTicket.value=0,i.executeDownload())}})}else document.downloadForm.useTicket.value=0,i.executeDownload()}),this.$el.on("click",".wealth-5-btn-use-free",function(){i.options.needUticket<3&&i.options.wealth>=10&&(c.xsend(1,100565),t+="wkview_downdoc_needTicketLess3WealthMore10_20150915",t+="&from_doc="+a.DocInfo.docId,window.open(t)),i.options.needUticket>=3&&(c.xsend(1,100566),t+="wkview_downdoc_needTicketMore3_20150915",t+="&from_doc="+a.DocInfo.docId,window.open(t)),i.options.needUticket<3&&i.options.wealth<10&&(c.xsend(1,100567),t+="wkview_downdoc_needTicketLess3WealthLess10_20150915",t+="&from_doc="+a.DocInfo.docId,window.open(t))}),this.$el.on("click",".price10-bottom-btn",function(){window.open(t+"31_8_13_18&from_doc="+a.DocInfo.docId)})}},nonVipTicketsNonEnoughWeathEnough:{tpl:function(){var i=this,t="",e="/cashier/browse/dispatch?dqStatCode=download_pop_tips";t=i.options.isVipDoc?'<b class="ui-bz-btn-p-16 ui-bz-btc btn-ticket-exchange new btn-m">\u5151\u6362\u540e\u4e0b\u8f7d</b>':'<b class="ui-bz-btn-p-16 ui-bz-btc btn-ticket-exchange new btn-gray btn-m">\u5151\u6362\u4e0b\u8f7d\u5238\u4e0b\u8f7d</b>';var o=i.options.NTicket*i.options.exchangeRate;o=o?o:"";var n=i.options.needUticket;return n=n?n:"",[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac" style="padding-bottom: 0;">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1 coupon-need">\u9700\u8981\uff1a','<b class="ticket-need-num">'+i.options.needUticket+"</b>\u4e0b\u8f7d\u5238</p>",'       <p class="ticket-detail-msg msg2">',"\u60a8\u6301\u6709\uff1a"+i.options.UticketCount+"\u4e0b\u8f7d\u5238","\uff08\u53ef\u7528"+o+"\u79ef\u5206\u5151\u6362"+n+"\u4e0b\u8f7d\u5238\uff09","       </p>","   </div>",'   <div class="ticket-no-wealth-container hide">','       <div class="ticket-btn-container ticket-btn-container-vip">','           <a href="javascript:;" class="ui-bz-btn-senior btn-exchange-down">',t,"           </a>",function(){var t="";return i.options.isVipDoc?(t='<a href="javascript:;" class="ui-bz-btn-senior ticket-user-free-download btn-svip">',t+="VIP\u514d\u8d39\u4e0b\u8f7d",t+="</a>"):(t='<a href="javascript:;" class="btn-green btn-m ticket-user-free-download ticket-user-free-download-btn-normal">',t+='<i class="btn-ico"></i><span>\u514d\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a>'),t}(),"       </div>",'       <div class="clear"></div>','       <div class="ticket-raido-container hidden">','           <div class="ticket-raido-bg">',"           </div>",'           <a class="btn-green btn-l ticket-exchange-download-btn log-xsend ','           ticket-exchange-download-btn-disable" href="javascript:;" ','               data-logxsend="[1, 102062]">\u5151\u6362\u5e76\u4e0b\u8f7d\u6587\u6863</a>','       <div class="wpUpload">','           <label for="wpUpload">','               <input type="checkbox" name="wpUpload" value="1" checked="checked">',"                   <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>","           </label>","       </div>","       </div>","   </div>",function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-btn">','          <i class="iconfont" style="color:#2FAD85">&#xe601;</i>',function(){var t="";return 0===+i.options.finishAppTask?(t='<a href="'+e+'" ',t+='target="_blank" class="log-xsend"',t+=" data-logxsend=\"[1, 101031, {'index':'2'}]\">",t+="\u52a0\u5165VIP\uff0c\u4e0b\u8f7d\u7279\u6743\u968f\u5fc3\u7528\uff01",t+="</a>",c.xsend(1,101031,{index:1})):(t='<a href="'+e+'" ',t+='target="_blank">',t+="\u52a0\u5165VIP\uff0c\u4e0b\u8f7d\u7279\u6743\u968f\u5fc3\u7528\uff01",t+="</a>"),t}(),"       </p>",i.publicTpl.vipFreeDocLimitedBottomTpl,'       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>','       <p class="download-yunying-img-content"></p>',"   </div>","</div>","</div>"].join("")},init:function(){s.set("isDownloadTongJi",1);var i=this.options.needUticket-this.options.UticketCount;this.NTicket=i,this.options.NTicket=i,this.$el.html(this.tpl()),this.addEventListener(),this.$btn=this.$el.find(".ticket-exchange-download-btn"),this.$el.find(".ticket-no-wealth-container").removeClass("hide")},isDisableDownloadBtn:function(i){var t=this,e=this.options;return i=+i,i&&!(i>e.canUticket||0===i||i>500||i+e.UticketCount<e.needUticket)?(t.$btn.removeClass("ticket-exchange-download-btn-disable"),!0):(t.$btn.addClass("ticket-exchange-download-btn-disable"),!1)},getDefaultTicket:function(){var i=this.options;return i.canUticket>=50&&i.NTicket<=50?50:i.canUticket>=30&&i.NTicket<=30?30:i.canUticket>=10&&i.NTicket<=10?10:i.canUticket>=5&&i.NTicket<=5?5:(i.NTicket>i.canUticket&&$btn.addClass("ticket-exchange-download-btn-disable"),i.canUticket)},addEventListener:function(){var i=this;this.$el.on("click",".btn-ticket-exchange",function(){i.$el.find(".ticket-btn-container").addClass("hidden"),i.$el.find(".ticket-raido-container").removeClass("hidden");var t=i.getDefaultTicket(),e=new l({el:".ticket-raido-bg",allWealth:i.options.wealth,defaultTicket:t});i.isDisableDownloadBtn(t),o('input[name="target_uticket_num"]').val(t),e.on("ex:afterSelectTicket",function(t){i.isDisableDownloadBtn(t.ticket),o('input[name="target_uticket_num"]').val(t.ticket)}),c.xsend(1,100194,{isVip:i.options.isvip})}),this.$el.find(".ticket-exchange-download-btn").on("click",function(){var t=o(this);if(i.showImgVcode){if(i.vcodePass)return c.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;t.hasClass("ticket-exchange-download-btn-disable")||(c.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=0,i.executeDownload())}else if(i.showPassVcode){new g({vcodecallback:function(e){e===w.SUCCESS&&(t.hasClass("ticket-exchange-download-btn-disable")||(document.downloadForm.useTicket.value=0,i.executeDownload()))}})}else t.hasClass("ticket-exchange-download-btn-disable")||(document.downloadForm.useTicket.value=0,i.executeDownload())}),this.$el.find(".ticket-user-free-download").click(function(){var t="31_8_13_16";i.options.isVipDoc&&(t="new_vip_freedoc_style");var e=i.getTestCashierCode();t=e?e:t,window.open("/cashier/browse/dispatch?dqStatCode="+t+"&from_doc="+a.DocInfo.docId)})}},nonVipTicketsNonEnoughWeathNonEnoughYD:{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth nonVipTNEWNE">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\u4e0b\u8f7d\u5238\uff1a<b class="ml-5">',i.options.needUticket,"</b></p>",'       <p class="ticket-detail-msg msg2">','           \u60a8\u6301\u6709\uff1a<span class="col-red">'+i.options.UticketCount+"</span>\u4e0b\u8f7d\u5238\uff0c",'           <span class="ps">\u79ef\u5206\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5151\u6362\u4e0b\u8f7d\u5238</span></p>',"       </p>",'       <div class="blank20"></div>','       <div class="diaolog-downdoc">',function(){var t="";return i.options.isVipDoc?(t='<a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc btn-svip-l">',t+="VIP\u514d\u8d39\u4e0b\u8f7d",t+="</a>"):(t='<a href="javascript:;"',t+='class="ui-bz-btn-senior btn-diaolog-downdoc">',t+='<b class="ui-bz-btn-p-16 ui-bz-btc">VIP\u514d\u4e0b\u8f7d\u5238\u4e0b\u8f7d</b></a>'),t}(),"       </div>",'       <div class="user-dialog-download-btn-center hide">',function(){var t="";return t=i.options.isVipDoc?'<a class="btn-diaolog-downdoc btn-green btn-l btn-svip-l" href="javascript:void(0);">VIP\u514d\u8d39\u4e0b\u8f7d</a>':'<a class="btn-diaolog-downdoc btn-green btn-l" href="javascript:void(0);">VIP\u514d\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a>'}(),'           <a class="btn-orange btn-l ml24"',' href="/user/mydocs?check_new_user_gift=1" style="display: none;" >','               <b class="gift-icon"></b>\u9886\u53d6\u65b0\u624b\u793c\u5305',"           </a>","       </div>","   </div>",function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0}(),i.publicTpl.finishYdAppTaskTpl,"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),s.set("isDownloadTongJi",0),this.options.check_new_user_gift&&(s.set("isDownloadTongJi",2),this.setNewUserGift()),this.addEventListener()},addEventListener:function(){var i=this,t=s.get("WkInfo").DocInfo.docId,e=[];this.$el.on("click",".btn-diaolog-downdoc",function(){i.close();var o=s.get("isDownloadTongJi");switch(i.options.isVipDoc&&(o=3),o){case 0:o="31_8_13_15";break;case 1:o="31_8_13_16";break;case 2:o="31_8_13_17";break;case 3:o="new_vip_freedoc_style"}var n=i.getTestCashierCode();o=n?n:o,e.push("/cashier/browse/dispatch?doc_id="),e.push(t),e.push("&dqStatCode="),e.push(o),window.open(e.join(""))}),this.$el.on("click",".getyddownloadticket",function(){c.xsend(1,101368),o.ajax({type:"get",url:"/customer/interface/getydcheckinstatus",success:function(t){if(t&&t.data&&t.data.is_checkin){var e,o=window.location.href,s=n.url.getQueryValue(o,"isbtn");e=s?o.replace(new RegExp("([?&]isbtn=)2"),"$12"):o+(-1==o.indexOf("?")?"?":"&")+"isbtn=2",window.location.href=e}else i.setToastShow(3e3)}})})},setNewUserGift:function(){this.$el.find(".diaolog-downdoc").addClass("hide"),this.$el.find(".user-dialog-download-btn-center").removeClass("hide")},setToastShow:function(i){var t=this;t.$el.find(".toast-it-downdoc").show(),setTimeout(function(){t.$el.find(".toast-it-downdoc").hide()},i)}},nonVipTicketsNonEnoughWeathNonEnoughWK:{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth nonVipTNEWNE">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\u4e0b\u8f7d\u5238\uff1a<b class="ml-5">',i.options.needUticket,"</b></p>",'       <p class="ticket-detail-msg msg2">','           \u60a8\u6301\u6709\uff1a<span class="col-red">'+i.options.UticketCount+"</span>\u4e0b\u8f7d\u5238\uff0c",'           <span class="ps">\u79ef\u5206\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5151\u6362\u4e0b\u8f7d\u5238</span></p>',"       </p>",'       <div class="blank20"></div>','       <div class="diaolog-downdoc">',function(){var t="";return i.options.isVipDoc?(t='<a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc btn-svip-l">',t+="VIP\u514d\u8d39\u4e0b\u8f7d",t+="</a>"):(t='<a href="javascript:;"',t+='class="ui-bz-btn-senior btn-diaolog-downdoc">',t+='<b class="ui-bz-btn-p-16 ui-bz-btc">VIP\u514d\u4e0b\u8f7d\u5238\u4e0b\u8f7d</b></a>'),t}(),"       </div>",'       <div class="user-dialog-download-btn-center hide">',function(){var t="";return t=i.options.isVipDoc?'<a class="btn-diaolog-downdoc btn-green btn-l btn-svip-l" href="javascript:void(0);">VIP\u514d\u8d39\u4e0b\u8f7d</a>':'<a class="btn-diaolog-downdoc btn-green btn-l" href="javascript:void(0);">VIP\u514d\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a>'}(),'           <a class="btn-orange btn-l ml24"',' href="/user/mydocs?check_new_user_gift=1" style="display: none;" >','               <b class="gift-icon"></b>\u9886\u53d6\u65b0\u624b\u793c\u5305',"           </a>","       </div>","   </div>",function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0}(),i.publicTpl.finishWkAppTaskTpl,"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),s.set("isDownloadTongJi",0),this.options.check_new_user_gift&&(s.set("isDownloadTongJi",2),this.setNewUserGift()),this.addEventListener()},addEventListener:function(){var i=this,t=s.get("WkInfo").DocInfo.docId,e=[];this.$el.on("click",".btn-diaolog-downdoc",function(){i.close();var o=s.get("isDownloadTongJi");switch(i.options.isVipDoc&&(o=3),o){case 0:o="31_8_13_15";break;case 1:o="31_8_13_16";break;case 2:o="31_8_13_17";break;case 3:o="new_vip_freedoc_style"}var n=i.getTestCashierCode();o=n?n:o,e.push("/cashier/browse/dispatch?doc_id="),e.push(t),e.push("&dqStatCode="),e.push(o),window.open(e.join(""))}),this.$el.on("click",".getwkdownloadticket",function(){c.xsend(1,101489);var i,t=window.location.href,e=n.url.getQueryValue(t,"isbtn");i=e?t.replace(new RegExp("([?&]isbtn=)3"),"$13"):t+(-1==t.indexOf("?")?"?":"&")+"isbtn=3",window.location.href=i})},setNewUserGift:function(){this.$el.find(".diaolog-downdoc").addClass("hide"),this.$el.find(".user-dialog-download-btn-center").removeClass("hide")},setToastShow:function(i){var t=this;t.$el.find(".toast-it-downdoc").show(),setTimeout(function(){t.$el.find(".toast-it-downdoc").hide()},i)}},nonVipTicketsNonEnoughWeathNonEnough:{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth nonVipTNEWNE">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\u4e0b\u8f7d\u5238\uff1a<b class="ml-5">',i.options.needUticket,"</b></p>",'       <p class="ticket-detail-msg msg2">','           \u60a8\u6301\u6709\uff1a<span class="col-red">'+i.options.UticketCount+"</span>\u4e0b\u8f7d\u5238\uff0c",'           <span class="ps">\u79ef\u5206\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5151\u6362\u4e0b\u8f7d\u5238</span></p>',"       </p>",'       <div class="blank20"></div>','       <div class="diaolog-downdoc">',function(){var t="";return i.options.isVipDoc?(t='<a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc btn-svip-l">',t+="VIP\u514d\u8d39\u4e0b\u8f7d",t+="</a>"):t='<a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc"><b class="ui-bz-btn-p-16 ui-bz-btc">VIP\u514d\u4e0b\u8f7d\u5238\u4e0b\u8f7d</b></a>',t}(),"       </div>",'       <div class="user-dialog-download-btn-center hide">',function(){var t="";return t=i.options.isVipDoc?'<a class="btn-diaolog-downdoc btn-green btn-l btn-svip-l" href="javascript:void(0);">VIP\u514d\u8d39\u4e0b\u8f7d</a>':'<a class="btn-diaolog-downdoc btn-green btn-l" href="javascript:void(0);">VIP\u514d\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a>'}(),"       </div>","   </div>",function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-btn">','           <i class="iconfont" style="color:#2FAD85">&#xe601;</i>',function(){var t="";return 0===+i.options.finishAppTask?(t='<a href="/cashier/browse/dispatch?dqStatCode=download_pop_tips" ',t+='target="_blank" class="log-xsend" ',t+="data-logxsend=\"[1, 101031, {'index':'2'}]\">",t+="\u52a0\u5165VIP\uff0c\u4e0b\u8f7d\u7279\u6743\u968f\u5fc3\u7528\uff01",t+="</a>",c.xsend(1,101031,{index:1})):(t='<a href="/cashier/browse/dispatch?dqStatCode=download_pop_tips" ',t+='target="_blank">',t+="\u52a0\u5165VIP\uff0c\u4e0b\u8f7d\u7279\u6743\u968f\u5fc3\u7528\uff01",t+="</a>"),t}(),"       </p>",i.publicTpl.vipFreeDocLimitedBottomTpl,'       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>','       <p class="download-yunying-img-content"></p>',"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),s.set("isDownloadTongJi",0),this.options.check_new_user_gift&&(s.set("isDownloadTongJi",2),this.setNewUserGift()),this.addEventListener()},addEventListener:function(){var i=this,t=s.get("WkInfo").DocInfo.docId,e=[];this.$el.on("click",".btn-diaolog-downdoc",function(){i.close();var o=s.get("isDownloadTongJi");switch(i.options.isVipDoc&&(o=3),o){case 0:o="31_8_13_15";break;case 1:o="31_8_13_16";break;case 2:o="31_8_13_17";break;case 3:o="new_vip_freedoc_style"}var n=i.getTestCashierCode();o=n?n:o,e.push("/cashier/browse/dispatch?doc_id="),e.push(t),e.push("&dqStatCode="),e.push(o),window.open(e.join(""))})},setNewUserGift:function(){this.$el.find(".diaolog-downdoc").addClass("hide"),this.$el.find(".user-dialog-download-btn-center").removeClass("hide")}},downloadMuchTip:{tpl:function(){return['<div class="download-more">','   <span class="close-icon close-btn"></span>','   <span class="close-icon-hover"></span>','    <div class="msg">',"       <h2>\u60a8\u4eca\u5929\u7684\u4e0b\u8f7d\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\uff01</h2>",'       <p class="mb15">\u7a0d\u4f5c\u4f11\u606f\uff0c\u660e\u5929\u518d\u6765\u5427~</p>','       <a href="javascript:void(0);" class="ui-bz-btn-senior close-btn">','           <b class="ui-bz-btn-p-40 ui-bz-btc btn">\u77e5\u9053\u4e86</b>',"        </a>","    </div>",'   <div class="edu-icon"></div>',"</div>"].join("")},init:function(){this.$el.html(this.tpl())}},guidetips:{tpl:function(){return['<div class="guideOfWealthDoc">','   <a href="javascript:;" class="btn-close"></a>','   <a href="/cashier/browse/dispatch?dqStatCode=wkview_guidedocdown_joinin_20150917&from_doc='+a.DocInfo.docId,'" class="ui-bz-btn-normal btn-vip log-xsend" data-logxsend="[1, 100571]">','       <b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u4f53\u9a8cVIP\u901a\u9053</b>',"   </a>",'   <a href="javascirpt:;" class="ui-bz-btn-senior btn-continue">','       <b class="ui-bz-btn-p-16 ui-bz-btc">\u7ee7\u7eed\u4e0b\u8f7d ></b>',"   </a>","</div>"].join("")},init:function(){var i=this,t=this.getDate().today;n.cookie.get("wk_guidetips")!==t?(n.cookie.set("wk_guidetips",t,{expires:31536e6,path:"/"}),this.$el.html(this.tpl()),this.addEventListener(),c.xsend(1,100569)):this.close(function(){i.options.callback()})},addEventListener:function(){var i=this;this.$el.on("click",".btn-continue",function(){i.close(function(){c.xsend(1,100569),i.options.callback()})}),this.$el.on("click",".btn-close",function(){i.close(function(){c.xsend(1,100568),i.options.callback()})})}},eduaiTip:{tpl:function(){var i=this,t=decodeURI(i.options.org_name),e=i.options.eduai_url;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container eduaidown">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">','       <p class="msg">','           <span class="msg1">\u201c'+t+"\u201d</span>",'           <span class="msg2">\u5e08\u751f\u53ef\u514d\u5238\u4e0b\u8f7d\u8be5\u8d44\u6e90</span>',"        </p>",'       <p class="intro">',"\u767e\u5ea6\u6559\u80b2\u4e91\u5e73\u53f0\u662f\u8d35\u6821\u4e0e\u767e\u5ea6\u6559\u80b2\u8054\u5408\u6253\u9020\u7684\u6559\u80b2\u8d44\u6599\u5e93\uff0c\u5305\u542b\u767e\u5ea6\u6587\u5e931.9\u4ebf\u8d44\u6e90\uff0c\u66f4\u6709\u89c6\u9891/\u5b66\u672f\u8bba\u6587\u7b49\u4f9b\u60a8\u514d\u8d39\u4f7f\u7528\u3002","       </p>",'       <a target="_blank" href="'+e+'" class="toeduaidown ui-bz-btn-senior btn-diaolog-downdoc">','           <b class="ui-bz-btn-p-16 ui-bz-btc">\u53bb\u767e\u5ea6\u6559\u80b2\u4e91\u5e73\u53f0\u514d\u5238\u4e0b\u8f7d</b>',"       </a>",'       <p class="eduai-stay-wenku"><a class="btn-close" href="javascript:;">\u4ecd\u5728\u767e\u5ea6\u6587\u5e93\u4e0b\u8f7d</a></p>',"   </div>"].join("")},init:function(i){this.$el.html(this.tpl(i)),this.addEventListener(),c.xsend(1,101202,{index:99})},addEventListener:function(){var i=this;this.$el.on("click",".btn-close",function(){i.close(function(){i.options.callback&&i.options.callback()})}),this.$el.on("click",".eduai-stay-wenku a",function(){c.xsend(1,101202,{index:2})}),this.$el.on("click",".toeduaidown",function(){c.xsend(1,101202,{index:1})})}},proVipTicketDocDialog:{tpl:function(){var i=this;return[i.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',i.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',i.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1">\u60a8\u7684<strong>VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743</strong>\u5269\u4f59\uff1a','           <b class="ml-5">'+i.options.ticketCount+"\u6b21</b></p>",'       <p class="ticket-detail-msg msg2"></p>','       <div class="blank20"></div>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc">','           <b class="ui-bz-btn-p-16 ui-bz-btc">\u4f7f\u7528VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d</b></a>','       <div class="wpUpload">','           <label for="wpUpload">','               <input type="checkbox" name="wpUpload" value="1" checked="checked">',"                   <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>","           </label>","       </div>","   </div>",function(){return i.showImgVcode?i.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.addEventListener(),c.xsend(1,100113)},changeProDownloadTicket:function(){var i=this;if(i.dialogObj)return i.options.needUticket<=i.options.UticketCount?(console.log("\u4e0b\u8f7d\u5238\u591f\u7528"),i._dialog["vipDocDialog-enough"]||(i._dialog["vipDocDialog-enough"]=i.dialogObj.get("vipDocDialog-enough",i.options)),void i._dialog["vipDocDialog-enough"].show()):void 0},addEventListener:function(){var i=this;this.$el.on("click",".btn-diaolog-downdoc",function(){if(i.showImgVcode){if(i.vcodePass)return c.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;c.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=1,i.executeDownload()}else if(i.showPassVcode){new g({vcodecallback:function(t){t===w.SUCCESS&&(document.downloadForm.useTicket.value=1,i.executeDownload())}})}else document.downloadForm.useTicket.value=1,i.executeDownload()}),this.$el.on("click",".btn-uDownTicket",function(){i.close(),i.changeProDownloadTicket()})}}};e.exports=k});
;define("wkview:widget/ui/view/down_doc/new_dialog_down_doc/new_dialog_down_doc.js",function(i,e,o){var t=i("wkcommon:widget/ui/lib/jquery/jquery.js"),n=i("wkcommon:widget/lib/tangram/base/base.js"),s=i("wkcommon:widget/lib/doT/doT.min.js"),c=i("wkcommon:widget/lib/fis/data/data.js"),d=i("wkview:widget/ui/view/vip_cashier/vip_cashier.js"),a=c.get("WkInfo"),l=i("wkcommon:widget/ui/js_core/log/log.js"),p=i("wkview:widget/format_convert/dialog_down_doc/format_convert.js"),r=i("wkview:widget/model/vipData.js"),u=i("wkview:widget/ui/view/vcode/vcode.js"),h=i("wkview:widget/ui/view/vcode/status.js"),v=a&&a.DocInfo&&a.DocInfo.docType,w=function(){var i=function(i,e){this.init.call(this,i,e)};return i.prototype={constructor:i,initFormatConvertWrap:function(i,e){var o=c.get("WkInfo"),n=o.DocInfo||{},s=n.vipHuixueConvert||{};0!==+s.is_open&&r.run(function(){t(window).on("switch-format-doc-type",function(i,e){var o=t(".dialog-top .final-doc-icon");if(o&&o.length){for(var n=o[0].classList,s=[],c=0;c<n.length;c++){var d=n[c];/^doc-icon-/.test(d)&&s.push(d)}o.removeClass(s.join(" ")).addClass("doc-icon-"+e.docTypeText)}}),p.init(i,{transType:e,vipInfo:window.vipInfo})})},initPublicTpl:function(){var i=a.UserInfo||{},e=window.vipInfo||window.wenkuDatavipInfo||{};this.publicTpl={publicHdTpl:s.template('<div class="header">\n<div class="header-content clearfix">\n<img class="avatar" src="{{=it.headicon}}" />\n<div class="uname">{{=it.uname}}</div>\n<div class="vip-info">\n{{?it.isVip}}                {{?it.isJiaoyuVip}}<i class="icon"></i>\n{{?}}                {{?it.isClassicVip || it.isWenkuVip}}<i class="icon classic"></i>\n{{?}}            {{??}}<i class="icon not-vip"></i>\n{{?}}</div>\n</div>\n<div class="btn-close"></div>\n</div>')({uname:i.uname||"\u6587\u5e93\u65b0\u4eba",headicon:i.headicon||"",isVip:e.isVip,isJiaoyuVip:e.isJiaoyuVip,isClassicVip:e.isClassicVip,isWenkuEduVip:e.isWenkuEduVip,isWenkuVip:e.isWenkuVip}),docInfo:s.template('<div class="main-2019">\n<div class="doc-content">\n<div class="poster {{=it.docType}}"></div>\n<div class="doc-main">\n<div class="title">{{=it.title}}</div>\n<div class="detail">\n<span class="doc-size">{{=it.size}}</span>\n{{? it.type === \'free\'}}<span>\u672c\u6587\u9700\u8981<em>0\u4e0b\u8f7d\u5238</em></span>\n{{?? it.type === \'vipfree\' }}<span>\u672c\u6587\u9700\u8981<em>{{=it.pay}}\u4e0b\u8f7d\u5238</em>VIP\u514d\u8d39\u4e0b\u8f7d</span>\n{{?? it.type === \'ticket\'}}<span>\u672c\u6587\u9700\u8981<em>{{=it.pay}}\u4e0b\u8f7d\u5238</em>\u5f53\u524d\u62e5\u6709<em>{{=it.total}}</em></span>\n{{?? it.type === \'vip\'}}<span>\u672c\u6587\u9700\u8981<em class="vip">{{=it.pay}}\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743</em>\u5f53\u524d\u62e5\u6709<em class="vip">{{=it.total}}</em></span>\n{{?? it.type === \'professional\'}}<span>\u672c\u6587\u9700\u8981<em class="vip">{{=it.pay}}VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743</em>\u5f53\u524d\u62e5\u6709<em class="vip">{{=it.total}}</em></span>\n{{?}}</div>\n</div>\n</div>\n</div>'),dumpWangpan:s.template('<div class="wpUpload">\n<label for="wpUpload">\n<input type="checkbox" id="wpUpload" name="wpUpload" value="1" checked="checked">\n<span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>\n</label>\n</div>'),vcodeTpl:s.template('{{? it.showVcode }}<div class="vcode-box">\n<input type="text" class="vcode-ipt" />\n<img src="" />\n<span class="vcode-change">\u6362\u4e00\u6362</span>\n<b class="vcode-right"></b>\n<p class="error-tip"><b class="vcode-error"></b><span>\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801\uff01</span></p>\n</div>\n{{?}}'),publicFooter:s.template('<div class="footer-2019 {{?it.tip }}has-tip{{?}}">\n{{?it.tip}}<a class="vip-link">{{=it.tip}}</a>\n{{?}}<div class="tips"><i class="ic-help"></i>\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</div>\n</div>')}},dialogObj:null,$iframe:{content:null},setDialog:function(i){this.dialogObj=i},init:function(i,e){this.options=i,this.name=e,this.docTitle=n.string.getByteLength(a.DocInfo.title)<26?a.DocInfo.title:n.string.subByte(a.DocInfo.title,26,"...");var o=a.DocInfo.size/1024;this.docSize=o>=1024?(o/1024).toFixed(1)+"M":~~o+"KB",this.prerogativeTxt="\u901a\u7528\u4e0b\u8f7d\u7279\u6743",a.UserInfo&&1===+a.UserInfo.smallFlowProfessionalDoc&&(this.prerogativeTxt="\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743");var t=n.url.getQueryValue(location.href,"____needpass___");if(t)this.showPassVcode=!0;else{{this.calTestId(100)}this.showPassVcode=this.options.isShowVcode&&(!n.browser.ie||n.browser.ie&&n.browser.ie>8)&&window.PassMachine&&window.PassMachine.mkd}this.showImgVcode=!this.showPassVcode&&this.options.isShowVcode,this.options.isShowVcode&&l.xsend(1,102372,{type:this.showImgVcode?"img":"pass"}),this.create(),this.addEventListener(),this.initVcode(),this.initPublicTpl(),document.downloadForm.storage.value=1},calTestId:function(i){var e=-1,o=-1;try{var t=n.cookie.get("BAIDUID");e=parseInt(t.substring(0,6),16),o=e%(i||100)}catch(s){console.log("ABtestTool ERROR",s)}return o},create:function(){var i=t(".WkDialogDownDoc").length+1,e=t('<div id="WkDialogDownDoc_'+i+'" class="WkDialogDownDoc"></div>'),o=t('<div class="dialog-container-iframe"><iframe allowTransparency="true" src="" frameborder="0" scrolling="no"></iframe></div>');this.$el=e,e.appendTo(t("body")),null==this.$iframe.content&&(this.$iframe.content=o,e.after(o))},show:function(i){var e=this,o=t(window).height();this.$iframe.content.css({height:t("body").height()}).show(),this.$el.css("top",o/2-170).show(),"function"==typeof i&&i(e);var n=t(".dialog-top .format-convert-wrap"),s=a.transType||{};this.initFormatConvertWrap(n,s)},close:function(i){this.$el.css("display","none"),this.$iframe.content.css("display","none"),"function"==typeof i&&i(this)},addEventListener:function(){var i=this;this.$el.on("click",".btn-close",function(){i.close()}),this.$el.on("click",".vcode-change",function(){i.vcodeImg()}),this.$el.on("click",".btn-diaolog-downdoc",t.proxy(this.handleDownload,this)),this.$el.on("click",".vip-link",function(){new d({uticket:i.options.UticketCount,isNeedCheckTicket:!1});i.close()}),setTimeout(function(){t(".vcode-ipt").on("input propertychange",function(){if(t(this).val().length>5)i.vcodeError();else if(4===t(this).val().length){var e=t(this).val();t.get("/user/interface/vcodefordownload?m=check&&v_code="+i.vcodeValue+"&v_input="+e+"&t="+(new Date).getTime(),function(o){o.errno?i.vcodeError():(i.vcodeOk(),i.vcodePass=!1,window.postVcode=i.vcodeValue,window.postVinput=e)})}else i.$el.find(".vcode-box .vcode-right").css("visibility","hidden"),i.$el.find(".vcode-box .error-tip").css("height","0px")})},10)},handleDownload:function(){if(this.isFromViewRec()){var i=a.DocInfo||{},e=i.docTicket,o=function(){var e=!!c.get("VipFreeDoc");return e?0:i.docTicket}(),t=i.docId,n="";l.xsend(1,101322,{originPrice:e,salePrice:o,docId:t,goodsId:n,type:2})}},isFromViewRec:function(){var i=location.search;return/mark_pay_doc/.test(i)&&/mark_rec_page/.test(i)&&/mark_rec_position/.test(i)},initVcode:function(){this.showImgVcode&&(this.vcodePass=!0,this.vcodeImg())},executeDownload:function(){l.xsend(1,100036),this.close(),n.lang.eventCenter.dispatchEvent("download.toGetFile")},vcodeOk:function(){t(".vcode-box .vcode-right").css("visibility","visible"),t(".vcode-box .error-tip").css("height","0px")},vcodeError:function(){t(".vcode-box .error-tip").css("height","16px"),t(".vcode-box .vcode-right").css("visibility","hidden")},vcodeImg:function(){var i=this;t.get("/vcode?t="+(new Date).getTime(),function(e){t(".vcode-box img").attr("src",e.imgurl),i.vcodeValue=e.vcode_str,window.postVcode=i.vcodeValue})},getTipInfo:function(){var i=window.vipInfo||window.wenkuDatavipInfo||{},e=this.options.isVipDoc,o=this.options.needUticket,t=a&&a.DocInfo&&+a.DocInfo.professionalDoc,n=i.renewal_vip_info||{},s=n.jiaoyu_vip_info||{},c=n.vip_info||{},d=Math.max(s.left_day||0,c.left_day||0),l=i.normalDownloadTicket||0,p=i.proDownloadTicket||0,r=e?"\u5f00\u901aVIP\u514d\u8d39\u4e0b\u8f7d":"\u5f00\u901aVIP\u514d\u5238\u4e0b\u8f7d",u={freeDocDialog:"\u5f00\u901aVIP\u4eab\u66f4\u591a\u4f18\u8d28\u5185\u5bb9",nonVipTicketsEnough:r,nonVipTicketsNonEnoughWeathEnough:r};if(i&&i.isVip){var h=function(){return!(!+s.is_contract_pay&&!+c.is_contract_pay)}();if(h)return"";if(7>d&&(o>0||t)){if(l>1&&p>1)return"\u7eed\u8d39VIP\uff0c\u4e0b\u8f7d\u7279\u6743\u5ef6\u65f630\u5929";if(1>=l&&p>1)return"\u7eed\u8d39VIP\uff0c\u8d6012\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743";if(l>1&&1>=p)return"\u7eed\u8d39VIP\uff0c\u8d604VIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743";if(1>=l&&1>=p)return"\u7eed\u8d39VIP\uff0c\u8d6016\u6587\u6863\u4e0b\u8f7d\u7279\u6743"}return""}return u[this.name]||""}},i}(),f={get:function(i,e){var o=function(){this.dialog=i,this.options=e,this.init.apply(this)};return o.prototype=t.extend(new w(e,i),this[i]?this[i]:{}),new o},freeDocDialog:{tpl:function(){return['<div class="dialog-container-2019">',this.publicTpl.publicHdTpl,this.publicTpl.docInfo({type:"free",title:this.docTitle,size:this.docSize,docType:v}),'<div class="operate-area">','<div class="btn btn-diaolog-downdoc">\u7acb\u5373\u4e0b\u8f7d</div>',this.publicTpl.dumpWangpan(),this.publicTpl.vcodeTpl({showVcode:this.showImgVcode}),"</div>",this.publicTpl.publicFooter({tip:this.getTipInfo()}),"</div>"].join("")},init:function(){var i=this.tpl();this.$el.html(i),this.addEventListener()},addEventListener:function(){var i=this;this.$el.on("click",".btn-diaolog-downdoc",function(){if(i.showImgVcode){if(i.vcodePass)return l.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;l.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=0,i.executeDownload()}else if(i.showPassVcode){new u({vcodecallback:function(e){e===h.SUCCESS&&(document.downloadForm.useTicket.value=0,i.executeDownload())}})}else document.downloadForm.useTicket.value=0,i.executeDownload()})}},vipFreeDocDialog:{tpl:function(){return['<div class="dialog-container-2019">',this.publicTpl.publicHdTpl,this.publicTpl.docInfo({type:"vipfree",title:this.docTitle,size:this.docSize,pay:this.options.needUticket,docType:v}),'<div class="operate-area">','<div class="btn btn-diaolog-downdoc vip">VIP\u514d\u8d39\u4e0b\u8f7d</div>',this.publicTpl.dumpWangpan(),this.publicTpl.vcodeTpl({showVcode:this.showImgVcode}),"</div>",this.publicTpl.publicFooter({tip:this.getTipInfo()}),"</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.addEventListener(),l.xsend(1,100273)},addEventListener:function(){var i=this;this.$el.on("click",".btn-diaolog-downdoc",function(){if(i.showImgVcode){if(i.vcodePass)return l.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;l.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.req_vip_free_doc.value=1,i.executeDownload()}else if(i.showPassVcode){new u({vcodecallback:function(e){e===h.SUCCESS&&(document.downloadForm.req_vip_free_doc.value=1,i.executeDownload())}})}else document.downloadForm.req_vip_free_doc.value=1,i.executeDownload()})}},normalVipTicketDocDialog:{tpl:function(){return['<div class="dialog-container-2019">',this.publicTpl.publicHdTpl,this.publicTpl.docInfo({type:"vip",title:this.docTitle,size:this.docSize,pay:1,total:this.options.ticketCount,docType:v}),'<div class="operate-area">','<div class="btn vip btn-diaolog-downdoc">\u4f7f\u7528VIP\u7279\u6743\u4e0b\u8f7d</div>',this.publicTpl.dumpWangpan(),this.publicTpl.vcodeTpl({showVcode:this.showImgVcode}),"</div>",this.publicTpl.publicFooter({tip:this.getTipInfo()}),"</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.addEventListener(),l.xsend(1,100113)},addEventListener:function(){var i=this;this.$el.on("click",".btn-diaolog-downdoc",function(){if(i.showImgVcode){if(i.vcodePass)return l.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;l.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=1,i.executeDownload()}else if(i.showPassVcode){new u({vcodecallback:function(e){e===h.SUCCESS&&(document.downloadForm.useTicket.value=1,i.executeDownload())}})}else document.downloadForm.useTicket.value=1,i.executeDownload()})}},nonVipTicketsEnough:{tpl:function(){return['<div class="dialog-container-2019">',this.publicTpl.publicHdTpl,this.publicTpl.docInfo({type:"ticket",title:this.docTitle,size:this.docSize,pay:this.options.needUticket,total:this.options.UticketCount,docType:v}),'<div class="operate-area">','<div class="btn btn-diaolog-downdoc">\u7acb\u5373\u4e0b\u8f7d</div>',this.publicTpl.dumpWangpan(),this.publicTpl.vcodeTpl({showVcode:this.showImgVcode}),"</div>",this.publicTpl.publicFooter({tip:this.getTipInfo()}),"</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.addEventListener()},addEventListener:function(){var i=this;this.$el.on("click",".btn-diaolog-downdoc",function(){if(i.showImgVcode){if(i.vcodePass)return l.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;l.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=0,i.executeDownload()}else if(i.showPassVcode){new u({vcodecallback:function(e){e===h.SUCCESS&&(document.downloadForm.useTicket.value=0,i.executeDownload())}})}else document.downloadForm.useTicket.value=0,i.executeDownload()})}},nonVipTicketsNonEnoughWeathEnough:{tpl:function(){var i=this.options.NTicket*this.options.exchangeRate||"",e=this.options.NTicket||"",o=this.options.wealth||"";return['<div class="dialog-container-2019">',this.publicTpl.publicHdTpl,this.publicTpl.docInfo({type:"ticket",title:this.docTitle,size:this.docSize,pay:this.options.needUticket||"",total:this.options.UticketCount,docType:v}),'<div class="exchange-area">\u4f7f\u7528<em>'+i+"\u79ef\u5206</em>\u5151\u6362<em>"+e+"\u4e0b\u8f7d\u5238</em> \u5f53\u524d\u53ef\u7528"+o+"\u79ef\u5206</div>",'<div class="operate-area">','<div class="btn btn-lg btn-diaolog-downdoc">\u5151\u6362\u5e76\u4e0b\u8f7d</div>',this.publicTpl.dumpWangpan(),this.publicTpl.vcodeTpl({showVcode:this.showImgVcode}),"</div>",this.publicTpl.publicFooter({tip:this.getTipInfo()}),"</div>"].join("")},init:function(){c.set("isDownloadTongJi",1);var i=Math.max(this.options.needUticket-this.options.UticketCount,0);this.NTicket=i,this.options.NTicket=i,this.$el.html(this.tpl()),this.addEventListener()},addEventListener:function(){var i=this;this.$el.on("click",".btn-diaolog-downdoc",function(){var e=i.options.NTicket||"";t('input[name="target_uticket_num"]').val(e),n.lang.eventCenter.dispatchEvent("download.toGetFile"),i.close(),l.xsend(1,100194,{isVip:i.options.isvip})})}},proVipTicketDocDialog:{tpl:function(){return['<div class="dialog-container-2019">',this.publicTpl.publicHdTpl,this.publicTpl.docInfo({type:"professional",title:this.docTitle,size:this.docSize,pay:1,total:this.options.ticketCount,docType:v}),'<div class="operate-area">','<div class="btn vip btn-diaolog-downdoc">\u4f7f\u7528VIP\u7279\u6743\u4e0b\u8f7d</div>',this.publicTpl.dumpWangpan(),this.publicTpl.vcodeTpl({showVcode:this.showImgVcode}),"</div>",this.publicTpl.publicFooter({tip:this.getTipInfo()}),"</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.addEventListener(),l.xsend(1,100113)},addEventListener:function(){var i=this;this.$el.on("click",".btn-diaolog-downdoc",function(){if(i.showImgVcode){if(i.vcodePass)return l.xsend(1,102373,{result:2,type:"img"}),i.vcodeError(),!1;l.xsend(1,102373,{result:1,type:"img"}),document.downloadForm.useTicket.value=1,i.executeDownload()}else if(i.showPassVcode){new u({vcodecallback:function(e){e===h.SUCCESS&&(document.downloadForm.useTicket.value=1,i.executeDownload())}})}else document.downloadForm.useTicket.value=1,i.executeDownload()})}}};o.exports=f});
;define("wkview:widget/ui/view/down_doc/down_doc.js",function(e,i,a){var o=e("wkcommon:widget/lib/tangram/base/base.js"),t=e("wkcommon:widget/ui/js_core/dialog/dialog.js"),n=e("wkcommon:widget/lib/fis/data/data.js"),d=e("wkcommon:widget/ui/js_core/log/log.js"),s=e("wkcommon:widget/ui/js_core/util/util.js"),l=e("wkcommon:widget/ui/lib/cookie/cookie.js"),c=n.get("WkInfo"),r=(e("wkview:widget/ui/view/down_doc/downRec.js"),e("wkcommon:widget/ui/lib/jquery/jquery.js")),p=e("wkview:widget/ui/view/down_doc/down_org_vip.js"),w=e("wkview:widget/ui/dialog_down_doc/dialog_down_doc.js"),u=e("wkview:widget/ui/view/down_doc/dialog_down_doc/dialog_down_doc.js"),g=e("wkview:widget/ui/view/down_doc/new_dialog_down_doc/new_dialog_down_doc.js"),v=e("wkview:widget/doc_download_main/submit.js"),f=e("wkview:widget/ui/view/vip_cashier/vip_cashier.js"),h=e("wkview:widget/ui/view/small_flow_vipcashier/smallFlow.js"),m=e("wkview:widget/ui/view/small_flow_vipcashier/smallflow_vip_conf.js"),D=function(){var e=null;return function(){return e||(e=t.dialogCreate()),e}}(),k=(new w,function(){var e=function(){this.init.apply(this)};return r.extend(e.prototype,{userData:{},publicData:{isInit:!1,dialogWindow:!1},init:function(){var e=this;e.WkInfo=c,e.UserInfo=e.WkInfo.UserInfo,e.UserInfo&&(e.isCreater=e.UserInfo.isCreater),e.docSize=(e.WkInfo.DocInfo.size/1024+"").replace(/^(\d+\.\d)\d+$/,"$1"),e.urlInterfaceGetRepeatDown=e.WkInfo.Urls.interfaceGetRepeatDown,e.docId=e.WkInfo.DocInfo.docId,e.isPaymentDoc=e.WkInfo.DocInfo.isPaymentDoc,e.isPaied=e.WkInfo.DocInfo.ispaied,e.is_edu_doc=parseInt(e.WkInfo.DocInfo.is_edu_doc),e.isTicket=parseInt(e.WkInfo.DocInfo.docTicket,10),e.endTime=parseInt((new Date(2015,8,30,23,59,59).getTime()-(new Date).getTime())/1e3,10),e.endTime=e.endTime>0?1:0,e.isEduLimitedDoc=e.is_edu_doc&&!e.isPaymentDoc&&e.isTicket,e.smallFlow=h(m),e.smallFlowFlag="view_cashier_radio"===e.smallFlow,e.smallFlowComp="cashier_duizhao"===e.smallFlow,this.dialogInstance=this.smallFlowFlag?g:u,this.publicData.isInit===!1&&(o.lang.eventCenter.addEventListener("download.toGetFile",function(){e.getFile()}),o.lang.eventCenter.addEventListener("download.hao123.toGetFile",function(){e.hao123GetFile()}),o.lang.eventCenter.addEventListener("download.checkVipDownload",function(){e.checkVipDownload()}),this.publicData.isInit=!0)},start:function(e){1===window.wenkuViewDwnloadOptimize&&(e=!0);var i=this;if(i.publicData.dialogWindow=!1,!i.UserInfo)return void window.location.reload();if(i.isCreater)return o.url.getQueryValue(location.href,"convert")&&document.referrer.indexOf("/search?word=")>-1?(window.dataFormatConvert={},void i.getUserDownloadTicket()):void o.lang.eventCenter.dispatchEvent("download.toGetFile");var a=r.ajax({url:i.urlInterfaceGetRepeatDown,cache:!1,type:"post",dataType:"json",data:{atype:"getRepeatDown",doc_id:i.docId}}),t=r.ajax({url:"/activity/interface/getactivityinfo?doc_id="+i.docId,dataType:"json",cache:!1});r.when(a,t).always(function(a,t){if(a=200009===parseInt(a.errno,10)?0:parseInt(a,10)||0,t&&t[0]){t=t[0];var d=t.status||{};i.userData.hasActivityAferDownload=0===d.code}if(i.isShowVcode=200008===parseInt(a,10)?!0:!1,e&&r.ajax({type:"get",async:!1,cache:!1,url:"/user/interface/getvipfreedoc?doc_id="+i.docId,success:function(e){var a=!1,o=!1,t=0,d=n.get("WkInfo"),s=+d.DocInfo.is_edu_doc||0,l=+d.DocInfo.isPaymentDoc||0,c=+d.DocInfo.docTicket||0,r=s&&!l&&c,p=new Date(2015,8,30,23,59,59).getTime(),w=parseInt((p-(new Date).getTime())/1e3,10);e&&0===+e.status.code&&(e.data.is_vip_free_doc&&(a=!0),(e.data.is_vip_doc_limited&&e.data.vip_doc_limited_time||r&&w>0&&!e.data.is_vip_free_doc)&&(o=!0,t=r&&w>0?w:e.data.vip_doc_limited_time)),n.set("VipFreeDoc",a),i.isVipDoc=a}}),200009===parseInt(a.errno,10)&&"ok"!==l.get("wk_bindemaillater"))return void i.bindEmailLater(a.token);if(i.isPaymentDoc&&i.isPaied)return void i.pay("PaymentDoc");if(1===a)return void i.pay("payed");if(2===a)return o.url.getQueryValue(location.href,"docTypeConvert")?(i.WkInfo.DocInfo.downloaded=!1,void o.lang.eventCenter.dispatchEvent("download.toGetFile")):o.url.getQueryValue(location.href,"convert")?(window.dataFormatConvert={},void i.getUserDownloadTicket()):void i.pay("saved");if(void 0==e){var s=p;return void s.init({WkInfo:i.WkInfo,docSize:i.docSize,downDoc:k})}i.getUserDownloadTicket()})},getUserDownloadTicket:function(){var e=this;r.ajax({url:"/customer/interface/getuserdownloadticket",type:"post"}).done(function(i){var a={};i&&0===i.status.code&&(a=i.data),e.userData.UticketCount=parseInt(a.uticket)>0?a.uticket:0,e.userData.exchangeRate=parseInt(a.exchangeRate)||4,e.userData.canDownload=parseInt(a.canDownload)||1,e.userData.needUticket=Number(e.WkInfo.DocInfo.docTicket),e.userData.wealth=~~a.wealth||~~e.UserInfo.wealth,e.userData.canUticket=parseInt(e.userData.wealth/e.userData.exchangeRate,10),e.userData.isPaymentDoc=e.isPaymentDoc,e.userData.price=Number(e.WkInfo.DocInfo.price),e.userData.isShowVcode=e.isShowVcode,e.userData.isvip=+a.isvip,e.userData.ticketCount=parseInt(a.ticket,10)>0?a.ticket:0,e.userData.is_edu_vip=parseInt(a.edu_vip_data.is_edu_vip,10),e.userData.is_jiaoyu_vip=a.jiaoyu_vip_data&&a.jiaoyu_vip_data.is_jiaoyu_vip?parseInt(a.jiaoyu_vip_data.is_jiaoyu_vip,10):0,e.userData.edu_download_ticket=parseInt(a.edu_vip_data.edu_download_ticket,10)>0?parseInt(a.edu_vip_data.edu_download_ticket,10):0,e.userData.is_mini_vip=+a.mini_vip,e.userData.is_mini_time=+a.remain_time>0?+a.remain_time:0,e.userData.check_new_user_gift=a.check_new_user_gift||0,e.userData.isVipDoc=e.isVipDoc,e.userData.isVipDocLimited=e.isVipDocLimited,e.userData.vipDocLimitedTime=e.vipDocLimitedTime,e.userData.isBindgot=a.is_bindgot,e.userData.finishAppTask=a.complete_wkapptask,e.userData.finishYdAppTask=a.complete_ydcheckintask;var o=location.href;o.indexOf("fr=jp")>=0&&d.xsend(1,100700),e.userData.not_hit_dump_doc=e.WkInfo.smallFlowContent&&e.WkInfo.smallFlowContent.not_hit_dump_doc;var t=e.userData.isvip||e.userData.is_edu_vip,n=t&&e.userData.isVipDocLimited;e.isEduLimitedDoc&&e.endTime&&n?r.ajax({url:"/activity/interface/2015sepeduvipdowncheck",cache:!1,type:"get",success:function(i){0===i.data.can_download?(e.publicData.dialogWindow||(e.publicData.dialogWindow=u.get("downloadMuchTip",e.userData)),e.publicData.dialogWindow.show(function(){})):e.dialogDownDoc(a,e.userData)}}):e.dialogDownDoc(a,e.userData)})},dialogDownDoc:function(e,i){var a=i,o=this;if(0===parseInt(a.needUticket)){if(!this.publicData.dialogWindow){var t=n.get("verticalDocType")||"",s=2!==+t?this.dialogInstance:u;this.publicData.dialogWindow=s.get("freeDocDialog",a)}return void this.publicData.dialogWindow.show(function(){1===parseInt(a.isvip)?d.xsend(1,100112):d.xsend(1,100111),(o.smallFlowComp||o.smallFlowFlag)&&d.xsend(1,102277,{small:o.smallFlowComp?"compare":"new",canDownload:!0,isVip:1===+a.isvip})})}this.checkVipDownload()||this.checkNoVipDownLoad()},checkVipDownload:function(){var e=this,i=e.userData;if((1===i.isvip||1===i.is_edu_vip||1===i.is_jiaoyu_vip)&&(e.isVipDoc||e.isVipDocLimited))return e.publicData.dialogWindow||(e.publicData.dialogWindow=this.dialogInstance.get("vipFreeDocDialog",i)),e.publicData.dialogWindow.show(function(){d.xsend(1,100273),(e.smallFlowComp||e.smallFlowFlag)&&d.xsend(1,102279,{small:e.smallFlowComp?"compare":"new",canDownload:!0,isVip:1===i.isvip})}),!0;if(1===e.is_edu_doc){if((1===i.isvip||1===i.is_jiaoyu_vip)&&1===i.is_edu_vip&&1!==i.is_mini_vip)return e.publicData.dialogWindow||(e.publicData.dialogWindow=dialogDownDoc.get("eduNormalVipDocDialog",i),e.publicData.dialogWindow.setDialog(u)),e.publicData.dialogWindow.show(function(){d.xsend(1,100346)}),!0;if(1===i.is_edu_vip)return e.publicData.dialogWindow||(e.publicData.dialogWindow=dialogDownDoc.get("eduNormalVipDocDialog",i),e.publicData.dialogWindow.setDialog(u)),e.publicData.dialogWindow.show(function(){d.xsend(1,100343)}),!0;if(1===i.isvip||1===i.is_jiaoyu_vip){var a="";if(1===i.is_mini_vip)return i.ticketCount>0?(e.publicData.dialogWindow=u.get("miniVipTicketDocDialog",i),a="100344"):(e.publicData.dialogWindow||(e.publicData.dialogWindow=u.get("miniVipNoTicketDocDialog",i),e.publicData.dialogWindow.setDialog(u)),a="100345"),e.publicData.dialogWindow.show(function(){d.xsend(1,a)}),!0;if(this.smallFlowFlag&&i.UticketCount>=i.needUticket)e.publicData.dialogWindow||(e.publicData.dialogWindow=this.dialogInstance.get("nonVipTicketsEnough",i));else if(i.ticketCount>0)e.publicData.dialogWindow||(e.publicData.dialogWindow=this.dialogInstance.get("normalVipTicketDocDialog",i),e.publicData.dialogWindow.setDialog(u)),a="100344";else{if(!e.publicData.dialogWindow){if(this.smallFlowFlag){{new f({uticket:i.UticketCount,isNeedCheckTicket:!1})}return}e.publicData.dialogWindow=u.get("normalVipNoTicketDocDialog",i),e.publicData.dialogWindow.setDialog(u)}a="100345"}return e.publicData.dialogWindow.show(function(){if(d.xsend(1,a),e.smallFlowComp||e.smallFlowFlag){var o=e.isVipDoc?102279:102278;d.xsend(1,o,{small:e.smallFlowComp?"compare":"new",canDownload:!0,isVip:1===i.isvip})}}),!0}}if(1!==e.is_edu_doc&&(1===i.isvip||1===i.is_edu_vip||1===i.is_jiaoyu_vip)){var a="";return 1===i.is_mini_vip?(i.ticketCount>0?(e.publicData.dialogWindow=u.get("miniVipTicketDocDialog",i),a="100344"):(e.publicData.dialogWindow||(e.publicData.dialogWindow=u.get("miniVipNoTicketDocDialog",i),e.publicData.dialogWindow.setDialog(u)),a="100345"),e.publicData.dialogWindow.show(function(){d.xsend(1,a)}),!0):(this.smallFlowFlag&&i.UticketCount>=i.needUticket?e.publicData.dialogWindow||(e.publicData.dialogWindow=this.dialogInstance.get("nonVipTicketsEnough",i)):i.ticketCount>0?(e.publicData.dialogWindow||(e.publicData.dialogWindow=this.dialogInstance.get("normalVipTicketDocDialog",i),e.publicData.dialogWindow.setDialog(u)),a="100113"):(e.publicData.dialogWindow||(e.publicData.dialogWindow=u.get("normalVipNoTicketDocDialog",i),e.publicData.dialogWindow.setDialog(u)),a="100114"),e.publicData.dialogWindow.show(function(){if(d.xsend(1,a),e.smallFlowComp||e.smallFlowFlag){var o=e.isVipDoc?102279:102278;d.xsend(1,o,{small:e.smallFlowComp?"compare":"new",canDownload:!0,isVip:1===i.isvip})}}),!0)}return!1},checkNoVipDownLoad:function(){var e=this,i=e.userData;if(1!==i.isvip&&1!==i.is_edu_vip&&1!==i.is_jiaoyu_vip&&i.UticketCount>=i.needUticket)return console.log("nonVipTicketsEnough"),e.publicData.dialogWindow=this.dialogInstance.get("nonVipTicketsEnough",i),e.publicData.dialogWindow.show(function(e){e.$el.find(".close-btn").show(),d.xsend(1,100115)}),!0;if(1!==i.isvip&&1!==i.is_edu_vip&&1!==i.is_jiaoyu_vip&&i.UticketCount<i.needUticket&&i.canUticket+i.UticketCount>=i.needUticket){console.log("nonVipTicketsNonEnoughWeathEnough");var a="nonVipTicketsNonEnoughWeathEnough";return e.publicData.dialogWindow=this.dialogInstance.get(a,i),e.publicData.dialogWindow.show(function(a){if(a.$el.find(".close-btn").show(),d.xsend(1,100115),e.smallFlowComp||e.smallFlowFlag){var o=e.isVipDoc?102279:102278;d.xsend(1,o,{small:e.smallFlowComp?"compare":"new",canDownload:!0,isVip:1===i.isvip})}}),!0}if(1!==i.isvip&&1!==i.is_edu_vip&&1!==i.is_jiaoyu_vip&&i.UticketCount<i.needUticket&&i.canUticket+i.UticketCount<i.needUticket){if(e.smallFlowFlag||e.smallFlowComp){var o=e.isVipDoc?102279:102278;d.xsend(1,o,{small:e.smallFlowComp?"compare":"new",canDownload:!1,isVip:1===i.isvip})}if(e.smallFlowFlag){{new f({uticket:i.UticketCount,isNeedCheckTicket:!1})}return}d.xsend(1,102339),r.ajax({url:"/xpage/form/getform?id=wkview_download_to_wkapp",success:function(a){if(a.data&&a.data.form_data&&1===a.data.form_data.wkApponoff){console.log("nonVipTicketsNonEnoughWeathNonEnoughWK");var o="nonVipTicketsNonEnoughWeathNonEnoughWK";return e.publicData.dialogWindow=u.get(o,i),e.publicData.dialogWindow.show(function(e){e.$el.find(".close-btn").show(),d.xsend(1,101488)}),!0}if(0===+i.finishYdAppTask){console.log("nonVipTicketsNonEnoughWeathNonEnoughYD");var o="nonVipTicketsNonEnoughWeathNonEnoughYD";return e.publicData.dialogWindow=u.get(o,i),e.publicData.dialogWindow.show(function(e){e.$el.find(".close-btn").show(),d.xsend(1,101367)}),!0}console.log("nonVipTicketsNonEnoughWeathNonEnough");var o="nonVipTicketsNonEnoughWeathNonEnough";return e.publicData.dialogWindow=u.get(o,i),e.publicData.dialogWindow.show(function(e){e.$el.find(".close-btn").show(),d.xsend(1,100117)}),!0}})}return e.publicData.dialogWindow&&e.publicData.dialogWindow.show(),!0},pay:function(e,i){var a=this,t=a.WkInfo.DocInfo,s=n.get("taskData")||{},l={docId:t.docId,docType:t.docType,cid1:t.cid1,cid2:t.cid2,cid3:t.cid3,cid4:t.cid4},r={first:["",'<p class="c-gray9"><a style="color: #999;text-decoration: underline;" href="//wenku.baidu.com/topic/money_2014/" target="_blank">\u9650\u65f6\u62a2\u5151\u4e0b\u8f7d\u5238\uff0c\u6587\u6863\u514d\u8d39\u4e0b>></a></p>'].join(""),saved:['<p class="c-gray9">\u53bb>><a href="/room?from=down_saved_pop_tip" target="_blank">\u6211\u7684\u6587\u5e93</a>\u67e5\u770b\u81ea\u5df1\u6240\u6709\u7684\u6587\u6863\uff0c\u8fd8\u53ef\u4ee5\u5c06\u6587\u6863\u516c\u5f00\u5230\u6587\u5e93\uff0c\u8d5a\u53d6\u79ef\u5206\uff01</p>'].join(""),free:"<p>\u8fd9\u662f\u514d\u8d39\u6587\u6863\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u6216\u514d\u8d39\u6536\u85cf\uff1b</p>",download:"<p>\u53ef\u514d\u8d39\u6536\u85cf\u8be5\u6587\u6863\uff1b\u4e00\u4e2a\u6708\u5185\u91cd\u590d\u4e0b\u8f7d\u514d\u8d39\uff1b</p>",xunlei:'<p>\u6682\u4e0d\u652f\u6301\u8fc5\u96f7\u7b49\u5de5\u5177\u4e0b\u8f7d\uff0c<a class="c-gray9" href="http://www.baidu.com/search/wenku/help/help.html?nav=31" target="_bland">\u67e5\u770b\u5e2e\u52a9</a>\u3002</p>'},p={payed:function(i){i.height=290;var t=a.WkInfo.DocInfo.title;t=o.string.getByteLength(t)<26?t:o.string.subByte(t,26,"..."),i.content=u.payed.replace("{title}",t).replace("{price}",a.WkInfo.DocInfo.price).replace("{size}",a.docSize).replace("{txt}",r.xunlei),a.smallFlowFlag?(a.getFile(e),d.xsend(1,100036),d.send("down","docdownload",o.object.merge(l,{repeat:1}))):D().confirm({title:i.title,content:i.content,width:i.width,height:i.height,className:"wk-downdoc-dialog",btnText:["\u4e0b\u8f7d","\u53d6\u6d88"],onOk:function(){a.getFile(e),d.xsend(1,100036),d.send("down","docdownload",o.object.merge(l,{repeat:1}))}})},saved:function(i){i.height=290;var t=a.WkInfo.DocInfo.title;t=o.string.getByteLength(t)<26?t:o.string.subByte(t,26,"..."),i.content=u.saved.replace("{title}",t).replace("{size}",a.docSize).replace("{txt}",r.saved),c.DocInfo.downloaded=!0,a.smallFlowFlag?(a.getFile(e),d.xsend(1,100036),d.send("down","docdownload",o.object.merge(l,{repeat:1}))):D().confirm({title:i.title,content:i.content,width:i.width,height:i.height,className:"wk-downdoc-dialog",btnText:["\u4e0b\u8f7d","\u53d6\u6d88"],onOk:function(){a.getFile(e),d.xsend(1,100036),d.send("down","docdownload",o.object.merge(l,{repeat:1}))}})},PaymentDoc:function(i){i.height=260;var t=a.WkInfo.DocInfo.title;t=o.string.getByteLength(t)<26?t:o.string.subByte(t,26,"..."),i.content=u.PaymentDoc.replace("{title}",t).replace("{size}",a.docSize),a.bindSaveEvent();var n=a.WkInfo.smallFlowContent&&+a.WkInfo.smallFlowContent.not_hit_dump_doc;1===n&&(i.content=i.content.replace('<div class="wpUpload">           <label for="wpUpload">               <input type="checkbox" name="wpUpload" value="1" checked="checked">                   <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>           </label>       </div>',"")),a.smallFlowFlag?(a.getFile(e),d.xsend(1,100036),d.send("down","docdownload",o.object.merge(l,{repeat:0}))):D().confirm({title:i.title,content:i.content,width:i.width,height:i.height,btnText:["\u4e0b\u8f7d","\u53d6\u6d88"],className:"wk-downdoc-dialog",onOk:function(){a.getFile(e),d.xsend(1,100036),d.send("down","docdownload",o.object.merge(l,{repeat:0}))}})}},w={docTitle:['<div class="title">{title}<span class="c-gray9">({size}KB)</span></div>'].join(""),tabControl:['<div class="tabControl">','<div class="use-wealth ib">\u4f7f\u7528\u79ef\u5206\u4e0b\u8f7d</div>','<div class="use-ticket ib">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d</div>',"</div>"].join(""),wealthInfo:['<div class="info">',"<p>\u4e0b\u8f7d\u6240\u9700\u79ef\u5206\uff1a{price}</p>",'<p>\u60a8\u5269\u4f59\u79ef\u5206\uff1a<span class="c-orange">{wealth}</span></p>',"</div>"].join(""),ticketInfo:['<div class="info">',"<p>\u4e0b\u8f7d\u6240\u9700\u4e0b\u8f7d\u7279\u6743\uff1a{needTicket}</p>",'<p>\u60a8\u5269\u4f59\u4e0b\u8f7d\u7279\u6743\uff1a<span class="c-orange">{ticket}</span></p>',"</div>"].join(""),saveControl:['<div class="box ml20 mt10 c-gray9" style="line-height: 20px;">','<div class="media" style="margin:0"><input type="checkbox" checked id="choice-for-saved" class="choice-for-saved" value="0"/></div>','<div class="content">{txt}</div>',"</div>"].join(""),noWealth:['<div class="info">',"<p>\u4e0b\u8f7d\u6240\u9700\u79ef\u5206\uff1a{price}</p>",'<p class="c-red">\u60a8\u5f53\u524d\u7684\u79ef\u5206\u4e3a{wealth}\uff0c\u4e0d\u8db3\u4ee5\u652f\u4ed8\u4e0b\u8f7d\u3002</p>','<p class="c-red">\u4f46\u60a8\u4e5f\u53ef\u4ee5\u514d\u79ef\u5206\u4e0b\u8f7d\u5230\u624b\u673a\u5ba2\u6237\u7aef\u4e2d\u3002<a href="javascript:void(0);" class="fsm-btn">\u7acb\u5373\u4e0b\u8f7d\u5230\u624b\u673a</a></p>',"</div>",'<div class="you-can">',"<dl>",'<dt class="c-gray9">\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u9014\u5f84\u83b7\u53d6\u79ef\u5206:</dt>','<dd>1.\u4f7f\u7528<a href="http://liulanqi.baidu.com/landingPage/index.html#page=5" target="_blank">\u767e\u5ea6\u6d4f\u89c8\u5668</a>\uff0c\u6bcf\u592912\u70b9\u79ef\u5206\u8f7b\u677e\u5f97\uff01',"<dd>2.\u4e0a\u4f20\u6587\u6863</dd>","</dl>","</div>",'<div class="read-more">','<a href="http://www.baidu.com/search/wenku/help.html#\u5982\u4f55\u83b7\u53d6\u79ef\u5206" target="_blank">',"\u4e86\u89e3\u66f4\u591a\u7684\u79ef\u5206\u8be6\u60c5&gt;&gt;","</a>","</div>"].join(""),noWealthNew:['<div class="title">','<p><span class="c-gray9">\u300a{title}\u300b</span>\u4e0b\u8f7d\u9700\u8981{price}\u79ef\u5206<p>','<p>\u60a8\u7684\u79ef\u5206\u4e3a<span class="c-red">{wealth}</span>\uff0c\u4e0d\u8db3\u4ee5\u652f\u4ed8\u3002\u60a8\u53ef\u4ee5\uff1a</p>',"</div>",'<div class="you-can clearfix">','<dl class="item-block item-join-vip">',"<dt>",function(){var e=n.get("WkInfo").DocInfo.docId;return'<a href="/cashier/browse/dispatch?doc_id='+e+'" target="_blank" class="hl">'}(),'<span class="bg-img"></span>','<span class="item-title">\u52a0\u5165\u6587\u5e93VIP</span>',"</a>","</dt>",'<dd class="item-des">\u4e13\u4eabVIP\u514d\u79ef\u5206\u4e0b\u8f7d\u7279\u6743</dd>',"</dl>","</div>",'<div class="read-more">',s.hasGrownupData===!0?'<a href="/user/task?tab=0&fr=downPop" target="_blank">\u53c2\u52a0\u4efb\u52a1</a>':'<a href="/user/task?tab=1&fr=downPop" target="_blank">\u53c2\u52a0\u4efb\u52a1</a>','\u3001<a href="/new?fr=downPop" target="_blank">\u4e0a\u4f20\u6587\u6863</a> \u4e5f\u53ef\u83b7\u5f97\u79ef\u5206 <br/>','<a href="###" class="fsm-btn">\u6587\u5e93\u5ba2\u6237\u7aef\u514d\u79ef\u5206\u4e0b\u8f7d</a>',"</div>"].join(""),noTicket:['<div class="info">',"<p>\u4e0b\u8f7d\u6240\u9700\u4e0b\u8f7d\u7279\u6743\uff1a{needTicket}</p>",'<p class="c-red">\u60a8\u5f53\u524d\u7684\u4e0b\u8f7d\u7279\u6743\u4e3a{ticket}\uff0c\u4e0d\u8db3\u4ee5\u652f\u4ed8\u4e0b\u8f7d\u3002</p>','<p class="c-red">\u60a8\u53ef\u4ee5\u7eed\u8d39\u6587\u5e93VIP\uff0c\u7eed\u8d393\u6708\u900110\u5f20\u3002</p>',"</div>","noticket"===i?"":['<div class="you-can">',"<dl>",'<dt class="c-gray9">\u6210\u4e3a\u6587\u5e93VIP\uff0c\u60a8\u5c06\u62e5\u6709\u4ee5\u4e0b\u6743\u5229:</dt>',"<dd>1.\u4e07\u518c\u7cbe\u54c1\u5185\u5bb9\u514d\u8d39\u770b</dd>","<dd>2.\u6bcf\u6708\u798f\u5229\u76f8\u9001\uff0c\u4e0b\u8f7d\u7279\u6743\u8ba9\u60a8\u79ef\u5206\u6587\u6863\u968f\u4fbf\u4e0b</dd>","<dd>3.\u4ed8\u8d39\u5185\u5bb9\u4eab\u6298\u6263\uff0c\u6700\u4f4e\u81f38\u6298</dd>","</dl>","</div>",'<div class="read-more">',function(){var e=n.get("WkInfo").DocInfo.docId;return'<a href="/cashier/browse/dispatch?doc_id='+e+'" target="_blank">'}(),"\u4e86\u89e3\u66f4\u591a\u7684\u6587\u5e93VIP\u8be6\u60c5&gt;&gt;","</a>","</div>"].join("")].join(""),joinvip:['<div class="box mt10 pt10 mv20 jvt-in-dl-pop">','<div class="media"><b class="ic ic-dl-pav"></b></div>','<div class="content">',function(){var e=n.get("WkInfo").DocInfo.docId;return'<p>\u52a0\u5165\u6587\u5e93VIP\uff0c\u6bcf\u6708\u83b7\u8d60\u4e0b\u8f7d\u7279\u6743\uff0c\u65e0\u9700\u79ef\u5206\u4e5f\u80fd\u4e0b\u6587\u6863<br/><a href="/cashier/browse/dispatch?doc_id='+e+'&dqStatCode=31_8_9_12" target="_blank">\u7acb\u5373\u52a0\u5165&gt;&gt;</a></p>'}(),"</div>","</div>"].join(""),docTitleNew:['<div class="title-new"><span class="down-title-icon"></span>{title}<span class="c-gray9">({size}KB)</span></div>'].join(""),wealthInfoNew:['<div class="wealth-info-new">','<span class="price">\u6240\u9700\u79ef\u5206\uff1a<span class="mv5 c-read-red">{price}</span></span>','<span class="ml20 wealth">\u60a8\u5269\u4f59\u79ef\u5206\uff1a<span class="mv5 c-read-red">{wealth}</span></span>',"</div>"].join(""),wealthInfoNewNotEnough:['<div class="wealth-info-new">','<span class="price">\u60a8\u5269\u4f59<span class="mv5 c-read-red">{wealth}</span>\u79ef\u5206\uff0c\u4e0d\u8db3\u4ee5\u652f\u4ed8\u4e0b\u8f7d\u3002</span>',"</div>"].join(""),saveDoc:['<div class="save-doc">','<a style="color: #999;text-decoration: underline;" href="//wenku.baidu.com/topic/money_2014/" target="_blank">\u9650\u65f6\u62a2\u5151\u4e0b\u8f7d\u5238\uff0c\u6587\u6863\u514d\u8d39\u4e0b>></a>',"</div>"].join(""),getWealthFooter:['<div class="get-wealth-footer" style="height:63px;">',s.hasGrownupData===!0?'<a class="task ml5" href="/user/task?tab=0&fr=downPop" target="_blank">\u53c2\u52a0\u4efb\u52a1</a>':'<a class="task ml5" href="/user/task?tab=1&fr=downPop" target="_blank">\u53c2\u52a0\u4efb\u52a1</a>','\u3001<a href="/new?fr=downPop" target="_bland" class="upload">\u4e0a\u4f20\u6587\u6863</a>\u83b7\u53d6\u79ef\u5206','<a class="task ml5" style="background:none;color:#bebebe;font-size:9px;float:left;line-height:0px;text-decoration: none;">',"\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u79ef\u5206\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</a>","</div>"].join(""),ticketNew:['<div class="ticket-content">','<div class="price-info">\u6240\u9700\u79ef\u5206\uff1a<span class="mv5 c-read-red">{price}</span></div>','<div class="btn-content">','<div class="ticket-btn-wp btn-wp">','<a href="###" class="bt ui-btn ui-btn-32-green j_ticket-btn"><b class="btc"><b class="btText">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743<span class="recommend"></span></b></b></a>','<div class="btn-bg-wp"><div class="btn-bg '+(a.ticketCount<=10?"show-vip-guide":"")+'">','<div class="btn-bg-info">','<div class="need">\u6240\u9700\u4e0b\u8f7d\u7279\u6743\uff1a<span class="c-gray3">{needTicket}</span></div>','<div class="have">\u5269\u4f59\u4e0b\u8f7d\u7279\u6743\uff1a<span class="">{ticket}</span></div>',"</div>",'<div class="vip-guide">','<a href="###" class="vip-guide-btn j_vip-guide"></a>','<span class="vip-guide-txt">\u7eed\u8d393\u6708\u900110\u5f20</span>',"</div>","</div></div>","</div>",'<div class="wealth-btn-wp btn-wp">','<a href="###" class="bt ui-btn ui-btn-32-light j_wealth-btn">','<b class="btc"><b class="btText">\u4f7f\u7528\u79ef\u5206</b></b></a>','<div class="btn-bg-wp"><div class="btn-bg">','<div class="btn-bgf-info">',Number(a.WkInfo.UserInfo.wealth)<Number(a.WkInfo.DocInfo.price)?'<div class="have nohave c-read-red">\u60a8\u7684\u79ef\u5206\u4e0d\u8db3\u4ee5\u652f\u4ed8\u4e0b\u8f7d</div>':'<div class="need">\u6240\u9700\u79ef\u5206\uff1a<span class="c-gray3">{price}</span></div><div class="have">\u5269\u4f59\u79ef\u5206\uff1a<span class="">{wealth}</span></div>',"</div>","</div></div>","</div>","</div>","</div>"].join("")},u={first:['<div class="dlg-down">',w.docTitle,w.wealthInfo,w.saveControl,"</div>"].join(""),payed:['<div class="dlg-down">',w.docTitle,'<div class="info">','<p>\u4f60\u5df2\u4e3a\u8be5\u6587\u6863\u8fdb\u884c\u8fc7\u652f\u4ed8\uff0c\u672c\u6b21\u4e0b\u8f7d<span class="c-red">\u514d\u8d39</span></p>',"</div>",'<div class="pl20 pt5 c-gray9">{txt}</div>',"</div>",'       <div class="wpUpload">','           <label for="wpUpload">','               <input type="checkbox" name="wpUpload" value="1" checked="checked">',"                   <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>","           </label>","       </div>"].join(""),saved:['<div class="dlg-down">',w.docTitle,'<div class="info">','<p>\u4f60\u5df2\u8f6c\u5b58\u8fc7\u6b64\u6587\u6863\u81f3>><a href="/room?from=down_saved_pop" target="_blank">\u6211\u7684\u6587\u5e93</a>\uff0c\u6c38\u4e45<span class="c-red">\u514d\u8d39\u4e0b\u8f7d</span></p>',"</div>",'<div class="pl20 pt5 c-gray9">{txt}</div>','       <div class="wpUpload" style="visibility:hidden;">','           <label for="wpUpload">','               <input type="checkbox" name="wpUpload" value="0" checked="checked">',"                   <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>","           </label>","       </div>","</div>"].join(""),ticket:['<div class="dlg-down">',w.ticketContent,"</div>"].join(""),PaymentDoc:['<div class="dlg-down">',w.docTitle,'<div class="info">','<p>\u60a8\u5df2\u8d2d\u4e70\u6b64\u6587\u6863\uff0c\u6c38\u4e45<span class="c-red">\u514d\u8d39\u4e0b\u8f7d</span></p>',"</div>","</div>",'       <div class="wpUpload">','           <label for="wpUpload">','               <input type="checkbox" name="wpUpload" value="1" checked="checked">',"                   <span>\u540c\u65f6\u8f6c\u5b58\u81f3\u767e\u5ea6\u7f51\u76d8</span>","           </label>","       </div>","   </div>"].join(""),noWealth:['<div class="dlg-down dlg-down-noWealth">',w.docTitle,w.noWealth,w.joinvip,"</div>"].join(""),noWealthNew:['<div class="dlg-down dlg-down-noWealth">',w.noWealthNew,"</div>"].join(""),firstNew:['<div class="dlg-down has-sns '+(Number(a.WkInfo.DocInfo.price)>=10?"dlg-price-gt10":"")+'">',w.docTitleNew,w.wealthInfoNew,w.saveDoc,w.getWealthFooter,function(){var e=n.get("WkInfo").DocInfo.docId;return Number(a.WkInfo.DocInfo.price)>=10?'<span class="price-gt10">\u7531\u4e8e\u6587\u6863\u4ef7\u683c\u8f83\u9ad8\uff0c\u5efa\u8bae\u60a8\u4f7f\u7528<a target="_blank" href="/cashier/browse/dispatch?doc_id='+e+'" class="gt10-link">\u4e0b\u8f7d\u7279\u6743</a>\u4e0b\u8f7d</span>':""}(),"</div>"].join(""),noWealthNewX:['<div class="dlg-down dlg-down-noWealth">','<div class="title-new"><span class="down-title-icon"></span>{title}<span class="c-gray9">({price}\u79ef\u5206)</span></div>',w.wealthInfoNewNotEnough,w.getWealthFooter,"</div>"].join(""),ticketNew:['<div class="dlg-down dlg-down-ticketNew">',w.docTitleNew,w.ticketNew,w.getWealthFooter,"</div>"].join("")},g={title:"\u6587\u6863\u4e0b\u8f7d",width:360},v=a.WkInfo.DocInfo.title;v=o.string.getByteLength(v)<26?v:o.string.subByte(v,26,"..."),document.downloadForm.storage.value=0,document.downloadForm.useTicket.value=0,p[e](g)},getFile:function(e){var i,a=this,t=!1;r("input[name=wpUpload]").length>0&&!r("input[name=wpUpload]:checked").val()&&r("input[name=wpUpload]").val(0),i=r("#WkDialogCon").html()||"","payed"==e?(D().confirm({title:"\u4e0b\u8f7d\u6587\u6863",content:i+'<iframe width="460" height="220" name="runDown" frameborder="0"></iframe>',width:500,height:220,onRendered:function(){a.postGetFile()}}),D().hide()):(D().confirm({title:"\u4e0b\u8f7d\u6587\u6863",content:i+'<iframe name="runDown" frameborder="0"></iframe>',width:500,btnText:["\u4e0b\u8f7d","\u53d6\u6d88"],onRendered:function(){a.postGetFile(),t||(t=!0,"1"===document.downloadForm.storage.value&&o.ajax.get("/user/submit/foldutimeupdate?atype=updateFoldUTime&fold_id=0&_t="+(new Date).getTime()))},onOk:function(){a.postGetFile(),"first"!==e&&"ticket"!==e||t||(t=!0,"1"===document.downloadForm.storage.value&&o.ajax.get("/user/submit/foldutimeupdate?atype=updateFoldUTime&fold_id=0&_t="+(new Date).getTime()))}}),D().hide()),d.xsend(1,100337)},hao123GetFile:function(){var e=this,i=D;i().confirm({title:"\u4e0b\u8f7d\u6587\u6863",content:'<iframe width="460" height="220" name="runDown" frameborder="0"></iframe>',width:500,height:220,onRendered:function(){var i=r(document.downloadForm);i.attr("action","/user/submit/downloadnew");var a=window.postVcode||0,t=window.postVinput||0;i.find("input[name=v_code]").val(a),i.find("input[name=v_input]").val(t),i.append('<input type="hidden" name="down_process" value="9">'),o.lang.eventCenter.dispatchEvent("download.realStart",{hasActivityAferDownload:e.userData.hasActivityAferDownload}),v.run(document.downloadForm)}}),i().hide()},bindSaveEvent:function(){var e=D().el,i=o.dom.getAttr(e,"data-is-bind-save");"binded"!==i&&(s.delegate(e,".choice-for-saved","click",function(){this.checked?document.downloadForm.storage.value=1:(document.downloadForm.storage.value=0,d.send("down","cancel_copy"))}),o.dom.setAttr(e,"data-is-bind-save","binded")),document.downloadForm.storage.value=1},postGetFile:function(){{var e=this,i=0,a=e.WkInfo.DocInfo.size;e.WkInfo.DocInfo.docType}d.send("down","down_doc_tongji",{size:a,useMutli:i});var t=window.postVcode||0,n=window.postVinput||0;r(document.downloadForm).find("input[name=v_code]").val(t),r(document.downloadForm).find("input[name=v_input]").val(n),window.postDS&&window.postTK&&(r(document.downloadForm).find("input[name=ds]").length?(r(document.downloadForm).find("input[name=ds]").val(window.postDS),r(document.downloadForm).find("input[name=tk]").val(window.postTK)):(r(document.downloadForm).append('<input type="hidden" name="ds" value="'+window.postDS+'" />'),r(document.downloadForm).append('<input type="hidden" name="tk" value="'+window.postTK+'" />'))),1===+r('input[name="wpUpload"]:checked').val()?e.WkInfo.DocInfo.wpsf=1:r(".wpUpload").length>0&&(e.WkInfo.DocInfo.wpsf=2),o.lang.eventCenter.dispatchEvent("download.realStart",{hasActivityAferDownload:e.userData.hasActivityAferDownload});var s=e.userData.isvip||e.userData.is_edu_vip||e.userData.is_jiaoyu_vip,l=s&&e.userData.isVipDocLimited;if(e.isEduLimitedDoc&&e.endTime&&l){var c=r(document.downloadForm);c.attr("action","/user/submit/downloadnew"),c.append('<input type="hidden" name="down_process" value="10">')}v.run(document.downloadForm),d.xsend(1,100580)},bindEmailLater:function(e){var i=passport.pop.ArmorWidget("bindemail",{token:e,title:"\u8bf7\u60a8\u7ed1\u5b9a\u90ae\u7bb1",msg:"",auth_title:"\u8bf7\u60a8\u7ed1\u5b9a\u90ae\u7bb1",auth_msg:"\u767e\u5ea6\u6587\u5e93\u68c0\u6d4b\u5230\u60a8\u672a\u7ed1\u5b9a\u90ae\u7bb1\uff0c\u8d26\u53f7\u53ef\u80fd\u5b58\u5728\u4e0d\u5b89\u5168\u56e0\u7d20\u3002\u4e3a\u4e86\u4fdd\u8bc1\u60a8\u4e0b\u8f7d\u6587\u6863\u540e\u7684\u4e2a\u4eba\u9690\u79c1\uff0c\u8bf7\u60a8\u7ed1\u5b9a\u90ae\u7bb1\u3002<a href='javascript:void(0)' id='bindEmailLater' style='color:#666;'>\u4e0b\u6b21\u7ed1\u5b9a</a>",auth:{onRender:function(){var e=o.g("bindEmailLater");o.event.on(e,"click",function(){l.set("wk_bindemaillater","ok",{expires:864e5}),l.set("BAIDU_DOC_NACT","download",{expires:6048e5}),window.location.reload()})}},onSubmitSuccess:function(){l.set("BAIDU_DOC_NACT","download",{expires:6048e5}),window.location.reload()},onSubmitFail:function(){}});i.show()}}),e}()),_=function(){var e=new k;return e};a.exports.downDocCreate=_,a.exports.downDoc=k});
;define("wkview:widget/ui/view/pay_org_vip/pay_org_vip.js",function(o,i,n){var e=o("wkcommon:widget/lib/tangram/base/base.js"),t=o("wkcommon:widget/ui/js_core/dialog/dialog.js"),d=o("wkcommon:widget/lib/fis/data/data.js"),a=d.get("WkInfo"),c=o("wkview:widget/ui/file_downloader_ui/file_downloader_ui.js"),s=o("wkview:widget/ui/doc_business/doc_business.js"),r=o("wkcommon:widget/ui/js_core/_dialog/_dialog.js"),l=o("wkcommon:widget/ui/js_core/login/login.js"),p=o("wkview:widget/doc_download_main/submit.js"),u=function(){var o=null;return function(){return o||(o=t.dialogCreate()),o}}(),g=function(){var o=function(o){this.goods_id=o.goods_id||"",this.goods_type=o.goods_type||""};return e.object.extend(o.prototype,{wealth:0,pay:0,code:0,data:{},WkInfo:a,down_doc_dialog:null,actionUrl:{userUrl:"/user/submit/download",vipUrl:"/orgvip/submit/orgvipbuy"},mes:[["","\u7acb\u5373\u4e0b\u8f7d"],["","\u4f7f\u7528\u4e2a\u4eba\u8d26\u53f7\u8d2d\u4e70"],[],["\u60a8\u4e0b\u8f7d\u7684\u6587\u6863\u8d85\u51fa\u4f01\u4e1a\u89c4\u5b9a\u7684\u4ef7\u683c\u4e0a\u9650\uff0c\u65e0\u6cd5\u5b8c\u6210\u4e0b\u8f7d","\u4f7f\u7528\u4e2a\u4eba\u8d26\u53f7\u8d2d\u4e70"],["\u7cfb\u7edf\u9519\u8bef\uff0c\u8bf7\u5728\u9875\u9762\u5237\u65b0\u540e\u91cd\u65b0\u4e0b\u8f7d","\u786e\u5b9a"],["","\u7acb\u5373\u9605\u8bfb"]],toPay:function(){var o=this;$.ajax({url:"/pay/api/tradecheck",cache:!1,async:!1,data:{goods_type:o.goods_type,goods_id:o.goods_id},dataType:"json"}).done(function(i){if(0===+i.status){var n=o.opt.query||{},t=e.object.merge({id:o.goods_id,stt:o.goods_type},n,{overwrite:!0}),d="";d=1===+o.goods_type?"/cashier/browse/doccashier?":"/coupon/browse/buybook?";var a=d+$.param(t);window.location.href=a}else o.hasBuyAlert()})},init:function(o,i){var n=this;n.data=i||{},n.opt=o||{},l.login.verlogin(function(){$.ajax({url:"/orgvip/interface/canibuy",cache:!1,async:!1,type:"get",data:{doc_id:n.WkInfo.DocInfo.docId,dowmloadTime:(new Date).getTime()},success:function(o){n.wealth=0,n.pay=0,n.code=1,n.doc_price_limit=0,o&&void 0!==o.status.code&&(void 0!==o.data.org_allmoney&&(n.wealth=o.data.org_allmoney||0),void 0!==o.data.buyprice&&(n.pay=o.data.buyprice||0),n.code=o.status.code,10===+n.code&&(n.code=0),0===+n.code&&0===+o.data.downlowndable&&(n.code=10),o.data.doc_price_limit&&(n.doc_price_limit=o.data.doc_price_limit),n.orgName=decodeURIComponent(o.data.org_name)||"",n.eventInit(o))}})},null,null,{},!1)},hasBuyAlert:function(){r.alert({title:"\u63d0\u793a",content:['<p style="margin:20px;text-align:center;line-height:24px;font-size:14px;">',"\u4f60\u5df2\u8d2d\u4e70\u8fc7\u6b64\u5546\u54c1\uff0c\u8bf7\u52ff\u91cd\u590d\u8d2d\u4e70\u3002<br/>\u70b9\u51fb\u786e\u8ba4\uff0c\u5237\u65b0\u9875\u9762\uff0c\u9605\u8bfb\u5168\u6587\u3002","</p>"].join(""),width:300,height:180,onConfirmBefore:function(){location.reload(!0)},onCloseBefore:function(){location.reload(!0)}})},postGetFile:function(){var o=this,i=o.WkInfo.DocInfo.size,n=o.WkInfo.DocInfo.docType;if(!c.isSupport(i)){var t=window.postVcode||0,d=window.postVinput||0;$(document.downloadForm).find("input[name=v_code]").val(t),$(document.downloadForm).find("input[name=v_input]").val(d)}var a=function(){if(c.isSupport(i)){var t={},d=$(document.downloadForm);$.each(d.serializeArray(),function(o,i){t[i.name]=i.value}),t.v_code=window.postVcode||0,t.v_input=window.postVinput||0,t.method="async",$.post(d.attr("action"),t,function(e){c.download({url:e.url,title:o.WkInfo.DocInfo.title,fileSize:i,fileType:n})},"json")}else e.lang.eventCenter.dispatchEvent("download.realStart"),document.downloadForm.submit()};p.run(document.downloadForm,a)},eventInit:function(o){var i=this,n=[0,-1,2,99,99,4,3,4,1,-1,5];-1!==+n[i.code]&&(99===+n[i.code]?i.toPay():(i.down_doc_dialog=new s,i.dialogInit(i.code,o)))},getFinalPrice:function(){var o=a.DocInfo||{},i=o.payPrice||0,n=i;return n=(o.vip_type>0||o.edu_vip_type>0||o.jiaoyu_vip_type>0)&&o.is_discount_doc?o.vip_price:i},dialogInit:function(o,i){var n,e,t=this;i=i.data||{},t.down_doc_dialog.reset(),t.down_doc_dialog.set1Msg("\u60a8\u6b63\u5728\u4f7f\u7528\u7684\u5408\u4f5c\u673a\u6784\u8d26\u53f7 : "+t.orgName),$("#WkDialogDownDoc .dialog-inner").addClass("orgpay-wrap"),0===+o&&(e=+i.is_discount_doc?'<span class="orgprice">\uffe5'+(i.original_price||"")+"</span>":"",i.price=i.price||"",n=['<span class="orgpay-tip">\u672c\u6b21\u4e0b\u8f7d\u8d39\u7528\u7531\u673a\u6784\u4f1a\u5458\u5e10\u53f7\u6263\u9664</span>','<span class="discount-price">\uffe5',i.price,e,"</span>"].join(""),t.down_doc_dialog.set2Msg(n),t.down_doc_dialog.setBtnMsg("\u7acb\u5373\u4e0b\u8f7d"),t.down_doc_dialog.bindDownLoadBtton(function(){t.downloaddoc()})),7===+o&&t.down_doc_dialog.set0Msg(t.mes[4][0]),8===+o&&(e=+i.is_discount_doc?'<span class="orgprice">\uffe5'+(i.original_price||"")+"</span>":"",i.price=i.price||"",n=['<span class="orgpay-tip">\u672c\u6b21\u4e0b\u8f7d\u8d39\u7528\u7531<span class="color-green">\u4e2a\u4eba\u8d26\u53f7</span>\u6263\u9664</span>','<span class="discount-price">\uffe5',i.price,e,"</span>"].join(""),t.down_doc_dialog.set2Msg(n),t.down_doc_dialog.setBtnMsg("\u7acb\u5373\u8d2d\u4e70"),t.down_doc_dialog.bindDownLoadBtton(function(){t.toPay()})),t.down_doc_dialog.show()},downloaddoc:function(){var o=this;$(document.downloadForm).attr("action",o.actionUrl.vipUrl),u().confirm({title:"\u4e0b\u8f7d\u6587\u6863",content:'<iframe width="460" height="220" name="runDown" frameborder="0"></iframe>',width:500,height:220,onRendered:function(){o.postGetFile()}}),u().hide()}}),o}(),_=function(o){var i=new g(o);return i};n.exports=_});
;define("wkview:widget/ui/view/movetree/view/view.js",function(e,t,a){var i=e("wkcommon:widget/lib/tangram/base/base.js"),d=e("wkcommon:widget/lib/fis/data/data.js"),o=e("wkcommon:widget/ui/js_core/mvp/event/event.js").custEvent,n=new o,s=e("wkcommon:widget/ui/js_core/mvp/view/view.js").View,r=e("wkcommon:widget/ui/js_core/util/util.js"),l=e("wkcommon:widget/ui/js_core/tree/tree.js").Tree,c=r.delegate,u=i.lang.createClass(function(e){this._init(e)},{superClass:s}).extend({mediator:n,template:{type:"template",view:["<% var data = node.data; %>",'<% if(data.render === "root") { %>','<div class="files folder tree-node putable root-node nl-0 ','<% if(node.getStatus("selected")) { %> hasSelected <% } %>" data-files-id="0" ','data-files-title="<%=data.title %>" data-dir-level="0" data-dir-son="0">','<b class="ic ic-bookroom fm-icons"></b>',"<span><%=data.title %></span>","</div>",'<div data-type="childs"></div>',"<% } else { %>",'<div class="tree-item files folder tree-node ',"<%=data.isLocked %> putable nl-<%=data.level %> ",'<% if(node.getStatus("selected")) { %> hasSelected <% } %>" ','data-files-id="<%=data.id %>" data-files-title="<%=data.fold_name %>" ','data-full-title="<%=data.full_name %>" ','data-dir-level="<%=data.level %>" data-dir-son="<%=data.son %>">','<b class="ic tree-triangle <%=data.triangle %> ','<% if(node.getStatus("expand")) { %> item-tree-expand ','<% } if(node.getStatus("loading")) { %> item-tree-loading <% } %>"></b>','<% if(data.op == "new"){ %>','<div class="new-op-box">','<input id="new-dir-title" class="new-dir in-tree" type="text" value="\u6587\u4ef6\u5939" />','<a href="###" class="fm-icons btn-radic confirm-create">&radic;</a>','<a href="###" class="fm-icons btn-chi cancel-create">&Chi;</a>',"</div>","<% } else {%>","<% if(node.getStatus('rename')) {%>",'<div class="rename-op-box in-tree">','<input class="rename" id="rename-box" type="text" value="<%=data.full_name %>" />','<a href="###" class="fm-icons btn-radic confirm-rename">&radic;</a>','<a href="###" class="fm-icons btn-chi cancel-rename">&Chi;</a>',"</div>","<% } else { %>",'<span class="fold-name"><%=data.fold_name %></span>',"<% } %>","<% } %>","</div>",'<div data-type="childs"></div>',"<% } %>"].join("")},_init:function(){this.moveTree=null,this.targetTreeNode=null,this.mediator.on("v:expand-move-node",i.fn.bind(this.expandNode,this)),this.mediator.on("v:show-move-tree",i.fn.bind(this.showMovetree,this)),this.mediator.on("v:create-folder",i.fn.bind(this.createFolder,this)),this.mediator.on("v:show-move-tip",i.fn.bind(this.showMoveTip,this))},showMoveTip:function(e){var t=e.data,a=i.g("move-tree-tip");a&&(a.innerHTML=t.tip,a.style.display="",setTimeout(function(){a.style.display="none"},2e3))},showMovetree:function(e){var t,a,o,n=this,s=d.get("WkInfo"),r=e.data;i.g("store-move-box").innerHTML=['<div id="store-move-tree" style="margin-top:10px;"></div>','<div class="operate-line">','<a href="###" class="move-new">','<b class="fm-icons ic-new ic"></b>',"\u65b0\u5efa\u6587\u4ef6\u5939","</a>",'<span id="move-tree-tip" style="display:none"></span>',"</div>",'<div class="move-btns-line" style="margin-bottom:10px;">','<a href="###" class="bt ui-btn ui-btn-26-green movetree-btns confirm-move reader_tips_close">','<b class="btc reader_tips_close"><b class="btText reader_tips_close">\u786e\u8ba4</b></b>',"</a>",'<a href="###" class="bt ui-btn ui-btn-26-light movetree-btns cancel-move reader_tips_close">','<b class="btc reader_tips_close"><b class="btText reader_tips_close">\u53d6\u6d88</b></b>',"</a>","</div>"].join(""),(this.moveTree=l.create({fieldIndentifier:"id",fieldChilds:"nodes",parent:i.g("store-move-tree"),oninit:function(e){t=e,c(t.parent,"#new-dir-title","keydown",function(e){13===e.keyCode&&n.doCreate(e)}),c(t.parent,".tree-node","click",t.toggle),c(t.parent,".cancel-create","click",function(){var e=n._getNodeById("new");n.targetTreeNode=null,e&&e.remove()}),c(t.parent,".confirm-create","click",function(e){n.doCreate(e)})},onreader:function(e){return n.renderView(n.template,{node:e})},toggle:function(e){var a,d,o=i.g,s=i.dom,r=s.hasClass,l={},c=i.event.getTarget(e),u=!i.dom.hasClass(c,"has-dir");if((a=t._getNode(e))&&!r(o(a.did),"isLocked")){if(a.getStatus("new"))return!1;u||a.getStatus("expand")!==!0?(a.setStatus("loading",!0),l={dom:a,id:a.data.id},u&&((d=t.getFocused())&&d.setStatus("selected",!1),a.setStatus("selected",!0),t.setFocused(a,0),n.targetTreeNode=a),n.mediator.fire("p:get-move-tree",{data:l}),a.setStatus("loading",!1),"has-dir"===a.data.triangle&&a.setStatus("expand",!0)):(a.setStatus("expand",!1),a.removeAll())}},statusClasses:{selected:n.hasSelected},_getNode:function(e){return t.node4target(i.event.getTarget(e))}})).loadChilds([{render:"root",title:"\u6211\u7684\u6587\u5e93",id:"0"}]),a=this._getNodeById(0),a.setStatus("selected",!0),t.setFocused(a),n.targetTreeNode=a,r=this._formatData(r),r=this._rearrangeData(r),a.loadChilds(r),(o=this._getNodeById(s.DocInfo.fold_id))&&(a.setStatus("selected",!1),t.setFocused(o),o.setStatus("selected",!0)),this.bindEvent()},bindEvent:function(){var e=this.moveTree,t=this;c(i.g("store-move-box"),".move-new","click",function(){if(!t._getNodeById("new")){var a=t._getNodeById(0),d=e.getFocused();d&&(d.setStatus("selected",!1),d.setStatus("expand",!1));for(var o=0,n=a.childNodes.length;n>o;o++)d=a.childNodes[o],d.setStatus("expand",!1),d.removeAll();d=null,a.setStatus("selected",!0),e.setFocused(a,0),t.targetTreeNode=a,a.setStatus("selected",!1),a=a.insertChild({id:"new",op:"new"}),a.setStatus("selected",!0),a.setStatus("new",!0),e.setFocused(a),i.g("new-dir-title").focus(),i.g("new-dir-title").select()}}),c(i.g("store-move-box"),".confirm-move","click",function(){var e,a=t.targetTreeNode,o=d.get("WkInfo");return t._getNodeById("new")||!a?!1:(a&&(e={to:a.data.id,doc_id:o.DocInfo.docId,fold_id:o.DocInfo.fold_id},i.cookie.set("last-store-folder",a.data.id,{path:"/",expires:31536e6}),t.mediator.fire("p:do-move",{data:e})),void t.hidePop())}),c(i.g("store-move-box"),".cancel-move","click",function(){t.hidePop()})},hidePop:function(){var e=null,t=this;(e=i.dom.query(".reader_tools_tips",i.g("doc_reader"))[0]&&"no"!==t.disposePop)&&e.parentNode.removeChild(e),(e=i.g("fav-bottom-tip"))&&e.parentNode.removeChild(e)},doCreate:function(e){var t,a,d=i.g("new-dir-title"),o=i.string.trim(d.value),n=this.moveTree;return 0===+o?!1:new RegExp('[\\\\/:*?"<>\\|]').test(o)||o.length>50?(d.style.background="rgb(252, 167, 167)",!1):(t=n._getNode(e),t.setStatus("loading",!0),a={parent_fold_id:0,fold_name:o},void this.mediator.fire("p:create-dir",{data:a}))},createFolder:function(e){var t=this,a=e.data;if(!i.g("store-move-tree"))return!1;var d=this._getNodeById(a.parent_fold_id),o=this.moveTree;return o?(this.removeNewDirNode(),void(d&&(d=d.insertChild(this._formatData(a.data)[0]),o.setFocused(d),d.setStatus("selected",!0),t.targetTreeNode=o.getFocused()||null))):!1},removeNewDirNode:function(){var e=this._getNodeById("new");e&&e.remove()},expandNode:function(e){var t=e.data;this._getNodeById(t.id).loadChilds(this._formatData(t.fold_son||[]))},_getNodeById:function(e){var t=this.moveTree;return t.node4target(["node",t.handler,e].join("-"))},_formatData:function(e){var t,a=i.string.encodeHTML,d=[],o={};i.lang.isArray(e)||(e=[e]);for(var n=0,s=e.length;s>n;n+=1)t=e[n],"root"===t.render?d.push(t):(o.id=t.fold_id,o.fold_name=a(this._cutTitle(t.fold_name,t.level)),o.full_name=a(t.fold_name),o.hasdir=t.hasdir,o.son=t.son_level,o.level=t.level,o.parent=t.parent,o.triangle=+t.hasdir?"has-dir":"no-dir"),d.push(o),o={};return d},_rearrangeData:function(e){var t,a,d=0,o={},n=[];for(i.lang.isArray(e)||(e=[e]),t=e.length;t>d;d+=1)a=e[d],"undefined"!=typeof o[a.parent]?o[a.parent].push(a):o[a.parent]=[a],"undefined"!=typeof o[a.id]&&("undefined"!=typeof a.nodes?a.nodes.push(o[a.id]):a.nodes=o[a.id]),"0"===a.parent&&n.push(a);return n},_cutTitle:function(e,t){return this._cutString(e,[14,13,12,11,10,9,8,7,6][+t],"...")},_cutString:function(e,t,a){e=e.toString();var i=e.length;return"undefined"==typeof a&&(a=""),i?0>t||t>=i?e:[e.slice(0,t),a].join(""):a}});a.exports.view=u});
;define("wkview:widget/ui/view/movetree/model/model.js",function(e,o,t){var i=e("wkcommon:widget/lib/tangram/base/base.js"),n=e("wkcommon:widget/ui/js_core/mvp/model/model.js").Model,r=e("wkcommon:widget/ui/js_core/mvp/event/event.js").custEvent,s=new r,d=e("wkcommon:widget/lib/fis/data/data.js"),a=d.get("WkInfo"),f=i.lang.createClass(function(e){this._init(e)},{superClass:n}).extend({mediator:s,_init:function(){this.mediator.on("m:create-dir",i.fn.bind(this.createDir,this)),this.mediator.on("m:move-docs",i.fn.bind(this.moveDocs,this)),this.mediator.on("m:get-fold-sons",i.fn.bind(this.getFoldSons,this)),this.mediator.on("m:get-view-fold-info",i.fn.bind(this.getViewFoldInfo,this))},getViewFoldInfo:function(e){var o,t=e.promise,i=e.data;return o={app:"get_view_fold_info",fold_id:i.id||0},this._request(a.Urls.interfaceGetViewFoldInfo,o,function(e,o){t.resolve(o)}),t},getFoldSons:function(e){var o,t=e.promise,i=e.data;return o={app:"get_fold_son",fold_id:i.id||0},this._request(a.Urls.interfaceGetFoldSon,o,function(e,o){t.resolve(o)}),t},moveDocs:function(e){var o,t=e.promise,i=e.data;return o={ct:20145,doc_id_str:i.doc_id,intodoc_fold_id:i.to,fold_id:i.fold_id},this._request(a.Urls.submitDocMove,o,function(e,o){t.resolve(o)}),t},createDir:function(e){var o=e.promise,t=e.data,i=t.parent_fold_id,n={ct:20142,parent_fold_id:t.parent_fold_id,fold_name:t.fold_name};return this._request(a.Urls.submitFoldCreate,n,function(e,t){o.resolve({response:t,current:1,parent_fold_id:i})}),o},_request:function(e,o,t){var n=this;i.ajax.request(e,{method:"post",data:["fold_request",encodeURIComponent(i.json.stringify(o))].join("="),async:!1,onsuccess:function(e,o){try{o=i.json.parse(o)}catch(r){o={error_no:1}}o.error_no&&o.error_no-0>0?n.mediator.fire("p:modelError",o):t(e,o)},onfailure:function(){n.mediator.fire("p:modelError",{request_error:!0})}})}});t.exports.model=f});
;define("wkview:widget/ui/view/movetree/presenter/presenter.js",function(e,t,i){var o=e("wkcommon:widget/lib/tangram/base/base.js"),r=e("wkcommon:widget/ui/js_core/mvp/presenter/presenter.js").Presenter,n=e("wkcommon:widget/ui/js_core/mvp/event/event.js").custEvent,a=new n,d=o.lang.createClass(function(e){this._init(e)},{superClass:r}).extend({errorMsg:{1:"\u7cfb\u7edf\u9519\u8bef",2:"\u7528\u6237\u672a\u767b\u9646",3:"\u7528\u6237\u5df2\u88ab\u5c01\u7981",4:"\u65e0\u6587\u6863\u64cd\u4f5c\u6743\u9650",5:"\u64cd\u4f5c\u9891\u7387\u592a\u5feb",6:"\u91cd\u590d\u8bc4\u4ef7",7:"\u6587\u6863\u5927\u5c0f\u8d85\u8fc7\u4e0a\u9650",8:"\u975e\u6cd5\u7684\u6587\u4ef6\u5939\u540d\u79f0",9:"\u975e\u6cd5\u7684\u6587\u4ef6\u683c\u5f0f",10:"\u91cd\u590d\u6587\u6863",11:"\u63d0\u4ea4\u53c2\u6570\u975e\u6cd5",12:"\u4e0b\u8f7d\u6587\u6863\u5931\u8d25",13:"\u8bc4\u4ef7\u5931\u8d25",14:"\u7528\u6237\u79ef\u5206\u4e0d\u591f",57:"\u5bfc\u5165\u7684\u6587\u6863\u5df2\u7ecf\u5b58\u5728\u6587\u4ef6\u5939\u4e2d",58:"\u5bfc\u5165\u7684\u6587\u6863\u8fbe\u5230\u6587\u4ef6\u5939\u7684\u4e0a\u9650",59:"\u521b\u5efa\u7684\u6587\u4ef6\u5939\u8fbe\u5230\u4e0a\u9650",60:"\u6587\u4ef6\u5939\u5c42\u7ea7\u5df2\u8fbe\u5230\u4e0a\u9650",61:"\u540c\u4e00\u76ee\u5f55\u4e0b\u7684\u6587\u6863\u6709\u91cd\u590d",62:"\u5bfc\u5165\u7684\u6587\u4ef6\u5939\u540d\u5b57\u4e0d\u5408\u6cd5"},mediator:a,_init:function(){this.mediator.on("p:create-dir",o.fn.bind(this.createDir,this)),this.mediator.on("p:do-move",o.fn.bind(this.doMove,this)),this.mediator.on("p:get-fold-sons",o.fn.bind(this.getFoldSons,this)),this.mediator.on("p:get-move-tree",o.fn.bind(this.getMoveTree,this)),this.mediator.on("p:get-view-fold-info",o.fn.bind(this.getViewFoldInfo,this)),this.mediator.on("p:modelError",o.fn.bind(this.errorCenter,this))},getViewFoldInfo:function(e){var t=this,i=e.data;this.mediator.when(["m:get-view-fold-info",{data:i}]).then(function(e){t.mediator.fire("v:show-move-tree",{data:e[0]})})},getMoveTree:function(e){var t=this,i=e.data,o=i.selected||{};this.mediator.when(["m:get-fold-sons",{data:i}]).then(function(e){var r=e[0],n={id:i.id,fold_son:r,selected:o};t.mediator.fire("v:expand-move-node",{data:n})})},createDir:function(e){var t=e.data,i=this;this.mediator.when(["m:create-dir",{data:t}]).then(function(e){var t,o=e[0].response;t={parent_fold_id:e[0].parent_fold_id,data:{fold_id:o.fold_id,fold_name:o.fold_name,create_time:o.create_time,level:o.level}},i.mediator.fire("v:create-folder",{data:t}),i.mediator.fire("v:show-move-tip",{data:{tip:"\u521b\u5efa\u6587\u4ef6\u5939\u6210\u529f ^_^"}})})},doMove:function(e){var t=e.data;this.mediator.when(["m:move-docs",{data:t}])},errorCenter:function(e){var t=e.error_no;switch(+t){case 63:this.mediator.fire("v:show-move-tip",{data:{tip:"\u79fb\u52a8\u6210\u529f"}});break;case 2:alert("\u60a8\u6ca1\u6709\u767b\u5f55\uff0c\u8bf7\u767b\u5f55\u540e\u8bbf\u95ee"),location.href="//wenku.baidu.com";break;default:this.errorMsg[t]&&this.mediator.fire("v:show-move-tip",{data:{tip:this.errorMsg[t]}})}}});i.exports.presenter=d});
;define("wkview:widget/ui/view/movetree/movetree.js",function(e,i,w){var t=e("wkcommon:widget/ui/js_core/mvp/event/event.js").custEvent,v=new t,o=e("wkview:widget/ui/view/movetree/view/view.js").view,n=e("wkview:widget/ui/view/movetree/model/model.js").model,d=e("wkview:widget/ui/view/movetree/presenter/presenter.js").presenter,r=function(e){e=e||{},e.el=document.body,new o(e),new n(e),new d(e),v.fire("p:get-view-fold-info",{data:{id:e.fold_id}})};w.exports.movetree=r});
;define("wkview:widget/ui/view/down_wangpan/down_org_vip.js",function(o){var e=o("wkcommon:widget/ui/lib/jquery/jquery.js"),n=o("wkcommon:widget/lib/tangram/base/base.js"),d=(o("wkview:widget/ui/file_downloader_ui/file_downloader_ui.js"),o("wkcommon:widget/ui/js_core/dialog/dialog.js")),i=o("wkview:widget/ui/doc_business/doc_business.js"),a=o("wkcommon:widget/ui/js_core/log/log.js"),t=o("wkcommon:widget/ui/js_core/login/login.js").login,s=function(){var o=null;return function(){return o||(o=d.dialogCreate()),o}}(),c={wealth:0,pay:0,code:0,orgName:"",down_doc_dialog:null,actionUrl:{userUrl:"/user/submit/download",vipUrl:"/orgvip/submit/download"},mes:[["","\u7acb\u5373\u4e0b\u8f7d"],["","\u5207\u6362\u81f3\u4e2a\u4eba\u8d26\u53f7\u4e0b\u8f7d"],[],["\u672c\u8d26\u53f7\u4eca\u65e5\u4e0b\u8f7d\u603b\u91cf\u5df2\u8d85\u51fa\u6700\u5927\u6b21\u6570\u9650\u5236\uff0c\u8bf7\u660e\u5929\u518d\u8bd5","\u5207\u6362\u81f3\u4e2a\u4eba\u8d26\u53f7\u4e0b\u8f7d"],["\u7cfb\u7edf\u9519\u8bef\uff0c\u8bf7\u5728\u9875\u9762\u5237\u65b0\u540e\u91cd\u65b0\u4e0b\u8f7d","\u786e\u5b9a"],["\u5f53\u524d\u4e0b\u8f7d\u7528\u6237\u592a\u591a\uff0c\u8bf710\u5206\u949f\u4e4b\u540e\u518d\u6765","\u5207\u6362\u81f3\u4e2a\u4eba\u8d26\u53f7\u4e0b\u8f7d"],["\u5f53\u524d\u4e0b\u8f7d\u7528\u6237\u8fc7\u591a\uff0c\u8bf7\u4f11\u606f\u4e00\u4e0b\uff0c\u660e\u5929\u518d\u6765","\u5173\u95ed"],["\u5f53\u524d\u7f51\u7edcIP\u4eca\u65e5\u4e0b\u8f7d\u603b\u91cf\u5df2\u8d85\u51fa\u6700\u5927\u6b21\u6570\u9650\u5236\uff0c\u8bf7\u660e\u65e5\u518d\u8bd5","\u5207\u6362\u81f3\u4e2a\u4eba\u8d26\u53f7\u4e0b\u8f7d"]],initIndex:[],isOrg:!0,isControlKey:!0,init:function(o){var n=this;e.extend(this,o),n.caniuse&&void 0!==n.caniuse.status.code?(n.wealth=0,n.pay=0,n.code=4,n.resSuccess(n.caniuse)):e.ajax({url:"/orgvip/interface/caniuse",cache:!1,async:!1,type:"get",data:{doc_id:n.WkInfo.DocInfo.docId,dowmloadTime:(new Date).getTime()},success:function(o){n.wealth=0,n.pay=0,n.code=4,o&&void 0!==o.status.code&&n.resSuccess(o)}})},resSuccess:function(o){var e=this;void 0!==o.data.org_privilege_left&&(e.wealth=o.data.org_privilege_left||0),void 0!==o.data.doc_privilege_use_num&&(e.pay=o.data.doc_privilege_use_num||0),e.code=o.status.code,e.vipType=+o.data.vip_type,1===+o.data.is_repeat_user&&(e.code=4),e.orgName=decodeURIComponent(o.data.org_name)||"",e.eventInit()},changePersonDownLoad:function(){var o=this;t.verlogin(function(){var n=new o.downDoc;o.isControlKey=!1,e(document.downloadForm).attr("action",o.actionUrl.userUrl),n.start(!0)},null,null,{actionName:"download",fromMod:"download"},!1)},postGetFile:function(){var o=window.postVcode||0,d=window.postVinput||0;e(document.downloadForm).find("input[name=v_code]").val(o),e(document.downloadForm).find("input[name=v_input]").val(d),n.lang.eventCenter.dispatchEvent("download.realStart")},eventInit:function(){var o=this;o.down_doc_dialog=new i,e(document.downloadForm).attr("action",o.actionUrl.vipUrl);var n=[0,-1,99,99,99,99,3,99,1];n[13]=5,n[14]=6,n[15]=7,o.caniuse&&o.caniuse.data&&1===o.caniuse.data.eduai||-1!==+n[o.code]&&(99===+n[o.code]?o.changePersonDownLoad():o.dialogInit(n[o.code]))},dialogInit:function(o){var n=this;switch(n.down_doc_dialog.reset(),o){case 0:a.xsend(1,100261),n.mes[o][0]=11===n.vipType||12===n.vipType?"":"";break;case 1:a.xsend(1,100266),n.mes[o][0]="\u8d26\u53f7\u6301\u6709\u4e0b\u8f7d\u7279\u6743:<em> "+n.wealth+"</em><span>\u65e0\u6cd5\u5b8c\u6210\u672c\u6b21\u4e0b\u8f7d</span>"}switch(o){case 2:a.xsend(1,100262),n.down_doc_dialog.vcodePass=!1,n.down_doc_dialog.creat_2(),e(".org_name").html(n.orgName),n.down_doc_dialog.bindEvent();break;case 4:n.down_doc_dialog.set0Msg(n.mes[o][0]);break;case 5:case 6:n.down_doc_dialog.set1Msg("\u60a8\u6b63\u5728\u4f7f\u7528\u7684\u5408\u4f5c\u673a\u6784\u8d26\u53f7 : "+n.orgName),n.down_doc_dialog.set2Msg(n.mes[o][0],"warning"),n.down_doc_dialog.setBtnMsg(n.mes[o][1]);break;default:n.down_doc_dialog.set1Msg("\u60a8\u6b63\u5728\u4f7f\u7528\u7684\u5408\u4f5c\u673a\u6784\u8d26\u53f7 : "+n.orgName),n.down_doc_dialog.set2Msg(n.mes[o][0]),n.down_doc_dialog.setBtnMsg(n.mes[o][1])}n.down_doc_dialog.bindDownLoadBtton(function(){n.downloaddoc()}),n.down_doc_dialog.bindChangePerson(function(){1===+o&&a.xsend(1,100267),2===+o&&a.xsend(1,100263),3===+o&&a.xsend(1,100265),n.changePersonDownLoad()}),n.down_doc_dialog.show()},downloaddoc:function(){var o=this;s().confirm({title:"\u4e0b\u8f7d\u6587\u6863",content:'<iframe width="460" height="220" name="runDown" frameborder="0"></iframe>',width:500,height:220,onRendered:function(){o.postGetFile()}}),s().hide()}};return c});
;define("wkview:widget/ui/view/operate/operate.js",function(e,t,o){var a=e("wkcommon:widget/lib/tangram/base/base.js"),i=e("wkcommon:widget/lib/fis/data/data.js"),s=i.get("WkInfo");o.exports.addTofav=function(e,t,o,i){a.ajax.request(s.Urls.submitCollect,{data:["ct="+e,"doc_id="+t,"fold_id="+o].join("&"),method:"post",async:!1,onsuccess:i||function(){}})}});
;define("wkview:widget/ui/view/favorite/favorite.js",function(e,t,o){var i=e("wkcommon:widget/lib/tangram/base/base.js"),a=e("wkcommon:widget/lib/fis/data/data.js"),s=e("wkcommon:widget/ui/js_core/util/util.js"),r=e("wkcommon:widget/ui/js_core/login/login.js").login,n=e("wkview:widget/ui/view/operate/operate.js").addTofav,d=e("wkcommon:widget/ui/js_core/log/log.js"),l=e("wkcommon:widget/ui/lib/jquery/jquery.js"),_=e("wkcommon:widget/ui/js_core/mvp/event/event.js").custEvent,c=new _,v=function(){var e=i.g("fav-bottom-tip"),t=i.dom.query(".reader_tools_tips",i.g("doc_reader"))[0];e&&e.parentNode.removeChild(e),t&&t.parentNode.removeChild(t)},p=function(){var e=a.get("WkInfo"),t=!1;return e.DocInfo.payPrice&&(t=!0),t}(),f=function(e){var t=e||{},o="100px";p||(o="128px");var a=['<div class="mod ui-panel trg-tr reader_tools_tips" ','id="fav-bottom-tip" ','style="width:220px; height:'+o+"; ",'display:block; position:absolute; top:76px; right:275px;">','<div class="tips-wrap" style="position:absolute;z-index:2;width:100%;height:100%">','<span class="trangle" style="left:95px;margin-top:-10px;top:0;"></span>','<div class="inner">','<div class="hd">','<span class="act">','<a href="###" class="ir close reader_tips_close">X</a>',"</span>","</div>",'<div class="bd">','<div class="reader_tools_tips_content_wrap"></div>','<div class="reader_tools_tips_btn_wrap">',"__CONTENT__","</div>","</div>","</div>","</div>",'<iframe style="width:100%;height:100%;" frameborder="0"></iframe>',"</div>"].join(""),r=i.g("ft-down-area");if(r){r.appendChild(s.createDom(a.replace(/__CONTENT__/g,t.content||""))),l(".down-pack-btn")[0]?l("#fav-bottom-tip").css("right",275):l("#fav-bottom-tip").css("right",170);var n=l("#tip-notice-new"),d=l("#tip-new");n.is(":visible")&&(l("#fav-bottom-tip").css("right",350),"VIP\u9650\u65f6\u514d\u8d39\u4e0b\u8f7d"===n.html()&&l("#fav-bottom-tip").css("right",460)),d.is(":visible")&&l("#fav-bottom-tip").css("right",170),(l(".btn-new").is(":visible")||l(".xufei-vip").is(":visible"))&&l("#fav-bottom-tip").css("right",350),s.delegate(r,".reader_tips_close","click",function(){i.g("fav-bottom-tip").parentNode.removeChild(i.g("fav-bottom-tip"))})}},g=function(e,t){var o=t||"";d.xsend(1,100034),r.verlogin(function(){var t=i.cookie.get("last-store-folder")||"0",o=a.get("WkInfo"),s=o.DocInfo.docId,r=!!e;n(20010,s,t,function(t,s){var n=i.dom,d="",l=n.query(".down .btn-fav")[0],_=n.query(".reader_tools_bar .fav_btn")[0];p||(d=['<p class="wk-app-tip" style="margin-top:10px;">',"\u7528\u6587\u5e93\u624b\u673a\u5ba2\u6237\u7aef\u968f\u65f6\u67e5\u770b\u8be5\u6587\u6863\u3002",'<a href="//wenku.baidu.com/apps?fr=1002" target="_blank">\u6ca1\u6709\u5ba2\u6237\u7aef\uff1f</a>',"</p>"].join(""));var g=i.json.parse(s),m=['<div class="reader_tips_fav">','<b class="fav_sucess ic"></b>',"<strong>__TIP_TEXT__</strong>",'<a href="/room?fr=view" class="store-folder" id="store-move-link" ','target="blank" title="__FOLD_NAME__" data-id="__FOLD_ID__">',"__SHORT_NAME__","</a>","<br/>",'<div id="store-move-box" style="display:inline">','<a href="###" id="store-move-btn" target="_blank" alog-action="flashtoolbar.changefavofold">',"\u4fee\u6539\u4fdd\u5b58\u4f4d\u7f6e","</a>",d,"</div>","</div>"].join(""),b=g.fold_id||"0",w=g.fold_name||"\u6211\u7684\u6587\u5e93",h=w.length>5?w.slice(0,5)+"...":w,u="\u5df2\u6536\u85cf\u81f3 ";if(o.DocInfo.fold_id=b,o.DocInfo.fold_name=w,a.set("WkInfo",o),15===+g.error_no&&(u="\u5df2\u6536\u85cf\u5728 "),l&&(n.removeClass(l,"btn-fav"),n.addClass(l,"btn-faved"),l.innerHTML="\u5df2\u6536\u85cf"),_&&(_.innerHTML='<b class="ic"></b>\u5df2\u6536\u85cf'),m=m.replace(/__TIP_TEXT__/g,u).replace(/__FOLD_ID__/g,b).replace(/__FOLD_NAME__/g,i.string.encodeHTML(w)).replace(/__SHORT_NAME__/g,i.string.encodeHTML(h)),v(),e){var k={content:m,width:220,height:102};p||(k.height=125),e.show(k)}else f({content:m});i.g("store-move-btn")&&i.on(i.g("store-move-btn"),"click",function(e){i.g("store-move-box").style.display="block";var t=i.dom,a=t.query;a(".reader_tools_tips")[0].style.width="360px",a(".reader_tools_tips")[0].style.height="315px",a(".reader_tools_tips")[0].style.right="40px",c.fire("p:get-view-fold-info",{data:{id:o.DocInfo.fold_id}}),i.g("ft-down-area").style.overflow="hidden",i.g("ft-down-area").style.overflow="auto",r||window.scrollTo(0,9999),i.event.stop(e)})})},null,null,{actionName:"addTofav",fromMod:o})};o.exports.Favorite=g});
;define("wkview:widget/ui/view/down_wangpan/exchange_ticket/exchange_ticket.js",function(e,t,i){var n=e("wkcommon:widget/ui/lib/jquery/jquery.js"),c=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,a=e("wkcommon:widget/ui/js_core/mvp/template/template.js").template,s=c({_init:function(){var e=this,t=this.render({exchangeList:e.exchangeList,allWealth:e.allWealth});this.bindEvent(t),e.fire("ex:afterSelectTicket",{ticket:e.defaultTicket}),e.maxTicket=Math.floor(e.allWealth/e.exchangeRate)},Options:{el:"",tpl:'<div class="view-exchange-wrap">\n    <div class="exchange-box clearfix">\n        <span class="tips">\u53ef\u4ee5\u5151\u6362\uff1a</span>\n        <div class="exchange-input">\n            <div class="drop-bar">\n                <i class="iconfont">&#xe629;</i>\n            </div>\n            <p class="selected-content"></p>\n            <ul class="select-bar">\n                <% for(var i = 0; i < exchangeList.length; i++) { %>\n                    <li class="<%if(i==0){%>first<%}%>" data-ticket="<%=exchangeList[i].ticket%>">\n                        <%=exchangeList[i].ticket%>\u4e0b\u8f7d\u5238\n                    </li>\n                <% } %>\n                <li data-ticket="0">\u81ea\u5b9a\u4e49</li>\n            </ul>\n        </div>\n        <p class="gift">\u518d\u8d603\u4e0b\u8f7d\u5238</p>\n    </div>\n    <p class="consume">\u9700\u8981\u6d88\u8017\uff1a<em class="n">0</em>\u79ef\u5206<span>\uff08\u60a8\u62e5\u6709\u79ef\u5206<%=allWealth%>\uff09</span></p>\n    <p class="error-msg"></p>\n</div>\n',allWealth:0,exchangeRate:4,defaultTicket:30,exchangeList:[{ticket:5,giftTicket:0,validity:7},{ticket:10,giftTicket:0,validity:30},{ticket:30,giftTicket:3,validity:30},{ticket:50,giftTicket:5,validity:30}]},render:function(e){return n(this.el).html(a(this.tpl,e))},bindEvent:function(e){var t=this;e.find(".drop-bar").on("mouseover",function(){e.find(".drop-bar .iconfont").html("&#xe628;"),e.find(".select-bar").show()}),e.find(".exchange-input").on("mouseleave",function(){e.find(".drop-bar .iconfont").html("&#xe629;"),e.find(".select-bar").hide()}),e.find(".select-bar li").on("click",function(){var i=n(this),c=i.data("ticket");0===+c?t.fire("ex:showUserDefined"):t.fire("ex:afterSelectTicket",{ticket:c}),e.find(".select-bar").hide()}),e.find(".selected-content").on("keyup","input",function(){var e=+t.validateTicketNum(n(this).val());n(this).val(0===+e?"":e),t.fire("ex:afterSelectTicket",{ticket:e,isUserDefined:!0})}),e.find(".selected-content").on("focus","input",function(){t.fire("ex:userInputTicket")}),e.find(".selected-content").on("blur","input",function(){t.fire("ex:userFinishInputTicket")}),t.on("ex:afterSelectTicket",function(i){var n=t.getGiftTicketNum(i.ticket),c=t.getValidity(i.ticket);e.find(".gift").html(+n>0?"\u518d\u8d60"+n+"\u4e0b\u8f7d\u5238":""),e.find(".consume .n").html(~~i.ticket*t.exchangeRate),i.isUserDefined?e.find(".selected-content span").html(i.ticket?"\uff08\u6709\u6548\u671f"+c+"\u5929\uff09":""):e.find(".selected-content").html(i.ticket+"\u4e0b\u8f7d\u5238<span>\uff08\u6709\u6548\u671f"+c+"\u5929\uff09</span>"),i.ticket>t.maxTicket?t.fire("ex:notHaveEnoughWealth",{msg:"\u79ef\u5206\u4e0d\u8db3\uff0c\u60a8\u6700\u591a\u53ef\u5151\u6362"+t.maxTicket+"\u5f20\u4e0b\u8f7d\u5238"}):i.ticket>500?t.fire("ex:ExceedMax",{msg:"\u5df2\u8d85\u51fa\u5151\u6362\u4e0a\u9650\uff0c\u60a8\u4e00\u6b21\u6700\u591a\u53ef\u5151\u6362500\u5f20\u4e0b\u8f7d\u5238"}):t.fire("ex:clearError")}),t.on("ex:showUserDefined",function(){e.find(".selected-content").html('<input type="text">\u4e0b\u8f7d\u5238<span></span>'),e.find(".selected-content input").focus(),t.fire("ex:afterSelectTicket",{ticket:0,isUserDefined:!0})}),t.on("ex:notHaveEnoughWealth",function(t){e.find(".error-msg").html('<i class="iconfont">&#xe614;</i>'+t.msg)}),t.on("ex:haveEnoughWealth",function(){e.find(".error-msg").html("")}),t.on("ex:ExceedMax",function(t){e.find(".error-msg").html('<i class="iconfont">&#xe614;</i>'+t.msg)}),t.on("ex:clearError",function(){e.find(".error-msg").html("")})},getGiftTicketNum:function(e){for(var t=this.exchangeList,i=t.length-1;i>=0;i--)if(e>=t[i].ticket)return t[i].giftTicket;return 0},getValidity:function(e){for(var t=this.exchangeList,i=t.length-1;i>=0;i--)if(e>t[i].ticket)return i===t.length-1?t[i].validity:t[i+1].validity;return t[0].validity},validateTicketNum:function(e){if((""+e).match(/^\d+/))var t=+(""+e).match(/^\d{0,4}/)[0];else t=0;return t}});i.exports=s});
;define("wkview:widget/ui/view/down_wangpan/dialog_down_doc/dialog_down_doc.js",function(t,i,n){var o=t("wkcommon:widget/ui/lib/jquery/jquery.js"),e=(t("wkcommon:widget/ui/js_core/dialog/dialog.js"),t("wkcommon:widget/lib/tangram/base/base.js")),a=t("wkcommon:widget/lib/fis/data/data.js"),s=a.get("WkInfo"),c=t("wkcommon:widget/ui/js_core/log/log.js"),d=t("wkcommon:widget/ui/js_core/xform/xform.js"),l=(t("wkcommon:widget/ui/js_core/dialogCashier/dialogCashier.js"),t("wkview:widget/ui/view/down_wangpan/exchange_ticket/exchange_ticket.js")),r=(t("wkcommon:widget/ui/js_core/login/login.js").login,{isZhuangyuan:!1,getIsZhuangyuan:function(){var t=this;o.get("/pgc/interface/zhuangyuanbiji?uname="+t.uname,function(i){0===i.status.code&&i.data.is_zhuangyuan&&(t.isZhuangyuan=!0,o("#tip-notice-new").remove(),t.isZhuangyuan&&d.getJSON("2015gaokao_zhuangyuanbiji_view",{success:function(i){t.zhuangyuanQcode=i.image}}))})},init:function(){this.isPgc=s.verify_user_info,this.isPgc&&(this.uname=s.DocInfo.creater,this.getIsZhuangyuan())}});setTimeout(function(){s=a.get("WkInfo"),r.init()},200);var p=function(){var t=function(t){this.init.apply(this,[t])};return t.prototype={initPublicTpl:function(){var t=this;t.publicTpl={wealth_doc_ad:r.isZhuangyuan?['       <div class="qcode-miti">','           <img src="'+r.zhuangyuanQcode+'" />','           <p class="subtitle">\u626b\u63cf\u4e0b\u8f7d\u89c5\u9898</p>','           <p class="text">\u672c\u6587\u514d\u8d39\u8fd8\u9001\u5168\u5957\u72b6\u5143\u7b14\u8bb0</p>',"       </div>"].join(""):"",publicHdTpl:['<div class="close-btn"></div>','<div class="dialog-left-greenbar"></div>','<div class="dialog-top">','    <p class="doc-title" rel="new-dialog" alt="dialog_tit">\u8f6c\u5b58\u5230\u767e\u5ea6\u7f51\u76d8</p>',"</div>"].join(""),dialogAdWrap:['<div class="dialog-ad">','   <div class="dialog-ad-hd"></div>'].join(""),vcodeTpl:['<div class="vcode-box">','    <input type="text" class="vcode-ipt" />','    <img src="" />','    <span class="vcode-change">\u6362\u4e00\u6362</span>','    <b class="vcode-right"></b>','    <p class="error-tip"><b class="vcode-error"></b><span>\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801\uff01</span></p>',"</div>"].join(""),bottomChangeTpl:['<div class="dialog-bottom">','   <p class="bottom-btn"><a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u8f6c\u5b58</a></p>','   <p class="bottom-msg">\u56e0\u672c\u6b21\u8f6c\u5b58\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"</div>","</div>","</div>"].join(""),bottomNoChangeTpl:['<div class="dialog-bottom">','   <p class="bottom-msg" style="margin-top:37px;">\u56e0\u672c\u6b21\u8f6c\u5b58\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"</div>","</div>","</div>"].join(""),vipFreeDocLimitedBottomTpl:['<p class="vipdoc-limited hide">','<span class="iconfont ico-vip">&#xe64e;</span>','<a href="/cashier/browse/dispatch?dqStatCode=31_8_171_175&from_doc='+s.DocInfo.docId+'" class="log-xsend" ','data-logxsend="[1, 100462]" target="_blank">','VIP\u9650\u514d\u6587\u6863 <span class="vipdoc-limited-con"></span></a>',"</p>"].join(""),finishYdAppTaskTpl:['<div class="dialog-bottom-yd">','<div class="toast-it-downdoc hide">\u9886\u53d6\u5931\u8d25,\u4efb\u52a1\u5b8c\u6210\u540e\u518d\u8bd5\u8bd5</div>','<p class="ydtip-text"><span class="yd-ticket"></span>\u767e\u5ea6\u9605\u8bfb\u9001\u60a8\u4e0b\u8f7d\u5238\u4e00\u5f20</p>','<p class="ydtip-app">\u626b\u7801\u8fdb\u5165APP\u5e76\u7b7e\u5230\uff0c\u5b8c\u6210\u540e','<a href="javascript:void(0);" class="getyddownloadticket">\u70b9\u51fb\u6b64\u5904\u9886\u53d6</a></p>','<div class="qrcode-img"></div>','<a href="/task/browse/other?from=view-pop" target="_blank"','class="log-xsend dialog-bottom-yd-toNA" data-logxsend="[1, 101031, {index:2}]">',"\u83b7\u53d6\u66f4\u591a\u4e0b\u8f7d\u5238</a>","</div>"].join(""),finishWkAppTaskTpl:['<div class="dialog-bottom-yd">','<p class="ydtip-text"><span class="yd-ticket"></span>\u767e\u5ea6\u6587\u5e93\u9001\u60a8\u4e0b\u8f7d\u5238\u4e24\u5f20</p>','<p class="ydtip-app">\u65b0\u7528\u6237\u626b\u7801\u4e0b\u8f7d\u6587\u5e93APP\u5e76\u6309\u7167\u5f15\u5bfc\u767b\u5f55\uff0c\u5b8c\u6210\u540e','<a href="javascript:void(0);" class="getwkdownloadticket">\u70b9\u6b64\u5237\u65b0</a></p>','<div class="qrcode-wk-img"></div>',"</div>"].join("")},(s.DocInfo.jiaoyu_vip_type>0||s.DocInfo.vip_type>0)&&(t.publicTpl.dialogAdWrap=[])},_dialog:{},dialogObj:null,$iframe:{content:null},setDialog:function(t){this.dialogObj=t},init:function(t){console.warn("wangpang init");this.options=t,this.docTitle=e.string.getByteLength(s.DocInfo.title)<26?s.DocInfo.title:e.string.subByte(s.DocInfo.title,26,"..."),this.docSize=(s.DocInfo.size/1024+"").replace(/^(\d+\.\d)\d+$/,"$1"),this.prerogativeTxt="\u901a\u7528\u4e0b\u8f7d\u7279\u6743",s.UserInfo&&1===+s.UserInfo.smallFlowProfessionalDoc&&(this.prerogativeTxt="\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743"),this.isChrome=e.browser.chrome||e.browser.safari,this.creat(),this.addEventListener(),this.initVcode(),this.initPublicTpl(),this.getAdvTpl(),document.downloadForm.storage.value=1,this.getDownloadYunyingAD()},getDownloadYunyingAD:function(){return o.ajax({type:"get",url:"/xpage/form/getform?id=wenku_pc_download_yunying",cache:!1}).done(function(t){var i=o(document).find(".download-yunying-img-content");if(1===i.length&&t.data.form_data.open){c.xsend(1,101535);var n=t.data.form_data.content,e=['<a href="'+n.link+'" class="log-xsend" data-logxsend="[1, 101534]"',' target="_blank" style="display:inline-block;">','<img src="'+n.img+'" alt="">',"</a>"].join("");i.css("marginTop","25px").html(e).parents(".dialog-bottom").css("height","194px");var a=i.parents(".WkDialogDownWangpan"),s=a.offset().top;a.css("top",s-95)}}).fail(function(){})},getAdvTpl:function(){var t=["//wenku","baidu.com/shifen/get"],i=57,n=this;s.DocInfo.jiaoyu_vip_type>0||s.DocInfo.vip_type>0||o.ajax({type:"get",url:t[0]+"."+t[1],dataType:"jsonp",data:{pid:i,tid:1},success:function(t){if(t[0].ad_id){n.$el.find(".dialog-ad").css({width:590,background:"url("+t[0].tpl_data[0].infoImg+") center top"}),n.$el.find(".dialog-ad-hd").html(['<a target="_blank" href="'+t[0].tpl_data[0].link+'" ','class="dialog-ad-more">',"</a>"].join(""));for(var o=0;o<t.length;o++)c.xsend(1,100421,{action_type:"display",group_id:i,advertiser:t[o].from,ad_id:t[o].ad_id})}},error:function(){}})},creat:function(){var t=o(".WkDialogDownWangpan").length+1,i=o('<div id="WkDialogDownDoc_'+t+'" class="WkDialogDownWangpan '+(r.isZhuangyuan&&"zhuangyuan")+'"></div>'),n='<div class="dialog-container-iframe"><iframe allowTransparency="true" src="" frameborder="0" scrolling="no"></iframe></div>',e=o(n);this.$el=i,i.appendTo(o("body")),null==this.$iframe.content&&(this.$iframe.content=e,i.after(e))},show:function(t){o("#doc_reader")&&!this.isChrome&&(o("#doc_reader").css("visibility","hidden"),window.docReaderHideIEtxt="fuckIE");var i=this,n=o(window).height(),e=o(document).scrollTop();this.$iframe.content.css({height:o("body").height()}).show(),this.$el.css("top",e+n/2-150).show(),"function"==typeof t&&t(i)},close:function(t){var i=this;this.$el.css("display","none"),this.$iframe.content.css("display","none"),o("#doc_reader")&&o("#doc_reader").css("visibility","visible"),"function"==typeof t&&t(i)},addEventListener:function(){var t=this;this.$el.on("click",".close-btn",function(){t.close()}),this.$el.on("click",".vcode-change",function(){t.vcodeImg()}),setTimeout(function(){o(".vcode-ipt").on("input propertychange",function(){if(o(this).val().length>5)t.vcodeError();else if(4===o(this).val().length){var i=o(this).val(),n="/user/interface/vcodefordownload?m=check&&v_code="+t.vcodeValue+"&v_input="+i+"&t="+(new Date).getTime();o.get(n,function(n){n.errno?t.vcodeError():(t.vcodeOk(),t.vcodePass=!1,window.postVcode=t.vcodeValue,window.postVinput=i)})}else t.$el.find(".vcode-box .vcode-right").css("visibility","hidden"),t.$el.find(".vcode-box .error-tip").css("height","0px")})},10)},getDate:function(){var t=new Date;return{day:t.getDate(),month:t.getMonth()+1,year:t.getFullYear(),hour:t.getHours(),minutes:t.getMinutes(),today:t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}},changeDateBySecond:function(t){var i=+t,n=parseInt(i/86400,10)>0?parseInt(i/86400,10):0,o=parseInt((i-86400*n)/3600,10);o=o>0?o:0;var e=parseInt((i-(86400*n+3600*o))/60,10);e=e>0?e:0;var a=i-(86400*n+3600*o+60*e);return a=a>0?a:0,{day:n,hour:o,min:e,sec:a}},initVcode:function(){var t=this;t.options.isShowVcode&&(t.vcodePass=!0,t.vcodeImg())},vcodeOk:function(){o(".vcode-box .vcode-right").css("visibility","visible"),o(".vcode-box .error-tip").css("height","0px")},vcodeError:function(){o(".vcode-box .error-tip").css("height","16px"),o(".vcode-box .vcode-right").css("visibility","hidden")},vcodeImg:function(){var t=this;o.get("/vcode?t="+(new Date).getTime(),function(i){o(".vcode-box img").attr("src",i.imgurl),t.vcodeValue=i.vcode_str,window.postVcode=t.vcodeValue})},vipFreeDocLimitedCountDown:function(){var t=this,i={},n=null,o=function(){i=t.changeDateBySecond(t.options.vipDocLimitedTime);var n="\u5269\u4f59"+i.day+"\u5929"+i.hour+"\u65f6"+i.min+"\u5206"+i.sec+"\u79d2";t.$el.find(".vipdoc-limited-con").html(n)};this.$el.find(".bottom-btn").addClass("hide"),this.$el.find(".vipdoc-limited").removeClass("hide"),this.options.vipDocLimitedTime>0&&o(),n=setInterval(function(){t.options.vipDocLimitedTime>0?(t.options.vipDocLimitedTime--,o()):clearInterval(n)},1e3)},_changeDownloadTicket:function(){var t=this;if(t.dialogObj){if(t.options.needUticket<=t.options.UticketCount)return console.log("\u4e0b\u8f7d\u5238\u591f\u7528"),t._dialog["vipDocDialog-enough"]||(t._dialog["vipDocDialog-enough"]=t.dialogObj.get("vipDocDialog-enough",t.options)),void t._dialog["vipDocDialog-enough"].show();if(t.options.UticketCount<t.options.needUticket&&t.options.canUticket+t.options.UticketCount>=t.options.needUticket){console.log("\u4e0b\u8f7d\u5238\u4e0d\u591f\u7528,\u5151\u6362\u540e\u53ef\u4ee5\u7528");var i="vipDocDialog-enough-afterexchage";return t._dialog[i]=t.dialogObj.get(i,t.options),void t._dialog[i].show()}if(t.options.UticketCount<t.options.needUticket&&t.options.canUticket+t.options.UticketCount<t.options.needUticket){console.log("\u4e0b\u8f7d\u5238\u4e0d\u591f\u7528,\u5151\u6362\u540e\u4e0d\u591f");var i="vipDocDialog-noenough-afterexchage";t._dialog[i]||(t._dialog[i]=t.dialogObj.get(i,t.options)),t._dialog[i].show()}}},_changePrivilegeTicket:function(){e.lang.eventCenter.dispatchEvent("wangpan.checkVipDownload")}},t}(),v={get:function(t,i){var n=function(){this.dialog=t,this.options=i,this.init.apply(this)};return n.prototype=o.extend(new p(i),this[t]?this[t]:{}),new n},setToastShow:{tpl:function(){return['<div class="toast-box">','<div class="toast-it-wangpan">\u6b63\u5728\u8f6c\u5b58\uff0c\u8bf7\u7a0d\u540e...</div>',"</div>"].join("")},init:function(){var t=this,i=this.tpl();t.$el.html(i),this.addEventListener()},addEventListener:function(){var t=this;e.lang.eventCenter.addEventListener("wangpan.closeDialog",function(){t.close()}),t.$el.find(".toast-box").show(),e.lang.eventCenter.dispatchEvent("wangpan.toGetFile")}},freeDocDialog:{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">','       <div class="ticket-num-box">','       <div class="ticket-num-container">','           <p class="ticket-num-msg msg1 coupon-need" style="padding-top:35px;">','\u6240\u9700\uff1a<b class="number-red">0</b>\u4e0b\u8f7d\u5238</p>',"       </div>","       </div>",'       <div class="blank20"></div>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc" data-logxsend="">','       <b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u8f6c\u5b58</b></a>','       <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"   </div>",function(){return t.options.isShowVcode?t.publicTpl.vcodeTpl:void 0}(),"</div>","</div>"].join("")},init:function(){{var t=this.tpl();!(this.options&&this.options.hasActivityAferDownload)}this.$el.html(t),c.xsend(1,101858),this.addEventListener()},addEventListener:function(){var t=this;this.$el.on("click",".btn-diaolog-downdoc",function(){return t.vcodePass?(t.vcodeError(),!1):o(this).hasClass("download-btn-disable")?!1:(c.xsend(1,101859),o(this).addClass("download-btn-disable"),o(this).find("b").html("\u6b63\u5728\u8f6c\u5b58\uff0c\u8bf7\u7a0d\u540e..."),e.lang.eventCenter.addEventListener("wangpan.closeDialog",function(){o(document).find(".warning-dialog .btn-diaolog-downdoc").removeClass("download-btn-disable"),o(document).find(".warning-dialog .btn-diaolog-downdoc b").html("\u8f6c\u5b58\u5230\u767e\u5ea6\u7f51\u76d8"),t.close()}),document.downloadForm.useTicket.value=0,void e.lang.eventCenter.dispatchEvent("wangpan.toGetFile"))})}},vipFreeDocDialog:{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">','       <div class="ticket-num-box">','       <div class="ticket-num-container">','           <p class="ticket-num-msg msg1" style="padding-top:35px;">\u672c\u6587\u4e3a\u6587\u5e93VIP\u514d\u8d39\u6587\u6863</p>',"       </div>","       </div>",'       <p class="ticket-detail-msg msg2"></p>','       <div class="blank20"></div>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc">','       <b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u8f6c\u5b58</b></a>','       <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"   </div>",function(){return t.options.isShowVcode?t.publicTpl.vcodeTpl:void 0}(),"</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),c.xsend(1,101860),this.addEventListener()},addEventListener:function(){var t=this;this.$el.on("click",".btn-diaolog-downdoc",function(){return t.vcodePass?(t.vcodeError(),!1):o(this).hasClass("download-btn-disable")?!1:(c.xsend(1,101861),document.downloadForm.req_vip_free_doc.value=1,o(this).addClass("download-btn-disable"),o(this).find("b").html("\u6b63\u5728\u8f6c\u5b58\uff0c\u8bf7\u7a0d\u540e..."),e.lang.eventCenter.addEventListener("wangpan.closeDialog",function(){o(document).find(".warning-dialog .btn-diaolog-downdoc").removeClass("download-btn-disable"),o(document).find(".warning-dialog .btn-diaolog-downdoc b").html("\u8f6c\u5b58\u5230\u767e\u5ea6\u7f51\u76d8"),t.close()}),void e.lang.eventCenter.dispatchEvent("wangpan.toGetFile"))})}},normalVipTicketDocDialog:{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',t.publicTpl.wealth_doc_ad,'       <div class="ticket-num-box">','       <div class="ticket-num-container">','           <p class="ticket-num-msg msg1">\u6240\u9700\uff1a<strong><b class=" number-red">1</b>',"</strong>\u6b21"+t.prerogativeTxt+"</p>",'           <p class="ticket-num-msg msg3">\u6301\u6709\uff1a<strong><b class=" number-red">'+t.options.ticketCount+"</b></strong>\u6b21"+t.prerogativeTxt+"</p>","       </div>","       </div>",'       <p class="ticket-detail-msg msg2"></p>','       <div class="blank20"></div>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc">','       <b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u8f6c\u5b58</b></a>','       <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"   </div>",function(){return t.options.isShowVcode?t.publicTpl.vcodeTpl:void 0}(),function(){return t.options.UticketCount<t.options.needUticket&&t.options.canUticket+t.options.UticketCount<t.options.needUticket?t.publicTpl.bottomNoChangeTpl:t.publicTpl.bottomChangeTpl}()].join("")},init:function(){c.xsend(1,101863),this.$el.html(this.tpl()),this.addEventListener()},addEventListener:function(){var t=this;this.$el.on("click",".btn-diaolog-downdoc",function(){return t.vcodePass?(t.vcodeError(),!1):o(this).hasClass("download-btn-disable")?!1:(c.xsend(1,101864),document.downloadForm.useTicket.value=1,o(this).addClass("download-btn-disable"),o(this).find("b").html("\u6b63\u5728\u8f6c\u5b58\uff0c\u8bf7\u7a0d\u540e..."),e.lang.eventCenter.addEventListener("wangpan.closeDialog",function(){o(document).find(".warning-dialog .btn-diaolog-downdoc").removeClass("download-btn-disable"),o(document).find(".warning-dialog .btn-diaolog-downdoc b").html("\u8f6c\u5b58\u5230\u767e\u5ea6\u7f51\u76d8"),t.close()}),void e.lang.eventCenter.dispatchEvent("wangpan.toGetFile"))}),this.$el.on("click",".btn-uDownTicket",function(){t.close(),t._changeDownloadTicket()})}},normalVipNoTicketDocDialog:{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',t.publicTpl.wealth_doc_ad,'       <div class="ticket-num-box">','       <div class="ticket-num-container">','           <p class="ticket-num-msg msg1">\u6240\u9700\uff1a<strong><b class="number-red">1</b></strong>\u6b21'+t.prerogativeTxt+"</p>",'           <p class="ticket-num-msg msg3">\u6301\u6709\uff1a<strong><b class="number-red">0</b></strong>\u6b21'+t.prerogativeTxt+"</p>","       </div>","       </div>",'       <p class="ticket-detail-msg msg2"></p>','       <div class="blank20"></div>','       <a href="/cashier/browse/vippackagecashier?cashier_code=zcwangpan_joinvip&dqStatCode=31_23_38_39&from_doc='+s.DocInfo.docId+'" class="ui-bz-btn-senior"><b class="ui-bz-btn-p-16 ui-bz-btc">\u8865\u5145VIP\u4e0b\u8f7d\u7279\u6743</b></a>','       <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"   </div>",function(){return t.options.UticketCount<t.options.needUticket&&t.options.canUticket+t.options.UticketCount<t.options.needUticket?t.publicTpl.bottomNoChangeTpl:t.publicTpl.bottomChangeTpl}()].join("")},init:function(){c.xsend(1,101865),this.$el.html(this.tpl()),this.addEventListener()},addEventListener:function(){var t=this;this.$el.on("click",".btn-uDownTicket",function(){t.close(),t._changeDownloadTicket()})}},eduVipTicketDocDialog:{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',t.publicTpl.wealth_doc_ad,'       <p class="ticket-num-msg msg1">\u6301\u6709\uff1a<b class=""><strong>'+t.options.ticketCount+"</strong></b>\u6b21\u6559\u80b2\u4e0b\u8f7d\u7279\u6743</p>",'       <p class="ticket-detail-msg msg2"></p>','       <div class="blank20"></div>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc"><b class="ui-bz-btn-p-16 ui-bz-btc">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u8f6c\u5b58</b></a>','       <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"   </div>",function(){return t.options.isShowVcode?t.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-btn"><a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u8f6c\u5b58</a></p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u8f6c\u5b58\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.addEventListener()},addEventListener:function(){var t=this;this.$el.on("click",".btn-diaolog-downdoc",function(){return t.vcodePass?(t.vcodeError(),!1):o(this).hasClass("download-btn-disable")?!1:(o(this).addClass("download-btn-disable"),o(this).find("b").html("\u6b63\u5728\u8f6c\u5b58\uff0c\u8bf7\u7a0d\u540e..."),e.lang.eventCenter.addEventListener("wangpan.closeDialog",function(){o(document).find(".warning-dialog .btn-diaolog-downdoc").removeClass("download-btn-disable"),o(document).find(".warning-dialog .btn-diaolog-downdoc b").html("\u8f6c\u5b58\u5230\u767e\u5ea6\u7f51\u76d8"),t.close()}),document.downloadForm.useTicket.value=2,void e.lang.eventCenter.dispatchEvent("wangpan.toGetFile"))}),this.$el.on("click",".btn-uDownTicket",function(){t.close(),t._changeDownloadTicket()})}},eduNormalVipDocDialog:{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container eduNormalVipDocDialog need-wealth">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',t.publicTpl.wealth_doc_ad,'       <div class="vip-select-layout">\u60a8\u7684','           <div class="vip-select-box">','               <span class="vip-select-box-value">\u6559\u80b2\u4e0b\u8f7d\u7279\u6743</span>','               <i class="vip-select-box-btn"></i>','               <ul class="option-list">','                   <li class="option checked"><a href="javascript:;" data-type="1">\u6559\u80b2\u4e0b\u8f7d\u7279\u6743</a></li>','                   <li class="option"><a href="javascript:;" data-type="2">'+t.prerogativeTxt+"</a></li>","               </ul>","           </div>",'           \u5269\u4f59\uff1a<em class="vip-ticket-count">0</em>\u6b21',"       </div>",'       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc" style="display:none"><b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u8f6c\u5b58</b></a>','       <a href="/cashier/browse/vippackagecashier?cashier_code=zcwangpan_joinvip&dqStatCode=31_23_38_39&from_doc='+s.DocInfo.docId+'" class="ui-bz-btn-senior btn_goto_buyvip" style="display:none"><b class="ui-bz-btn-p-16 ui-bz-btc">\u8865\u5145VIP\u4e0b\u8f7d\u7279\u6743</b></a>','       <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"   </div>",function(){return t.options.isShowVcode?t.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-btn"></p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u8f6c\u5b58\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){this.$el.html(this.tpl()),this.initDom(),this.addEventListener(),this._UI_init(+this.options.edu_download_ticket>0&&+this.options.ticketCount>0||+this.options.edu_download_ticket>0?1:2)},initDom:function(){this.E=this.E||{},this.E.$vipSelectBoxBtn=this.$el.find(".vip-select-box-btn"),this.E.$optionList=this.$el.find(".option-list"),this.E.$vipTicketCount=this.$el.find(".vip-ticket-count"),this.E.$vipSelectBoxValue=this.$el.find(".vip-select-box-value"),this.E.$btnDiaologDowndoc=this.$el.find(".btn-diaolog-downdoc"),this.E.$btnGotoBuyvip=this.$el.find(".btn_goto_buyvip"),this.E.$bottomBtn=this.$el.find(".bottom-btn"),this.E.$btnUDownTicket=this.$el.find(".btn-uDownTicket")},addEventListener:function(){var t=this;this.$el.on("click",".btn-uDownTicket",function(){t.close(),t._changeDownloadTicket()}),this.$el.on("click",function(){t.E.$vipSelectBoxBtn.removeClass("vip-select-box-btn-cur"),t.E.$optionList.hide()}),this.E.$vipSelectBoxBtn.on("click",function(i){i.stopPropagation(),o(this).hasClass("vip-select-box-btn-cur")?(o(this).removeClass("vip-select-box-btn-cur"),t.E.$optionList.hide()):(o(this).addClass("vip-select-box-btn-cur"),t.E.$optionList.show())}),this.E.$optionList.find(".option a").on("click",function(){var i=o(this),n=i.data("type");t._UI_init(n)}),this.E.$btnDiaologDowndoc.on("click",function(){return t.vcodePass?(t.vcodeError(),!1):o(this).hasClass("download-btn-disable")?!1:(o(this).addClass("download-btn-disable"),o(this).find("b").html("\u6b63\u5728\u8f6c\u5b58\uff0c\u8bf7\u7a0d\u540e..."),e.lang.eventCenter.addEventListener("wangpan.closeDialog",function(){o(document).find(".warning-dialog .btn-diaolog-downdoc").removeClass("download-btn-disable"),o(document).find(".warning-dialog .btn-diaolog-downdoc b").html("\u8f6c\u5b58\u5230\u767e\u5ea6\u7f51\u76d8"),t.close()}),void e.lang.eventCenter.dispatchEvent("wangpan.toGetFile"))})},_UI_init:function(t){var i=this;this.E.$optionList.find("a[data-type='"+t+"']").eq(0).parent().siblings().removeClass("checked").end().addClass("checked"),1===+t&&(i.E.$vipSelectBoxValue.html("\u6559\u80b2\u4e0b\u8f7d\u7279\u6743"),i.E.$vipTicketCount.html(i.options.edu_download_ticket),+i.options.edu_download_ticket>0?(i.E.$btnDiaologDowndoc.show(),i.E.$btnGotoBuyvip.hide(),i.E.$bottomBtn.html('<a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u8f6c\u5b58</a>')):(i.E.$btnDiaologDowndoc.hide(),i.E.$btnGotoBuyvip.show(),i.E.$bottomBtn.html('<a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u8f6c\u5b58</a>')),document.downloadForm.useTicket.value=2),2===+t&&(i.E.$vipSelectBoxValue.html(i.prerogativeTxt),i.E.$vipTicketCount.html(i.options.ticketCount),+i.options.ticketCount>0?(i.E.$btnDiaologDowndoc.show(),i.E.$btnGotoBuyvip.hide(),i.E.$bottomBtn.html('<a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u8f6c\u5b58</a>')):(i.E.$btnDiaologDowndoc.hide(),i.E.$btnGotoBuyvip.show(),i.E.$bottomBtn.html('<a href="javascript:;" class="btn-uDownTicket">\u4f7f\u7528\u4e0b\u8f7d\u5238\u8f6c\u5b58</a>')),document.downloadForm.useTicket.value=1)}},"vipDocDialog-enough":{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',t.publicTpl.wealth_doc_ad,'       <div class="ticket-num-box">','       <div class="ticket-num-container">','       <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\uff1a<b class=" number-red">'+t.options.needUticket+"</b>\u4e0b\u8f7d\u5238</p>",'       <p class="ticket-num-msg msg3">\u6301\u6709\uff1a<b class="number-red">'+t.options.UticketCount+"</b>\u4e0b\u8f7d\u5238</p>","       </div>","       </div>",'       <div class="blank20"></div>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc"><b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u8f6c\u5b58</b></a>','       <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"   </div>",function(){return t.options.isShowVcode?t.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-btn"><a href="javascript:;" class="btn-uTicket">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u8f6c\u5b58</a></p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u8f6c\u5b58\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){c.xsend(1,101866),this.$el.html(this.tpl()),this.addEventListener()},addEventListener:function(){var t=this;this.$el.on("click",".btn-diaolog-downdoc",function(){return t.vcodePass?(t.vcodeError(),!1):o(this).hasClass("download-btn-disable")?!1:(c.xsend(1,101867),o(this).addClass("download-btn-disable"),o(this).find("b").html("\u6b63\u5728\u8f6c\u5b58\uff0c\u8bf7\u7a0d\u540e..."),e.lang.eventCenter.addEventListener("wangpan.closeDialog",function(){o(document).find(".warning-dialog .btn-diaolog-downdoc").removeClass("download-btn-disable"),o(document).find(".warning-dialog .btn-diaolog-downdoc b").html("\u8f6c\u5b58\u5230\u767e\u5ea6\u7f51\u76d8"),t.close()}),document.downloadForm.useTicket.value=0,void e.lang.eventCenter.dispatchEvent("wangpan.toGetFile"))}),this.$el.on("click",".btn-uTicket",function(){t.close(),t._changePrivilegeTicket(t.options)})}},"vipDocDialog-enough-afterexchage":{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac dialog-inner-join">',t.publicTpl.wealth_doc_ad,'       <div class="ticket-num-box">','       <div class="ticket-num-container">','       <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\uff1a<b class=" number-red">'+t.options.needUticket+"</b>\u4e0b\u8f7d\u5238</p>",'       <p class="ticket-num-msg msg3">\u6301\u6709\uff1a<b class="number-red">'+t.options.UticketCount+"</b>\u4e0b\u8f7d\u5238",'       <span class="ps">\uff08\u53ef\u7528'+t.options.NTicket*t.options.exchangeRate+"\u79ef\u5206\u5151\u6362",t.options.NTicket+"\u4e0b\u8f7d\u5238\uff09</span></p>","       </div>","       </div>",'       <div class="ticket-btn-container ticket-btn-container-vip mt20">','           <a href="javascript:;" class="ui-bz-btn-senior">','               <b class="ui-bz-btn-p-16 ui-bz-btc btn-ticket-exchange">\u5151\u6362\u540e\u8f6c\u5b58</b>',"           </a>",'           <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"       </div>","   </div>",'   <div class="ticket-no-wealth-container hide">','       <div class="clear"></div>','       <div class="ticket-raido-container hidden">','           <div class="ticket-raido-bg">',"           </div>",'<a class="btn-green btn-l ticket-exchange-download-btn ticket-exchange-download-btn-disable" href="javascript:;">\u5151\u6362\u5e76\u8f6c\u5b58</a>','           <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"       </div>","   </div>",function(){return t.options.isShowVcode?t.publicTpl.vcodeTpl:void 0}(),'   <div class="dialog-bottom">','       <p class="bottom-btn"><a href="javascript:;" class="btn-uTicket">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u8f6c\u5b58</a></p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u8f6c\u5b58\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){c.xsend(1,101868),this.options.NTicket=this.options.needUticket-this.options.UticketCount,this.$el.html(this.tpl()),this.addEventListener(),this.$btn=this.$el.find(".ticket-exchange-download-btn"),this.$el.find(".ticket-no-wealth-container").removeClass("hide")},isDisableDownloadBtn:function(t){var i=this,n=this.options;return t=+t,t&&!(t>n.canUticket||0===t||t>500||t+n.UticketCount<n.needUticket)?(i.$btn.removeClass("ticket-exchange-download-btn-disable"),!0):(i.$btn.addClass("ticket-exchange-download-btn-disable"),!1)},getDefaultTicket:function(){var t=this,i=this.options;return i.canUticket>=50&&i.NTicket<=50?50:i.canUticket>=30&&i.NTicket<=30?30:i.canUticket>=10&&i.NTicket<=10?10:i.canUticket>=5&&i.NTicket<=5?5:(i.NTicket>i.canUticket&&t.$btn.addClass("ticket-exchange-download-btn-disable"),i.canUticket)},addEventListener:function(){var t=this;this.$el.on("click",".btn-ticket-exchange",function(){c.xsend(1,101869),t.$el.find(".ticket-btn-container").addClass("hidden"),t.$el.find(".ticket-raido-container").removeClass("hidden");var i=t.getDefaultTicket(),n=new l({el:".ticket-raido-bg",allWealth:t.options.wealth,defaultTicket:i});t.isDisableDownloadBtn(i),o('input[name="target_uticket_num"]').val(i),n.on("ex:afterSelectTicket",function(i){t.isDisableDownloadBtn(i.ticket),o('input[name="target_uticket_num"]').val(i.ticket)})}),this.$el.find(".ticket-exchange-download-btn").on("click",function(){return t.vcodePass?(t.vcodeError(),!1):void(o(this).hasClass("ticket-exchange-download-btn-disable")||(c.xsend(1,101870),o(this).addClass("ticket-exchange-download-btn-disable"),o(document).find(".WkDialogDownWangpan .ticket-exchange-download-btn").html("\u6b63\u5728\u8f6c\u5b58\uff0c\u8bf7\u7a0d\u540e"),document.downloadForm.useTicket.value=0,e.lang.eventCenter.addEventListener("wangpan.closeDialog",function(){t.close()}),e.lang.eventCenter.dispatchEvent("wangpan.toGetFile")))}),this.$el.on("click",".btn-uTicket",function(){t.close(),t._changePrivilegeTicket(t.options)})}},"vipDocDialog-noenough-afterexchage":{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',t.publicTpl.wealth_doc_ad,'       <div class="ticket-num-box">','       <div class="ticket-num-container">','           <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\uff1a<b class="number-red">'+t.options.needUticket+"</b>\u4e0b\u8f7d\u5238</p>",'           <p class="ticket-num-msg msg3">\u6301\u6709\uff1a<b class="number-red">'+t.options.UticketCount+"</b>\u4e0b\u8f7d\u5238","       </div>","       </div>",'       <div class="blank20"></div>','       <a href="/cashier/browse/vippackagecashier?cashier_code=zcwangpan_joinvip&dqStatCode=31_23_38_39&from_doc='+s.DocInfo.docId+'" class="ui-bz-btn-senior log-xsend" data-logxsend="[1 101871]">','           <b class="ui-bz-btn-p-16 ui-bz-btc">\u8865\u5145VIP\u4e0b\u8f7d\u7279\u6743</b></a>','           <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"   </div>",'   <div class="dialog-bottom">','       <p class="bottom-btn"><a href="javascript:;" class="btn-uTicket">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u8f6c\u5b58</a></p>','       <p class="bottom-msg">\u56e0\u672c\u6b21\u8f6c\u5b58\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")
},init:function(){c.xsend(1,101872);var t=this;this.$el.html(this.tpl()),this.$el.on("click",".btn-uTicket",function(){t.close(),t._changePrivilegeTicket(t.options)})}},nonVipTicketsNonEnoughWeathNonEnough:{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container novip-text-box super-vip">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',t.publicTpl.wealth_doc_ad,'       <div class="save-wangpan-text1">\u8f6c\u5b58\u6587\u6863\u5230\u767e\u5ea6\u7f51\u76d8</div>','       <div class="save-wangpan-text2">\u968f\u770b\u968f\u5b58\uff0c\u597d\u8d44\u6599\u4e0d\u9519\u8fc7</div>','       <div class="user-dialog-download-btn-center">','           <a class="btn-diaolog-downdoc btn-red btn-l" href="javascript:void(0);">\u5f00\u901aVIP\uff0c\u7acb\u4eab\u8f6c\u5b58\u7279\u6743</a>',"       </div>","   </div>",'   <div class="dialog-bottom">','       <ul class="list clearfix">','           <li class="icon-share">\u4eabVIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743</li>','           <li class="icon-give middle-item">\u8d60\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743</li>','           <li class="icon-doc">100w\u7bc7\u6587\u6863\u514d\u8d39\u4e13\u4eab</li>',"       </ul>","   </div>","</div>","</div>"].join("")},init:function(){c.xsend(1,101839),this.$el.html(this.tpl()),this.addEventListener()},addEventListener:function(){var t=this,i=a.get("WkInfo").DocInfo.docId,n=[];this.$el.on("click",".btn-diaolog-downdoc",function(){c.xsend(1,101840),t.close(),n.push("/cashier/browse/vipcashier?doc_id="),n.push(i),n.push("&cashier_code=zcwangpan_joinvip"),window.open(n.join(""))})}},"nonVipDocFreeDialog-noenough-afterexchage":{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',t.publicTpl.wealth_doc_ad,'       <div class="ticket-num-box">','       <div class="ticket-num-container">','           <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\uff1a<b class="number-red">'+t.options.needUticket+"</b>\u4e0b\u8f7d\u5238</p>",'           <p class="ticket-num-msg msg3">\u6301\u6709\uff1a<b class="number-red">'+t.options.UticketCount+"</b>\u4e0b\u8f7d\u5238","       </div>","       </div>",'       <div class="blank20"></div>','       <a href="/ndcashier/browse/jiaoyuvipcashier?cashier_code=wp_joingx&from_doc='+s.DocInfo.docId+'" class="ui-bz-btn-senior log-xsend" data-logxsend="[1 101871]">','           <b class="ui-bz-btn-p-16 ui-bz-btc">VIP\u514d\u5238\u8f6c\u5b58</b></a>','           <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"   </div>",'   <div class="dialog-bottom">','       <p class="bottom-btn">','           <i class="iconfont" style="color:#2FAD85">\ue601</i>','           <a href="/cashier/browse/dispatch?cashier_code=download_pop_tips_wp" target="_blank">\u52a0\u5165VIP\uff0c\u4e0b\u8f7d\u7279\u6743\u968f\u5fc3\u7528\uff01</a>','       </p><p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){c.xsend(1,101872);this.$el.html(this.tpl())}},"nonVipDocVipFreeDialog-noenough-afterexchage":{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',t.publicTpl.wealth_doc_ad,'       <div class="ticket-num-box">','       <div class="ticket-num-container">','           <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\uff1a<b class="number-red">'+t.options.needUticket+"</b>\u4e0b\u8f7d\u5238</p>",'           <p class="ticket-num-msg msg3">\u6301\u6709\uff1a<b class="number-red">'+t.options.UticketCount+"</b>\u4e0b\u8f7d\u5238","       </div>","       </div>",'       <div class="blank20"></div>','       <a href="/ndcashier/browse/jiaoyuvipcashier?cashier_code=wp_joinVIPfree&from_doc='+s.DocInfo.docId+'" class="ui-bz-btn-senior log-xsend" data-logxsend="[1 101871]">','           <b class="ui-bz-btn-p-16 ui-bz-btc">VIP\u514d\u8d39\u8f6c\u5b58</b></a>','           <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"   </div>",'   <div class="dialog-bottom">','       <p class="bottom-btn">','           <i class="iconfont" style="color:#2FAD85">\ue601</i>','           <a href="/cashier/browse/dispatch?cashier_code=download_pop_tips_wp" target="_blank">\u52a0\u5165VIP\uff0c\u4e0b\u8f7d\u7279\u6743\u968f\u5fc3\u7528\uff01</a>','       </p><p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"   </div>","</div>","</div>"].join("")},init:function(){c.xsend(1,101872);this.$el.html(this.tpl())}},nonVipTicketsEnough:{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac">',t.publicTpl.wealth_doc_ad,'       <div class="ticket-num-box">','       <div class="ticket-num-container">','       <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\uff1a<b class=" number-red">'+t.options.needUticket+"</b>\u4e0b\u8f7d\u5238</p>",'       <p class="ticket-num-msg msg3">\u6301\u6709\uff1a<b class="number-red">'+t.options.UticketCount+"</b>\u4e0b\u8f7d\u5238</p>","       </div>","       </div>",'       <div class="blank20"></div>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc"><b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u8f6c\u5b58</b></a>','       <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"   </div>",function(){return t.options.isShowVcode?t.publicTpl.vcodeTpl:void 0}(),"</div>","</div>"].join("")},init:function(){c.xsend(1,101866),this.$el.html(this.tpl()),this.addEventListener()},addEventListener:function(){var t=this;this.$el.on("click",".btn-diaolog-downdoc",function(){return t.vcodePass?(t.vcodeError(),!1):o(this).hasClass("download-btn-disable")?!1:(c.xsend(1,101867),o(this).addClass("download-btn-disable"),o(this).find("b").html("\u6b63\u5728\u8f6c\u5b58\uff0c\u8bf7\u7a0d\u540e..."),e.lang.eventCenter.addEventListener("wangpan.closeDialog",function(){o(document).find(".warning-dialog .btn-diaolog-downdoc").removeClass("download-btn-disable"),o(document).find(".warning-dialog .btn-diaolog-downdoc b").html("\u8f6c\u5b58\u5230\u767e\u5ea6\u7f51\u76d8"),t.close()}),document.downloadForm.useTicket.value=0,void e.lang.eventCenter.dispatchEvent("wangpan.toGetFile"))}),this.$el.on("click",".btn-uTicket",function(){t.close(),t._changePrivilegeTicket(t.options)})}},nonVipTicketsNonEnoughWeathEnough:{tpl:function(){var t=this;return[t.publicTpl.dialogAdWrap,'<div class="dialog-container need-wealth">',t.publicTpl.publicHdTpl,'   <div class="dialog-inner tac dialog-inner-join">',t.publicTpl.wealth_doc_ad,'       <div class="ticket-num-box">','       <div class="ticket-num-container">','       <p class="ticket-num-msg msg1 coupon-need">\u6240\u9700\uff1a<b class=" number-red">'+t.options.needUticket+"</b>\u4e0b\u8f7d\u5238</p>",'       <p class="ticket-num-msg msg3">\u6301\u6709\uff1a<b class="number-red">'+t.options.UticketCount+"</b>\u4e0b\u8f7d\u5238",'       <span class="ps">\uff08\u53ef\u7528'+t.options.NTicket*t.options.exchangeRate+"\u79ef\u5206\u5151\u6362",t.options.NTicket+"\u4e0b\u8f7d\u5238\uff09</span></p>","       </div>","       </div>",'       <div class="ticket-btn-container ticket-btn-container-vip mt20">','           <a href="javascript:;" class="ui-bz-btn-senior">','               <b class="ui-bz-btn-p-16 ui-bz-btc btn-ticket-exchange">\u5151\u6362\u540e\u8f6c\u5b58</b>',"           </a>",'           <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"       </div>","   </div>",'   <div class="ticket-no-wealth-container hide">','       <div class="clear"></div>','       <div class="ticket-raido-container hidden">','           <div class="ticket-raido-bg">',"           </div>",'<a class="btn-green btn-l ticket-exchange-download-btn ticket-exchange-download-btn-disable" href="javascript:;">\u5151\u6362\u5e76\u8f6c\u5b58</a>','           <div class="dialog-bottom-btn-text">\u8f6c\u5b58\u540e\u53ef\u6c38\u4e45\u514d\u8d39\u4e0b\u8f7d</div>',"       </div>","   </div>",function(){return t.options.isShowVcode?t.publicTpl.vcodeTpl:void 0}(),"</div>","</div>"].join("")},init:function(){c.xsend(1,101868),this.options.NTicket=this.options.needUticket-this.options.UticketCount,this.$el.html(this.tpl()),this.addEventListener(),this.$btn=this.$el.find(".ticket-exchange-download-btn"),this.$el.find(".ticket-no-wealth-container").removeClass("hide")},isDisableDownloadBtn:function(t){var i=this,n=this.options;return t=+t,t&&!(t>n.canUticket||0===t||t>500||t+n.UticketCount<n.needUticket)?(i.$btn.removeClass("ticket-exchange-download-btn-disable"),!0):(i.$btn.addClass("ticket-exchange-download-btn-disable"),!1)},getDefaultTicket:function(){var t=this,i=this.options;return i.canUticket>=50&&i.NTicket<=50?50:i.canUticket>=30&&i.NTicket<=30?30:i.canUticket>=10&&i.NTicket<=10?10:i.canUticket>=5&&i.NTicket<=5?5:(i.NTicket>i.canUticket&&t.$btn.addClass("ticket-exchange-download-btn-disable"),i.canUticket)},addEventListener:function(){var t=this;this.$el.on("click",".btn-ticket-exchange",function(){c.xsend(1,101869),t.$el.find(".ticket-btn-container").addClass("hidden"),t.$el.find(".ticket-raido-container").removeClass("hidden");var i=t.getDefaultTicket(),n=new l({el:".ticket-raido-bg",allWealth:t.options.wealth,defaultTicket:i});t.isDisableDownloadBtn(i),o('input[name="target_uticket_num"]').val(i),n.on("ex:afterSelectTicket",function(i){t.isDisableDownloadBtn(i.ticket),o('input[name="target_uticket_num"]').val(i.ticket)})}),this.$el.find(".ticket-exchange-download-btn").on("click",function(){return t.vcodePass?(t.vcodeError(),!1):void(o(this).hasClass("ticket-exchange-download-btn-disable")||(c.xsend(1,101870),o(this).addClass("ticket-exchange-download-btn-disable"),o(document).find(".WkDialogDownWangpan .ticket-exchange-download-btn").html("\u6b63\u5728\u8f6c\u5b58\uff0c\u8bf7\u7a0d\u540e"),document.downloadForm.useTicket.value=0,e.lang.eventCenter.addEventListener("wangpan.closeDialog",function(){t.close()}),e.lang.eventCenter.dispatchEvent("wangpan.toGetFile")))}),this.$el.on("click",".btn-uTicket",function(){t.close(),t._changePrivilegeTicket(t.options)})}}};n.exports=v});
;define("wkview:widget/ui/view/down_wangpan/down_doc.js",function(i,e,o){var a=i("wkcommon:widget/lib/tangram/base/base.js"),t=i("wkcommon:widget/ui/js_core/dialog/dialog.js"),n=(i("wkview:widget/ui/view/operate/operate.js"),i("wkview:widget/ui/view/favorite/favorite.js"),i("wkcommon:widget/lib/fis/data/data.js")),d=i("wkcommon:widget/ui/js_core/log/log.js"),c=i("wkcommon:widget/ui/js_core/util/util.js"),s=(i("wkcommon:widget/ui/js_core/login/login.js").login,i("wkcommon:widget/ui/lib/cookie/cookie.js"),n.get("WkInfo")),u=i("wkcommon:widget/ui/lib/jquery/jquery.js"),l=(i("wkview:widget/ui/file_downloader_ui/file_downloader_ui.js"),i("wkcommon:widget/ui/lib/cookie/cookie.js"),i("wkview:widget/ui/view/down_wangpan/down_org_vip.js"),i("wkview:widget/ui/dialog_down_doc/dialog_down_doc.js"),i("wkcommon:widget/ui/js_core/xform/xform.js"),i("wkview:widget/ui/view/down_wangpan/dialog_down_doc/dialog_down_doc.js")),r=(i("wkview:widget/doc_download_main/submit.js"),function(){var i=null;return function(){return i||(i=t.dialogCreate()),i}}()),p=function(){var i=function(){this.init.apply(this)};return u.extend(i.prototype,{userData:{},publicData:{isInit:!1,dialogWindow:!1},init:function(){var i=this;i.WkInfo=s,i.UserInfo=i.WkInfo.UserInfo,i.UserInfo&&(i.isCreater=i.UserInfo.isCreater),i.docSize=(i.WkInfo.DocInfo.size/1024+"").replace(/^(\d+\.\d)\d+$/,"$1"),i.urlInterfaceGetRepeatDown=i.WkInfo.Urls.interfaceGetRepeatDown,i.docId=i.WkInfo.DocInfo.docId,i.isPaymentDoc=i.WkInfo.DocInfo.isPaymentDoc,i.isPaied=i.WkInfo.DocInfo.ispaied,i.is_edu_doc=parseInt(i.WkInfo.DocInfo.is_edu_doc,10),i.isTicket=parseInt(i.WkInfo.DocInfo.docTicket,10),i.endTime=parseInt((new Date(2015,8,30,23,59,59).getTime()-(new Date).getTime())/1e3,10),i.endTime=i.endTime>0?1:0,i.isEduLimitedDoc=i.is_edu_doc&&!i.isPaymentDoc&&i.isTicket,this.publicData.isInit===!1&&(a.lang.eventCenter.addEventListener("wangpan.toGetFile",function(){i.getFile()}),a.lang.eventCenter.addEventListener("wangpan.checkVipDownload",function(){i.checkVipDownload()}),this.publicData.isInit=!0)},start:function(){var i=this;if(i.publicData.dialogWindow=!1,!i.UserInfo)return void window.location.reload();var e=u.ajax({url:i.urlInterfaceGetRepeatDown,cache:!1,type:"post",dataType:"json",data:{atype:"getRepeatDown",doc_id:i.docId}});u.when(e).always(function(e){if(2===e)i.userData.hasDownloaded=1;else if(200008===e)return i.wangpanAlert(e),!1;u.ajax({type:"get",async:!1,cache:!1,url:"/user/interface/getvipfreedoc?doc_id="+i.docId,success:function(e){var o=!1;e&&0===+e.status.code&&e.data.is_vip_free_doc&&(o=!0),n.set("VipFreeDoc",o),i.isVipDoc=o}}),i.getUserDownloadTicket()})},getUserDownloadTicket:function(){var i=this;u.ajax({url:"/customer/interface/getuserdownloadticket",type:"post"}).done(function(e){var o={};e&&0===e.status.code&&(o=e.data),i.userData.UticketCount=parseInt(o.uticket,10)>0?o.uticket:0,i.userData.exchangeRate=parseInt(o.exchangeRate,10)||4,i.userData.canDownload=parseInt(o.canDownload,10)||1,i.userData.needUticket=Number(i.WkInfo.DocInfo.docTicket),i.userData.wealth=~~o.wealth||~~i.UserInfo.wealth,i.userData.canUticket=parseInt(i.userData.wealth/i.userData.exchangeRate,10),i.userData.isPaymentDoc=i.isPaymentDoc,i.userData.price=Number(i.WkInfo.DocInfo.price),i.userData.isShowVcode=i.isShowVcode,i.userData.isvip=+o.isvip,i.userData.ticketCount=parseInt(o.ticket,10)>0?o.ticket:0,i.userData.is_edu_vip=parseInt(o.edu_vip_data.is_edu_vip,10),i.userData.is_jiaoyu_vip=o.jiaoyu_vip_data&&o.jiaoyu_vip_data.is_jiaoyu_vip?parseInt(o.jiaoyu_vip_data.is_jiaoyu_vip,10):0,i.userData.edu_download_ticket=parseInt(o.edu_vip_data.edu_download_ticket,10)>0?parseInt(o.edu_vip_data.edu_download_ticket,10):0,i.userData.is_mini_vip=+o.mini_vip,i.userData.is_mini_time=+o.remain_time>0?+o.remain_time:0,i.userData.check_new_user_gift=o.check_new_user_gift||0,i.userData.isVipDoc=i.isVipDoc,i.userData.isVipDocLimited=i.isVipDocLimited,i.userData.vipDocLimitedTime=i.vipDocLimitedTime,i.userData.isBindgot=o.is_bindgot,i.userData.finishAppTask=o.complete_wkapptask,i.userData.finishYdAppTask=o.complete_ydcheckintask,i.dialogDownDoc(o,i.userData)})},dialogDownDoc:function(){var i=this;i.checkVipDownload()||i.checkNoVipDownLoadFlow()},checkVipDownload:function(){var i=this,e=i.userData;if(1===e.hasDownloaded||i.isCreater)return i.publicData.dialogWindow||(i.publicData.dialogWindow=l.get("setToastShow",e),i.publicData.dialogWindow.show()),i.publicData.dialogWindow.show(),!0;if(0===parseInt(e.needUticket,10))return i.publicData.dialogWindow||(i.publicData.dialogWindow=l.get("freeDocDialog",e),i.publicData.dialogWindow.setDialog(l)),i.publicData.dialogWindow.show(),!0;if((1===e.isvip||1===e.is_edu_vip||1===e.is_jiaoyu_vip)&&i.isVipDoc)return i.publicData.dialogWindow||(i.publicData.dialogWindow=l.get("vipFreeDocDialog",e),i.publicData.dialogWindow.setDialog(l)),i.publicData.dialogWindow.show(),!0;if(1===i.is_edu_doc){if((1===e.isvip||1===e.is_jiaoyu_vip)&&1===e.is_edu_vip&&1!==e.is_mini_vip)return i.publicData.dialogWindow||(i.publicData.dialogWindow=l.get("eduNormalVipDocDialog",e),i.publicData.dialogWindow.setDialog(l)),i.publicData.dialogWindow.show(),!0;if(1===e.is_edu_vip)return i.publicData.dialogWindow||(i.publicData.dialogWindow=l.get("eduNormalVipDocDialog",e),i.publicData.dialogWindow.setDialog(l)),i.publicData.dialogWindow.show(),!0;if(1===e.isvip||1===e.is_jiaoyu_vip)return e.ticketCount>0?i.publicData.dialogWindow||(i.publicData.dialogWindow=l.get("normalVipTicketDocDialog",e),i.publicData.dialogWindow.setDialog(l)):i.publicData.dialogWindow||(i.publicData.dialogWindow=l.get("normalVipNoTicketDocDialog",e),i.publicData.dialogWindow.setDialog(l)),i.publicData.dialogWindow.show(),!0}return 1===i.is_edu_doc||1!==e.isvip&&1!==e.is_edu_vip&&1!==e.is_jiaoyu_vip?!1:(e.ticketCount>0?i.publicData.dialogWindow||(i.publicData.dialogWindow=l.get("normalVipTicketDocDialog",e),i.publicData.dialogWindow.setDialog(l)):i.publicData.dialogWindow||(i.publicData.dialogWindow=l.get("normalVipNoTicketDocDialog",e),i.publicData.dialogWindow.setDialog(l)),i.publicData.dialogWindow.show(),!0)},checkNoVipDownLoad:function(){var i=this,e=i.userData,o="nonVipTicketsNonEnoughWeathNonEnough";i.publicData.dialogWindow=l.get(o,e),i.publicData.dialogWindow.show(function(i){i.$el.find(".close-btn").show()})},checkNoVipDownLoadFlow:function(){var i=this,e=i.userData;if(1===e.hasDownloaded||i.isCreater)return i.publicData.dialogWindow||(i.publicData.dialogWindow=l.get("setToastShow",e),i.publicData.dialogWindow.show()),i.publicData.dialogWindow.show(),!0;if(1!==e.isvip&&1!==e.is_edu_vip&&1!==e.is_jiaoyu_vip&&e.UticketCount>=e.needUticket)return i.publicData.dialogWindow=l.get("nonVipTicketsEnough",e),i.publicData.dialogWindow.show(function(i){i.$el.find(".close-btn").show(),d.xsend(1,100115)}),!0;var o;return 1!==e.isvip&&1!==e.is_edu_vip&&1!==e.is_jiaoyu_vip&&e.UticketCount<e.needUticket&&e.canUticket+e.UticketCount>=e.needUticket?(o="nonVipTicketsNonEnoughWeathEnough",i.publicData.dialogWindow=l.get(o,e),i.publicData.dialogWindow.show(function(i){i.$el.find(".close-btn").show(),d.xsend(1,100115)}),!0):1!==e.isvip&&1!==e.is_edu_vip&&1!==e.is_jiaoyu_vip&&e.UticketCount<e.needUticket&&e.canUticket+e.UticketCount<e.needUticket?(o=i.isVipDoc?"nonVipDocVipFreeDialog-noenough-afterexchage":"nonVipDocFreeDialog-noenough-afterexchage",i.publicData.dialogWindow=l.get(o,e),i.publicData.dialogWindow.show(function(i){i.$el.find(".close-btn").show(),d.xsend(1,100117)}),!0):(i.publicData.dialogWindow&&i.publicData.dialogWindow.show(),!0)},getFile:function(i){var e=this,o=!1;"payed"===i?(r().confirm({title:"\u4e0b\u8f7d\u6587\u6863",content:'<iframe width="460" height="220" name="runDown" frameborder="0"></iframe>',width:500,height:220,onRendered:function(){e.postGetFile()}}),r().hide()):(r().confirm({title:"\u4e0b\u8f7d\u6587\u6863",content:'<iframe name="runDown" frameborder="0"></iframe>',width:500,btnText:["\u4e0b\u8f7d","\u53d6\u6d88"],onRendered:function(){e.postGetFile(),o||(o=!0,"1"===document.downloadForm.storage.value&&a.ajax.get("/user/submit/foldutimeupdate?atype=updateFoldUTime&fold_id=0&_t="+(new Date).getTime()))},onOk:function(){e.postGetFile(),"first"!==i&&"ticket"!==i||o||(o=!0,"1"===document.downloadForm.storage.value&&a.ajax.get("/user/submit/foldutimeupdate?atype=updateFoldUTime&fold_id=0&_t="+(new Date).getTime()))}}),r().hide())},bindSaveEvent:function(){var i=r().el,e=a.dom.getAttr(i,"data-is-bind-save");"binded"!==e&&(c.delegate(i,".choice-for-saved","click",function(){this.checked?document.downloadForm.storage.value=1:(document.downloadForm.storage.value=0,d.send("down","cancel_copy"))}),a.dom.setAttr(i,"data-is-bind-save","binded")),document.downloadForm.storage.value=1},wangpanAlert:function(i){0===i?d.xsend(1,101841):d.xsend(1,101843);var e={init:function(i){var e=this;e.tmpl="","success"===i&&(e.tmpl='<div id="wp-dialog-wrap">\n<div class="mask"></div>\n<div class="wp-wrap">\n<div class="wp-dialog">\n<div class="dialog-left-greenbar"></div>\n<div class="dialog-header">\n<div class="close-btn"></div>\n<div class="dialog-titles">\u8f6c\u5b58\u5230\u767e\u5ea6\u7f51\u76d8</div>\n</div>\n<div class="dialog-container-wp">\n<div class="dialog-text-1">\u5df2\u8f6c\u5b58\u5230\u767e\u5ea6\u7f51\u76d8</div>\n<div class="dialog-text-2">\u5b58\u50a8\u5728\u767e\u5ea6\u7f51\u76d8>\u6765\u81ea\uff1a\u767e\u5ea6\u6587\u5e93</div>\n</div>\n<div class="youxiang-dialogbox">\n<a href="javascript:void(0);"\n             class="quality-award-dialogbtn success-btn-click">\n\u53bb\u767e\u5ea6\u7f51\u76d8\u67e5\u770b</a>\n</div>\n</div>\n</div>\n</div>'),u("#wp-dialog-wrap").length<=0&&u("body").append(e.tmpl),u("#wp-dialog-wrap .mask").css({width:u(document).width(),height:u(document).height()}),e.bindEvent(),e.show()},bindEvent:function(){var i=this;u("#wp-dialog-wrap").on("click",".close-btn",function(){i.hide()}),u("#wp-dialog-wrap").on("click",".success-btn-click",function(){d.xsend(1,101842),window.open("https://pan.baidu.com/disk/home")})},show:function(){u("#wp-dialog-wrap").show()},hide:function(){u("#wp-dialog-wrap").hide()}},o={init:function(i,e){var o=this;o.$toast=u(['<div class="wangpan-toast">','<span class="content"></span>',"</div>"].join("")),e&&o.$toast.css("width",e+"px"),o.$toast.find(".content").text(i),o.$toast.appendTo(document.body)},change:function(i,e){var o=this;e&&o.$toast.css("width",e+"px"),o.$toast.find(".content").text(i)},hide:function(){u(".wangpan-toast").remove()}};switch(i){case 0:e.init("success");break;case 4:o.init("\u8f6c\u5b58\u5931\u8d25\uff0c\u60a8\u53ef\u5c1d\u8bd5\u4e0b\u8f7d","280"),setTimeout(function(){o.hide()},1e3);break;case 5:o.init("\u4eca\u65e5\u8f6c\u5b58\u6b21\u6570\u8fbe\u5230\u4e0a\u9650\uff0c\u60a8\u53ef\u5c1d\u8bd5\u4e0b\u8f7d","280"),setTimeout(function(){o.hide()},1e3);break;case 11:o.init("\u60a8\u7684\u7f51\u76d8\u5b58\u50a8\u7a7a\u95f4\u5df2\u6ee1\uff0c\u53ef\u5c1d\u8bd5\u4e0b\u8f7d","280"),setTimeout(function(){o.hide()},3e3);break;case 10:o.init("\u8f6c\u5b58\u51fa\u4e86\u70b9\u95ee\u9898\uff0c\u518d\u8bd5\u4e00\u4e0b","280"),setTimeout(function(){o.hide()},1e3);break;case 200008:o.init("\u8d26\u53f7\u5f02\u5e38\uff0c\u8f6c\u5b58\u5931\u8d25\u3002\u60a8\u53ef\u5c1d\u8bd5\u4e0b\u8f7d","280"),setTimeout(function(){o.hide()},1e3);break;default:o.init("\u8f6c\u5b58\u5931\u8d25\uff0c\u60a8\u53ef\u5c1d\u8bd5\u4e0b\u8f7d","280"),setTimeout(function(){o.hide()},1e3)}},postGetFile:function(){var i=this,e=window.postVcode||0,o=window.postVinput||0,t={};t.ct=u(document.downloadForm).find("input[name=ct]").val(),t.doc_id=u(document.downloadForm).find("input[name=doc_id]").val(),t.retType=u(document.downloadForm).find("input[name=retType]").val(),t.sns_type=u(document.downloadForm).find("input[name=sns_type]").val(),t.storage=u(document.downloadForm).find("input[name=storage]").val(),t.useTicket=u(document.downloadForm).find("input[name=useTicket]").val(),t.target_uticket_num=u(document.downloadForm).find("input[name=target_uticket_num]").val(),t.downloadToken=u(document.downloadForm).find("input[name=downloadToken]").val(),t.sz=u(document.downloadForm).find("input[name=sz]").val(),t.v_code=e,t.vinput=o,t.req_vip_free_doc=u(document.downloadForm).find("input[name=req_vip_free_doc]").val(),t.dump_doc="bd_pan",t.dump_doc_src_type="110",u.ajax({type:"POST",dataType:"json",url:"/user/submit/dumpdocbydownload",data:t,success:function(e){return e&&e.status?(a.lang.eventCenter.dispatchEvent("wangpan.closeDialog",{code:e.status.code}),void i.wangpanAlert(e.status.code)):(toast.change("\u8f6c\u5b58\u5931\u8d25"),void setTimeout(function(){toast.hide()},1e3))}})}}),i}(),w=function(){var i=new p;return i};o.exports.downDocCreate=w,o.exports.downWangpanDoc=p});
;define("wkview:widget/ui/view/doc_share/doc_share.js",function(e,t,o){var n=e("wkcommon:widget/lib/tangram/base/base.js"),a=e("wkcommon:widget/ui/js_core/dialog/dialog.js"),i=e("wkcommon:widget/lib/fis/data/data.js"),c=i.get("WkInfo"),r=(i.get("UserInfo"),e("wkcommon:widget/ui/js_core/log/log.js")),s=function(){var e=null;return function(){return e||(e=a.dialogCreate()),e}}(),l=function(){var e=function(e){this.vo=e};return n.object.extend(e.prototype,{init:function(){this.toggleSize()},getEl:function(){return n.g(this.vo.el)},show:function(){var e=n.g(this.vo.el),t=n.g(this.vo.panel);e.style.display="block"==e.style.display?"none":"block",t&&(t.style.display="block"==t.style.display?"none":"block"),this.bind(),this.setCode("normal")},bind:function(){var e=this,t=function(){var e=c.DocInfo.docType;return"txt"==e?"txt":"ppt"==e||"pptx"==e?"ppt":"doc"}(),o=function(){setTimeout(function(){n.lang.eventCenter.dispatchEvent("show-share-panel")},0)};n.event.on(this.vo.view,"click",function(){r.xsend(1,102204,{index:"wkview_2"});var n="normal"==e.statusType?!0:!1,a={viewImg:n?"450-500":"630-500",viewSize:n?"450*500":"630*500",width:n?520:700,height:n?660:660,content:'<div class="viewReader"><p><img src="https://edu-wenku.bdimg.com/icms_transform/img/iknow/docshare/'+t+'-{viewImg}.png" alt="" /></p>\u5c3a\u5bf8 {viewSize}pix</div>'};s().alert({title:"\u5206\u4eab\u6587\u6863",content:a.content.replace(/{(viewImg|viewSize)}/g,function(e,t){return a[t]}),width:a.width,height:a.height,btnText:["\u8fd4\u56de"],onOk:function(){s().hide(),o()},onClosed:function(){return o(),!0}})});var a=n.dom.g(this.vo.closePanel);a&&n.event.on(a,"click",function(){var t=n.g(e.vo.el),o=n.g(e.vo.panel);t.style.display="none",o&&(o.style.display="none")}),n.event.on(this.vo.copy,"click",function(){e.copyToClipboard()})},setCode:function(e){var t=this,o=this.vo.toggleSize,a=this.vo.codeText,i=['<object width="{width}" height="{height}" align="middle" id="reader" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000">','<param value="window" name="wmode">','<param value="true" name="allowfullscreen">','<param name="allowscriptaccess" value="always">','<param value="{value}" name="movie">','<embed width="{width}" align="middle" height="{height}" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" name="reader" src="{value}" wmode="window" allowscriptaccess="always" bgcolor="#FFFFFF" ver="9.0.0" allowfullscreen="true"></embed>',"</object>"].join(""),r=function(e){var t="http://wenku.baidu.com/static/flash/{reader}?docurl=http://wenku.baidu.com/play&amp;docid={docId}&amp;title={docTitle}&amp;doctype={docType}&amp;fpn={pg}&amp;npn={pg}&amp;readertype=external&catal={catal}&amp;cdnurl={cdn}",o={reader:"txt"===c.DocInfo.docType?"txtreader.swf":"apireader.swf",docId:c.DocInfo.docId,docTitle:encodeURIComponent(c.DocInfo.title),docType:c.DocInfo.docType,pg:"txt"==c.DocInfo.docType?50:5,catal:c.DocInfo.catal,cdn:"//wktxt.bdimg.com/play"},t=(c.DocInfo.readerVersion,t.replace(/{(reader|docId|docTitle|docType|pg|catal|cdn)}/g,function(e,t){return o[t]}));return e.replace(/{value}/g,t)},s={normal:function(){n.g(a).value=r(i.replace(/{width}/g,450).replace(/{height}/g,500)),t.statusType="normal",n.g(o[0]).checked="true",n.g(o[1]).checked=""},big:function(){n.g(a).value=r(i.replace(/{width}/g,630).replace(/{height}/g,500)),t.statusType="big",n.g(o[0]).checked="",n.g(o[1]).checked="true"}};s[e]()},toggleSize:function(){var e=this,t=this.vo.toggleSize;n.array.each(t,function(o,a){n.event.on(n.g(o),"click",function(){n.g(t[0==a?1:0]).checked="",this.checked="true",e.setCode(/normalSize-\d+/.test(o)?"normal":"big")})})},copySuccess:function(){n.g(this.vo.copyResult).innerHTML="\u590d\u5236\u6210\u529f\uff01"},copyToClipboard:function(e){var t=this.vo,e=n.g(t.codeText).value,o="\u4f60\u7684\u6d4f\u89c8\u5668\u7981\u7528\u4e86\u81ea\u52a8\u590d\u5236\u529f\u80fd\uff0c\u8bf7\u4f60\u624b\u52a8\u590d\u5236\u3002";if(r.send("api","share",{subtype:"copy"}),window.clipboardData)window.clipboardData.clearData(),window.clipboardData.setData("Text",e)?this.copySuccess():alert(o);else if(n.browser.opera)window.location=e;else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(a){alert("\u88ab\u6d4f\u89c8\u5668\u62d2\u7edd\uff01\n\u8bf7\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165'about:config'\u5e76\u56de\u8f66\n\u7136\u540e\u5c06'signed.applets.codebase_principal_support'\u8bbe\u7f6e\u4e3a'true'")}var i=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!i)return;var c=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!c)return;c.addDataFlavor("text/unicode");var s=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString),l=(new Object,e);s.data=l,c.setTransferData("text/unicode",s,2*l.length);var d=Components.interfaces.nsIClipboard;if(!i)return!1;i.setData(c,null,d.kGlobalClipboard),n.g(t.copyResult).innerHTML="\u590d\u5236\u6210\u529f\uff01"}else alert(o);n.g(t.codeText).select(),setTimeout(function(){n.g(t.copyResult).innerHTML=""},1500)}}),e}(),d=function(e){var t=new l(e);return t.init(),t};o.exports.shareToCreate=d});
;define("wkview:widget/ui/view/doc_report/doc_report.js",function(e,t,r){var o,i,n=e("wkcommon:widget/ui/lib/jquery/jquery.js"),p=e("wkcommon:widget/lib/tangram/base/base.js"),a=e("wkcommon:widget/lib/fis/data/data.js").get("WkInfo"),s=a.DocInfo,l=e("wkcommon:widget/ui/js_core/login/login.js").login,d=e("wkcommon:widget/ui/js_core/dialog/dialog.js"),c=e("wkcommon:widget/ui/js_core/log/log.js"),u=p,_=u.dom,h=u.event,f=u.lang,v=function(){var e=null;return function(){return e||(e=d.dialogCreate()),e}}(),m=f.guid(),g=!1,b=0,w=['<div class="reportTipInner">\u4e3e\u62a5\u8fdd\u89c4\u6587\u6863</div>','<div class="reportTipInner">\u5df2\u7ecf\u4e3e\u62a5\u8fc7\u4e86\uff0c\u6b63\u5728\u5904\u7406</div>'],y=!1,x={},k={0:['<h2 class="report_success_icon"></h2>','<p class="mb10" style="text-align:left;">',"\u60a8\u7684\u4e3e\u62a5\u5df2\u6536\u5230\uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u8fdb\u884c\u6838\u5b9e\u5904\u7406\u3002","</p>",'<p style="text-align:left;line-height:18px;">',"\u611f\u8c22\u60a8\u4e3a\u7eff\u5316\u6587\u5e93\u505a\u7684\u52aa\u529b\uff0c\u6b22\u8fce\u60a8\u52a0\u5165",'<a href="/event/bqbh" target="_blank">\u7eff\u8272\u6587\u5e93\u884c\u52a8\u56e2</a>\uff0c\u5171\u540c\u7ef4\u62a4\u5065\u5eb7\u826f\u597d\u7684\u5206\u4eab\u3001\u9605\u8bfb\u73af\u5883\u3002',"</p>"].join(""),2:"<h2>\u672a\u767b\u5f55</h2><p>\u53ef\u80fd\u767b\u5f55\u65f6\u95f4\u8d85\u65f6\uff0c\u8bf7\u60a8\u91cd\u65b0\u767b\u5f55\u540e\u518d\u4e3e\u62a5\u3002</p>",3:"<h2>\u4e3e\u62a5\u5931\u8d25</h2><p>\u7528\u6237\u5df2\u88ab\u5c01\u7981</p>",5:"<h2>\u6e29\u99a8\u63d0\u793a</h2><p>\u53ef\u80fd\u662f\u60a8\u7684\u4e3e\u62a5\u8fc7\u4e8e\u9891\u7e41\uff0c\u5efa\u8bae\u60a8\u7a0d\u5fae\u4f11\u606f\u4e00\u4e0b\u518d\u8bd5\u5427</p>",6:['<p class="mb10" style="text-align:left;line-height:18px;">',"\u5df2\u7ecf\u6709\u7528\u6237\u5bf9\u6b64\u6587\u6863\u8fdb\u884c\u4e3e\u62a5\u64cd\u4f5c\uff0c\u6587\u5e93\u6b63\u5728\u6838\u5b9e\u5904\u7406\uff0c\u8bf7\u60a8\u7a0d\u540e\u91cd\u8bd5\u3002\u611f\u8c22\u60a8\u7684\u5173\u6ce8\u4e0e\u53cd\u9988\uff01","</p>",'<p style="text-align:left;line-height:18px;">',"\u611f\u8c22\u60a8\u4e3a\u7eff\u8272\u6587\u5e93\u505a\u51fa\u7684\u52aa\u529b\uff0c\u6b22\u8fce\u60a8\u52a0\u5165",'<a href="/event/bqbh" target="_blank">\u7eff\u8272\u6587\u5e93\u884c\u52a8\u56e2</a>\uff0c\u5171\u540c\u7ef4\u62a4\u5065\u5eb7\u826f\u597d\u7684\u5206\u4eab\u3001\u9605\u8bfb\u73af\u5883\u3002',"</p>"].join(""),7:"<h2>\u4e3e\u62a5\u5931\u8d25</h2><p>\u6587\u4ef6\u8fc7\u5927</p>",8:"<h2>\u4e3e\u62a5\u5931\u8d25</h2><p>\u975e\u6cd5\u6587\u4ef6\u540d</p>",9:"<h2>\u4e3e\u62a5\u5931\u8d25</h2><p>\u975e\u6cd5\u6587\u4ef6\u683c\u5f0f</p>",11:"<h2>\u4e3e\u62a5\u5931\u8d25</h2><p>\u53c2\u6570\u9519\u8bef</p>",49:['<p style="text-align:left;line-height:18px;">',"\u8fd9\u662f\u60a8\u4e0a\u4f20\u7684\u516c\u5f00\u6587\u6863\uff0c\u8bf7\u52ff\u8fdb\u884c\u4e3e\u62a5\u64cd\u4f5c\u3002\u82e5\u56e0\u4fb5\u6743\u7b49\u95ee\u9898\u4e0d\u9002\u5b9c\u516c\u5f00\uff0c\u8bf7\u5728",'<a href="/user/doc" target="_blank">\u6211\u7684\u6587\u6863</a>\u8fdb\u884c\u5220\u9664\u6216\u8f6c\u4e3a\u79c1\u6709\u6587\u6863\u64cd\u4f5c\u3002',"</p>"].join("")},j=['<form id ="reportForm_'+m+'" class="reportForm" target="_blank" style="display:none;">','<h3 style="margin-top:0;">\u662f\u7684\uff0c\u8fd9\u4e2a\u6587\u6863\u4fb5\u72af\u4e86\u6211\u6216\u8005\u4ed6\u4eba\u7684\u6743\u5229\uff1a</h3>',"<p>",'<input type="radio" value ="9" name="report_reason" id="report_reason_9" hidefocus="true"/>','<label for="report_reason_9">','<span style="color:#c00">\u76d7\u7248\u6216\u4fb5\u6743 </span>\u672a\u83b7\u5f97\u6743\u5229\u4eba\u7684\u5408\u6cd5\u6388\u6743\u3001\u4fb5\u72af\u4e2a\u4eba\u9690\u79c1\u6216\u6cc4\u9732\u5355\u4f4d\u5546\u4e1a\u673a\u5bc6',"</label>","</p>",'<div id="report_item_val9_'+m+'" class="report_item_child" style="display:none;">','<p>\u5904\u7406\u6b64\u7c7b\u4e3e\u62a5\u9700\u8981\u60a8\u63d0\u4f9b\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u6309\u5f15\u5bfc<a href="/report?doc_id='+s.docId+'" target="_blank">\u4e0a\u4f20\u76f8\u5173\u6750\u6599</a>\uff0c\u8fd9\u6837\u4f1a\u6709\u52a9\u60a8\u6210\u529f\u4e3e\u62a5\u3002</p>',"</div>",'<div id="report-reason-all">',"<h3>\u5426\uff0c\u8fd9\u4e2a\u6587\u6863\u662f\u8fdd\u89c4\u6587\u6863\uff1a</h3>","<p>",'<input type="radio" value ="1" name="report_reason" id="report_reason_1" hidefocus="true"/>','<label for="report_reason_1">\u5e7f\u544a\u6216\u5783\u573e\u4fe1\u606f</label>',"</p>","<p>",'<input type="radio" value ="2" name="report_reason" id="report_reason_2" hidefocus="true"/>','<label for="report_reason_2">\u8272\u60c5\u3001\u6deb\u79fd\u3001\u4f4e\u4fd7\u4fe1\u606f</label>',"</p>","<p>",'<input type="radio" value ="3" name="report_reason" id="report_reason_3" hidefocus="true"/>','<label for="report_reason_3">\u53cd\u653f\u5e9c\u3001\u53cd\u4eba\u7c7b\u3001\u53cd\u793e\u4f1a\u7b49\u53cd\u52a8\u4fe1\u606f</label>',"</p>","<p>",'<input type="radio" value ="4" name="report_reason" id="report_reason_4" hidefocus="true"/>','<label for="report_reason_4">\u6563\u5e03\u8d4c\u535a\u3001\u66b4\u529b\u3001\u51f6\u6740\u3001\u6050\u6016\u6216\u8005\u6559\u5506\u72af\u7f6a\u7b49\u4fe1\u606f</label>',"</p>","<p>",'<input type="radio" value ="5" name="report_reason" id="report_reason_5" hidefocus="true"/>','<label for="report_reason_5">\u4fae\u8fb1\u3001\u8bfd\u8c24\u7b49\u4eba\u8eab\u653b\u51fb\u4fe1\u606f</label>',"</p>","<p>",'<input type="radio" value ="6" name="report_reason" id="report_reason_6" hidefocus="true"/>','<label for="report_reason_6">\u6563\u5e03\u8c23\u8a00\u3001\u6270\u4e71\u793e\u4f1a\u79e9\u5e8f\uff0c\u7834\u574f\u793e\u4f1a\u7a33\u5b9a\u7b49\u4fe1\u606f</label>',"</p>","</div>",'<div id="report-reason-copr">','<p style="font-size:14px;color:#000;line-height:14px;padding-top:5px;">',"\u611f\u8c22\u60a8\u7684\u53cd\u9988\uff0c\u6211\u4eec\u5df2\u7ecf\u6536\u5230\u60a8\u7684\u5efa\u8bae\u3002\u4e0e\u7248\u6743\u65b9\u6838\u5b9e\u540e\u4f1a\u5c3d\u5feb\u4e0e\u60a8\u8054\u7cfb\uff0c\u8bf7\u6ce8\u610f\u67e5\u770b\u60a8\u7684\u6d88\u606f\u4e2d\u5fc3\u3002\u8c22\u8c22\uff01","</p>","</div>",'<p style="margin-top:20px;text-align:center;">','<a href="/report?doc_id='+s.docId+'" target="_blank" id="report_form_submit_'+m+'" hidefocus="true" class="report-green-button report-green-button-disabled">\u63d0\u4ea4</a>','<a href="###" class="report-gray-button" id="report_form_hide_'+m+'">\u53d6\u6d88</a></p>',"</form>"].join(""),T=function(e,t){b=6===+e?1:0,t&&(b?u.object.each(_.q("docReport-arr"),function(e){_.addClass(e,"icon-jb-disable"),_.setAttr(e,"data-has-report","6")}):u.object.each(_.q("docReport-arr"),function(e){_.removeClass(e,"icon-jb-disable"),_.setAttr(e,"data-has-report","6")}))},P=function(e){if(0===+e.errno)1===+e.isGreenPassport?v().alert({title:"\u63d0\u793a",content:"<p>\u5feb\u901f\u4e3e\u62a5\u6210\u529f\uff01<p>",width:365}):v().pop({title:"\u63d0\u793a",content:['<div class="reportErrorPop">','<div style="height:100px;">'+k[e.errno]+"</div>","<p>",'<a href="###" class="report-gray-s-button" onclick="pop.hide();return false;">\u5173\u95ed</a>',"</p>","</div>"].join(""),width:365}),v().drawSize(),i&&(T("6",i),i=null);else if(67===+e.errno||68===+e.errno){if(u.g("report_pin_tips"+m))return void(u.g("report_pin_tips"+m).innerHTML="\u9a8c\u8bc1\u7801\u9519\u8bef\uff01");v().confirm({title:"\u8bf7\u8f93\u5165\u624b\u673a\u9a8c\u8bc1\u7801",content:['<div class="pv20">','<input type="text" id="report_pin_input'+m+'" ','style="padding:2px 5px;margin-right:10px;height:22px;line-height:22px;width:150px;">','<input type="button" id="report_pin_btn'+m+'" ','value="\u53d1\u9001\u9a8c\u8bc1\u7801" style="width:150px;text-align:center;height:30px;">','<p id="report_pin_tips'+m+'" style="color:red;height:30px;line-height:30px;"></p>',"</div>"].join(""),width:380,onOk:function(){var e=u.string.trim(u.g("report_pin_input"+m).value);/^\d{6}$/.test(e)?wk.report.postVipReport(e):u.g("report_pin_tips"+m).innerHTML="\u8bf7\u6b63\u786e\u8f93\u51656\u4f4d\u6570\u5b57\u9a8c\u8bc1\u7801\uff01"}}),u.on("report_pin_btn"+m,"click",function(){var e,t=this,r=60;u.ajax.post("/report/interface/sendReportPin","doc_id="+s.docId,function(){}),t.value="\u91cd\u65b0\u53d1\u9001\u9a8c\u8bc1\u7801\uff08"+r+"\uff09",t.disabled="disabled",e=setInterval(function(){--r?t.value="\u91cd\u65b0\u53d1\u9001\u9a8c\u8bc1\u7801\uff08"+r+"\uff09":(clearInterval(e),t.value="\u91cd\u65b0\u53d1\u9001\u9a8c\u8bc1\u7801",t.disabled=!1)},1e3)})}else I(e)},I=function(e){0===+e.errno?1===+e.isGreenPassport?wk.report.showVipPop():wk.report.showPop():(v().pop({title:"\u63d0\u793a",content:['<div class="reportErrorPop">','<div style="height:100px;">'+k[e.errno]+"</div>",'<p><a href="###" class="report-gray-s-button" onclick="pop.hide();return false;">\u5173\u95ed</a></p>',"</div>"].join(""),width:365}),v().drawSize())},S=function(){return _.insertHTML(document.body,"beforeEnd",j),_.g("reportForm_"+m)},R=function(){h.on("reportForm_"+m,"click",function(e){var t=h.getTarget(e),r=u.g("report_form_submit_"+m);if("radio"===_.getAttr(t,"type")&&t.checked){var o=t.value;_.removeClass(r,"report-green-button-disabled"),9===+o?(_.show("report_item_val9_"+m),r.innerHTML="\u4e0a\u4f20\u6750\u6599"):(_.hide("report_item_val9_"+m),r.innerHTML="\u63d0\u4ea4"),r=t=null,x.report_reason=o}}),h.on("report_form_submit_"+m,"click",function(e){var t=_.hasClass(this,"report-green-button-disabled");if(t||g)return void h.stop(e);var r,o=x.report_reason;return 9===+o?void v().hide():(h.stop(e),8!==+o&&(r="doc_id="+s.docId+"&ct=20116&report_reason="+o),8===+o&&(r="doc_id="+s.docId+"&ct=20116&report_reason="+o+"&extra_info=noURL"),g=!0,v().hide(),void u.ajax.post("/report/submit/reportSubmit",r,function(e,t){var r=u.json.parse(t);P(r),g=!1}))}),h.on("report_form_hide_"+m,"click",function(e){h.stop(e),v().hide()})},C=function(){h.un("reportForm_"+m,"click"),h.un("report_form_submit_"+m,"click"),h.un("report_form_hide_"+m,"click")},L={showTip:function(e,t){if(y)return void clearTimeout(o);var t=t||(b?w[1]:w[0]),r=_.g("reportTip_"+m);r||(r=_.create("div",{className:"respoTipWrap",id:"reportTip_"+m,style:"display:none;position:absolute;left:"+(e.offsetWidth+3)+"px;"})),e.appendChild(r),r.innerHTML=t,r.style.display="block",y=!0},hideTip:function(){var e=_.g("reportTip_"+m);e&&y&&(o=setTimeout(function(){e.style.display="none",y=!1},300))},checkReportStatus:function(e){g||(g=!0,u.ajax.post("/report/interface/reportPreCheck","doc_id="+s.docId,function(t,r){var o=u.json.parse(r);e?e.call(this,o):f.eventCenter.dispatchEvent("Report.CheckFinish",{data:r}),g=!1}))},showPop:function(){var e=this;if(0===+b){v().pop({content:'<div id="report_form_wrap_'+m+'"></div>',title:"\u6b64\u6587\u6863\u662f\u5426\u6d89\u53ca\u4fb5\u6743\uff1f",width:560,onclosed:function(){e.closePop()}}),v().drawSize();var t=_.g("reportForm_"+m),r=_.g("report_form_wrap_"+m);t||(t=S(),R(t)),r.appendChild(t),"docReport-copr"===i.id?(_.setStyle("report-reason-all","display","none"),_.setStyle("report-reason-copr","display","block")):(_.setStyle("report-reason-all","display","block"),_.setStyle("report-reason-copr","display","none")),t.style.display="block",t=r=null,v().drawSize()}},postVipReport:function(e){e=e||0;var t="/report/submit/reportSubmit",r="ct=20116&report_reason=8&extra_info=noURL&doc_id="+s.docId+"&pin="+e;u.ajax.post(t,r,function(e,t){var r=u.json.parse(t);P(r),g=!1})},showVipPop:function(){0===+b&&(v().confirm({content:'<div class="pv20" style="text-align:center">\u60a8\u662f\u5426\u786e\u8ba4\u4e3e\u62a5\u8be5\u6587\u6863\u4e3a\u76d7\u7248\uff1f</div>',title:"\u4e3e\u62a5\u786e\u8ba4",width:350,onOk:function(){wk.report.postVipReport()}}),v().drawSize())},closePop:function(){C()}};f.module("wk.report",L),f.module("pop.hide",function(){v().hide()});var N=1;f.eventCenter.addEventListener("Report.Click",function(e){var t=e||event;l.verlogin(function(){if(a.UserInfo.isNoUsername)N&&(N=0,p.sio.callByBrowser("https://passport.baidu.com/passApi/js/wrapper.js?cdnversion="+(new Date).getTime(),function(){c.xsend(1,102264,{index:1}),window.passport.use("fillUserName",{tangram:!0},function(e){c.xsend(1,102264,{index:2});var t=e.passport.fillUserName,r=new t({product:"wenku",staticPage:"http://"+location.host+"/static/wkcommon/html/v3Jump.html"});r.on("fillUserNameSuccess",function(e){c.xsend(1,102264,{index:3}),e.returnValue=!1,location.reload()}),r.on("render",function(){c.xsend(1,102264,{index:4}),N=1,n(".pass-button-submit").val("\u786e\u8ba4")}),r.on("validateError",function(e){"\u6b64\u7528\u6237\u540d\u5df2\u88ab\u6ce8\u518c\uff0c\u8bf7\u53e6\u6362\u4e00\u4e2a"===e.validate.msg?(c.xsend(1,102264,{index:5}),n(".pass-item-error-userName").text("\u6b64\u7528\u6237\u540d\u5df2\u88ab\u6ce8\u518c")):(c.xsend(1,102264,{index:6}),n(".pass-item-error-userName").text("\u7528\u6237\u540d\u957f\u4e0d\u5f97\u8d85\u8fc77\u4e2a\u6c49\u5b57\uff0c\u4e14\u4e0d\u80fd\u662f\u7eaf\u6570\u5b57"))}),v().alert({title:"\u62b1\u6b49\uff0c\u60a8\u8fd8\u6ca1\u6709\u6635\u79f0\uff0c\u6211\u4eec\u65e0\u6cd5\u4e0e\u60a8\u53d6\u5f97\u8054\u7cfb\uff0c\u8bf7\u60a8\u8d77\u540d\u540e\u518d\u8fdb\u884c\u4e3e\u62a5\u5427~",content:'<div id="insertPass"></div>',width:580,height:320}),n(".btc").hide(),n("#insertPass").html(""),r.render("insertPass")})}));else{var e=_.getAttr(t.target,"data-has-report");if(0!==+e)return void P({errno:e});window.wk.report.checkReportStatus(function(e){i=t.target,I(e)})}},null,null,{user:a.UserInfo,actionName:"report"})}),r.exports=L});
;define("wkview:widget/ui/view/star/star.js",function(s,r,a){var n=function(s,r){return r=r||"b","#####".replace(/#/g,function(a,n){var t=n+1-s,e=0>=t?"on":.5===+t?"half":"off";return'<b class="ic {starCss}"></b>'.replace("{starCss}","ic-star-"+r+"-"+e)})},t=function(s){return['<span class="recomBox">','<span class="recomRatio">'+s+"% </span>\u63a8\u8350","</span>"].join("")};a.exports.star=n,a.exports.starNew=t});
;define("wkview:widget/ui/view/down_wangpan/success_page/down_wangpan.js",function(i,n,a){var t=i("wkcommon:widget/ui/js_core/log/log.js"),s=i("wkcommon:widget/lib/doT/doT.min.js"),d={init:function(i){t.xsend(1,101844),this.options=i||{},this.bindEvent()},bindEvent:function(){var i=+this.options.chooseState,n=+this.options.wfFlow,a={init:function(i){var n=this;n.tmpl="","success"===i&&(t.xsend(1,101848),n.tmpl=s.template('<div id="wp-dialog-wrap">\n<div class="mask"></div>\n<div class="wp-wrap">\n<div class="wp-dialog">\n<div class="dialog-left-greenbar"></div>\n<div class="dialog-header">\n<div class="close-btn"></div>\n<div class="dialog-titles">\u8f6c\u5b58\u5230\u767e\u5ea6\u7f51\u76d8</div>\n</div>\n<div class="dialog-container-wp">\n<div class="dialog-text-1">\u5df2\u8f6c\u5b58\u5230\u767e\u5ea6\u7f51\u76d8</div>\n<div class="dialog-text-2">\u5b58\u50a8\u5728\u767e\u5ea6\u7f51\u76d8>\u6765\u81ea\uff1a\u767e\u5ea6\u6587\u5e93</div>\n</div>\n<div class="youxiang-dialogbox">\n<a href="javascript:void(0);"\n             class="quality-award-dialogbtn success-btn-click">\n\u53bb\u767e\u5ea6\u7f51\u76d8\u67e5\u770b</a>\n</div>\n</div>\n</div>\n</div>')),"vip"===i&&(t.xsend(1,101846),n.tmpl=s.template('<div id="wp-dialog-wrap">\n<div class="mask"></div>\n<div class="wp-wrap">\n<div class="vip-dialog">\n<div class="dialog-header">\n<div class="close-btn"></div>\n</div>\n<div class="dialog-container-wp">\n<div class="save-wangpan-text1">\u8f6c\u5b58\u6587\u6863\u5230\u767e\u5ea6\u7f51\u76d8</div>\n<div class="save-wangpan-text2">\u968f\u770b\u968f\u5b58\uff0c\u597d\u8d44\u6599\u4e0d\u9519\u8fc7</div>\n</div>\n<div class="youxiang-dialogbox">\n<a href="javascript:void(0);"\n                   class="quality-award-dialogbtn dialog-notvip-click">\n\u5f00\u901aVIP\uff0c\u7acb\u4eab\u8f6c\u5b58\u7279\u6743</a>\n<div class="dialog-bottom">\n<ul class="list clearfix">\n<li class="icon-share">\u4eabVIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743</li>\n<li class="icon-give middle-item">\u8d60\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743</li>\n<li class="icon-doc">100w\u7bc7\u6587\u6863\u514d\u8d39\u4e13\u4eab</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>')),$("#wp-dialog-wrap").length<=0&&$("body").append(n.tmpl()),$("#wp-dialog-wrap .mask").css({width:$(document).width(),height:$(document).height()}),n.bindEvent(),n.show()},bindEvent:function(){var i=this;$("#wp-dialog-wrap").on("click",".close-btn",function(){i.hide()}),$("#wp-dialog-wrap").on("click",".success-btn-click",function(){t.xsend(1,101849),window.open("https://pan.baidu.com/disk/home")}),$("#wp-dialog-wrap").on("click",".dialog-notvip-click",function(){t.xsend(1,101847),window.open("/cashier/browse/vipcashier?cashier_code=zcwangpan_joinvip")})},show:function(){$("#wp-dialog-wrap").show()},hide:function(){$("#wp-dialog-wrap").hide()}},d={init:function(i,n){var a=this;a.$toast=$(['<div class="wangpan-toast">','<span class="content"></span>',"</div>"].join("")),n&&a.$toast.css("width",n+"px"),a.$toast.find(".content").text(i),a.$toast.appendTo(document.body)},change:function(i,n){var a=this;n&&a.$toast.css("width",n+"px"),a.$toast.find(".content").text(i)},hide:function(){$(".wangpan-toast").remove()}},e=function(n){var s="/user/submit/dumpdocafterdownload";$.ajax({url:s,type:"get",data:{dump_doc_device:"pc",doc_id:n,dump_doc_src_type:112},success:function(n){if(!n||!n.status)return d.change("\u8f6c\u5b58\u5931\u8d25"),void setTimeout(function(){d.hide()},1e3);if(0!==n.status.code&&t.xsend(1,101850),1===i)return!1;switch(n.status.code){case 0:d.hide(),a.init("success");break;case 4:d.change("\u8f6c\u5b58\u5931\u8d25\uff0c\u60a8\u53ef\u5c1d\u8bd5\u4e0b\u8f7d","280"),setTimeout(function(){d.hide()},1e3);break;case 5:d.change("\u4eca\u65e5\u8f6c\u5b58\u6b21\u6570\u8fbe\u5230\u4e0a\u9650\uff0c\u60a8\u53ef\u5c1d\u8bd5\u4e0b\u8f7d","280"),setTimeout(function(){d.hide()},1e3);break;case 11:d.change("\u60a8\u7684\u7f51\u76d8\u5b58\u50a8\u7a7a\u95f4\u5df2\u6ee1\uff0c\u53ef\u5c1d\u8bd5\u4e0b\u8f7d","280"),setTimeout(function(){d.hide()},3e3);break;case 10:d.change("\u8f6c\u5b58\u51fa\u4e86\u70b9\u95ee\u9898\uff0c\u518d\u8bd5\u4e00\u4e0b","280"),setTimeout(function(){d.hide()},1e3);break;default:d.change("\u8f6c\u5b58\u5931\u8d25\uff0c\u60a8\u53ef\u5c1d\u8bd5\u4e0b\u8f7d","280"),setTimeout(function(){d.hide()},1e3)}}})};if($(document).on("click",".doc-center .wk-wangpan-text",function(){t.xsend(1,101845);var i=$(this).data("docid"),s=$(this).data("vip");s||1!==n?(d.init("\u6b63\u5728\u8f6c\u5b58\uff0c\u8bf7\u7a0d\u540e...","185"),e(i)):a.init("vip")}),1===i){var o=$(".wl-wangpan-textSf").data("docid");e(o)}}};a.exports=d});
;define("wkview:widget/ui/view/movetree/mediator/mediator.js",function(e,t,i){var o=e("wkcommon:widget/ui/js_core/mvp/event/event.js");i.exports.mediator=new o.custEvent});
;define("wkview:widget/ui/view/page_list/page_list.js",function(e,a,t){var i=e("wkcommon:widget/lib/tangram/base/base.js"),n=e("wkcommon:widget/ui/lib/jquery/jquery.js"),g=function(e){var a=i.dom.query("#"+e.pageList+" li"),t=function(t){t=+t,0!==t&&t<=e.total&&(i.g(e.pagePre).className="view-sps "+(1===t?"pre-null":"pre"),i.g(e.pageNext).className="view-sps "+(t===e.total?"next-null":"next"),i.g(e.pageNum).innerHTML=t,i.dom.query("#"+e.pageList+" .current")[0].className="",a[t-1].className="current")};i.event.on(e.pagePre,"click",function(){var a=Number(i.g(e.pageNum).innerHTML)-1;t(a),n.event.trigger("pageListChange_"+e.pageList,{page:a})}),i.event.on(e.pageNext,"click",function(){var a=Number(i.g(e.pageNum).innerHTML)+1;t(a),n.event.trigger("pageListChange_"+e.pageList,{page:a})})};t.exports.pageList=g});
;define("wkview:widget/ui/view/reader_pace/reader_pace.js",function(e,t,a){var n=e("wkcommon:widget/lib/tangram/base/base.js"),r=e("wkcommon:widget/lib/fis/data/data.js"),o=r.get("WkInfo"),f=function(e,t,a,r,f){var i=o.DocInfo.docId,t=t||20148,a=a||"/user/submit/readprogress",s=e.getReader(),c=+o.PaceInfo.rate||3,f=f||function(){},d={page:0,offset:0},g=function(){if(e){s=e.getReader();var a=s.NS_IK_getPagethOnClose()||0,n=s.NS_IK_getPageOffset()||0;if(+a===+d.page&&+n===+d.offset)return;return d.page=a,d.offset=n,{doc_id:i,page:a,offset:n,ct:t}}},u=function(e){n.ajax.post(a,"fold_request="+n.json.stringify(e),f)},p=function(){setInterval(function(){var e=g();e&&u(e)},1e3*c)};return{sendPaceInRate:p}};a.exports.readerPace=f});
;define("wkview:widget/ui/file_downloader_ui/file_downloader_ui.js",function(n,e,t){var i=n("wkview:widget/ui/file_downloader/file_downloader.js"),o=n("wkcommon:widget/ui/lib/jquery/jquery.js"),s=(n("wkcommon:widget/lib/fis/data/data.js"),n("wkcommon:widget/ui/lib/cookie/cookie.js")),a=n("wkcommon:widget/lib/tangram/base/base.js"),l=n("wkcommon:widget/ui/js_core/log/log.js"),r=function(){this._init.apply(this,arguments)};r.prototype={_default:{url:"",title:"",fileType:"",complete:function(){}},_init:function(n){var e=this;e.options=n=o.extend(e._default,n),e.el=o('<div class="f-downloader"></div>').appendTo(".j_downloader-position"),e._render(e.el),e._initEvent(),e._update=+new Date,e._isLive=!0,e._isComplete=!1,o(window).on("beforeunload",e._before_unload_handler),setTimeout(function(){e.el.addClass("onshow")},0),e._downloader=new i({fileName:n.title+"."+n.fileType,url:n.url,threads:n.threads||3,success:function(n){e._renderProgress(n),e._downloadComplete(n)},error:function(){e._destroy(3)},onprogress:function(n){var t=+new Date;t-e._update>500&&(e._update=t,e._renderProgress(n))}})},_render:function(n){var e=this,t=(e.options,[]);t.push('<div class="downloader-wp"><div class="downloader-inner">'),t.push('<div class="middle-block downloader-content">','<span class="f-title">\u6587\u6863\u6570\u636e\u63d0\u53d6\u4e2d...</span>','<span class="f-ic"></span>','<span class="f-ic-downloading"><span class="f-ic-downloading-inner"></span></span>','<div class="f-progress"><div class="progress-inner"></div></div>','<a href="###" class="f-btn stop-btn j_stop-btn"></a>','<div class="dynamic c_dynamic"></div>',"</div>"),t.push("</div></div>"),n.html(t.join("")),e.dynamicEl=n.find(".c_dynamic"),e.progressEl=n.find(".progress-inner")},_initEvent:function(){var n=this;n.el.on("click",".j_setting-btn",function(){n.el.addClass("onsetting")}).on("click",".j_top-back-btn",function(){n.el.removeClass("onsetting")}).on("click",".j_stop-btn",function(){n._downloader.abort(),n._destroy(n._isComplete?0:1)}).on("click",".j_top-disable-btn",function(){n._downloader.abort(),n._destroy(2)})},_renderProgress:function(n){var e=this,t=[],o=parseInt(n.loaded/n.total*100);t.push('<span class="d-span d-speed">'+i.printRFileSize(1e3*n.speed)+"/s</span>",'<span class="d-span d-file-size">'+i.printRFileSize(n.loaded)+"/"+i.printRFileSize(n.total)+"</span>",'<span class="d-span d-remain-time">'+(n.remainTime>999?e._printRRemainTime(n.remainTime):"")+"</span>"),e.dynamicEl.html(t.join("")),o>0&&e.progressEl.css("width",o+"%")},_downloadComplete:function(n){{var e=this;i.printRFileSize(1e3*n.speed)}e._isComplete=!0,e.el.addClass("oncomplete"),o(window).off("beforeunload",e._before_unload_handler),setTimeout(function(){e._destroy(0,n)},0)},_destroy:function(n,e){var t=this;t.el.off().removeClass("onshow"),o(window).off("beforeunload",t._before_unload_handler),setTimeout(function(){t._isLive&&(t._isLive=!1,t.el.remove(),t.options.complete(n,e))},10)},_printRRemainTime:function(n){function e(n){var e=n.toString();return 1==e.length&&(e="0"+e),e}n=parseInt(n/1e3),sign=":";var t,i,o;return t=i=o=0,t=parseInt(n/3600),i=parseInt(n%3600/60),o=parseInt(n%3600%60),e(t)+sign+(e(i)+sign)+e(o)},_before_unload_handler:function(){return"\u60a8\u6709\u672a\u5b8c\u6210\u4e0b\u8f7d\uff0c\u786e\u8ba4\u9000\u51fa\uff1f"}};var d={instance:null,minFileSize:5242880,el:null,download:function(n){n=n||{},l.send("down","mutli_download_start"),d.isSupport(n.fileSize)?(d.getEl().show(),s.get("init_mutli")?d._initDownload(n):d._initTutorial({complete:function(){s.set("init_mutli",1,{path:"/",expires:864e8}),d._initDownload(n)}})):d.originalDownload(n.url)},isSupport:function(n){return n=parseInt(n)||0,supportSetting="function"==typeof window._mutli_support_setting?window._mutli_support_setting:d._mutli_support_setting,i.isSupport()&&!+s.get("disable_mutli")&&n>=d.minFileSize&&!window._DISABLE_MUTLI_&&supportSetting()?!0:!1},_mutli_support_setting:function(){var n=navigator.userAgent,e=/chrome\/(\d+\.\d+)/i.test(navigator.userAgent)?+RegExp.$1:void 0,t=new RegExp("baidu|bidu|maxthon","i");return!t.test(n)&&e>=28?!0:!1},originalDownload:function(n){location.href=n,a.lang.eventCenter.dispatchEvent("download.realStart")},getEl:function(){return this.el||this._initEl(),this.el},_initTutorial:function(n){n=n||{};var e=[],t=o(".j_downloader-position");e.push('<div class="f-tutorial">','<div class="ft-icon"><div class="ft-rocket"></div></div>','<div class="ft-title">\u6587\u5e93\u5168\u65b0\u6781\u901f\u4e0b\u8f7d\u529f\u80fd</div>','<div class="ft-sub-title">\u8d85\u5927\u6587\u6863\u4e0b\u8f7d\u901f\u5ea6\u63d0\u5347<span style="color:#ff7f18;font-size:1.3em;">3</span>\u500d</div>','<a href="###" class="ft-submit">\u7acb\u5373\u4f53\u9a8c</a>',"</div>"),t.html(e.join(""));var i=t.find(".ft-rocket").removeClass("frame0 frame1 frame2"),s=0,a=setInterval(function(){i.removeClass("frame"+s%3).addClass("frame"+ ++s%3)},120);t.find(".ft-icon").on("click",function(){i.hasClass("launch-rocket")||(i.addClass("launch-rocket"),setTimeout(function(){i.removeClass("launch-rocket")},2e3))}),t.find(".ft-submit").click(function(){clearInterval(a),t.find(".ft-submit").off(),t.find(".ft-icon").off(),t.html(""),n.complete&&n.complete()})},_initDownload:function(n){if(!d.instance){var e=0;Math.random()>.5&&(e=1),d.instance=new r({url:n.url,title:n.title,fileType:n.fileType,threads:e?1:3,complete:function(t,i){d.instance=null;var r="";d.getEl().hide();var p=o.extend({single:e,errno:t},i);l.send("down","mutli_download_end",p),t?1==t||(2==t?s.set("disable_mutli",1,{path:"/",expires:864e8}):3==t&&d.originalDownload(n.url)):(i&&"number"==typeof i.speedRank&&(r="&speedrank="+i.speedRank),setTimeout(function(){a.lang.eventCenter.dispatchEvent("download.realStart",{disableBlank:!0,query:r})},400)),n.complete&&n.complete(t)}})}return d.instance},_initEl:function(){var n=o('<div class="downloader-position-wp" style="display:none;"><div class="dp-inner"><div class="j_downloader-position downloader-position"></div></div><div class="dp-mask"></div><style type="text/css">\n@-webkit-keyframes downloading\n{\n0%{margin-top:-25px;}\n12%{margin-top:-22px}\n24%{margin-top:-19px}\n36%{margin-top:-16px}\n48%{margin-top:-13px;}\n70%{margin-top:0px;}\n}\n</style><style type="text/css">\n@-webkit-keyframes launch_rocket\n{\n0%{-webkit-transform: translate(0, 0);}\n35%{-webkit-transform: translate(0, -350px);}\n40%{-webkit-transform: translate(-350px, -350px);}\n50%{-webkit-transform: translate(-350px, 350px);}\n55%{-webkit-transform: translate(0, 350px);}\n100%{-webkit-transform: translate(0, 0px);}\n}\n</style></div>');n.appendTo("body"),this.el=n}};t.exports=d});
;define("wkview:widget/ui/file_downloader/file_downloader_core.js",function(e,o,t){var n="undefined"!=typeof localStorage?localStorage:null,r="fileDownloads",i=72e5,s=function(e,o){this.url=e,o=o||{},this.options={threads:o.threads||5,retries:o.retries||3,sectionMaxSize:o.sectionMaxSize||30},this.fileName=o.fileName||e.split("/").pop(),this.threadContainer=[],this.downloadedSize=0,this.worker=new Worker("/static/wkview/worker/file_downloader_worker_3028a73.js")},a={100:"NotSupported",101:"HeadRequest",102:"FileNotFound",103:"ThreadNullResponse",104:"SizeNotMatch",105:"FileContentLengthZero",106:"ConnectionError"};s.supported=function(){return"webkitRequestFileSystem"in window&&"TEMPORARY"in window}(),s.prototype={constructor:s,uriAnalyser:function(e){var o=new XMLHttpRequest,t=this;o.open("HEAD",this.url,!0),o.onreadystatechange=function(n){if(this.readyState==this.HEADERS_RECEIVED)if(200==this.status){var r=o.getResponseHeader("Content-Type")||"text/plain",i=parseInt(o.getResponseHeader("Content-Length"));0==i?t._onError(105,n):(t.contentType=r,t.fileSize=i,e&&e())}else t._onError(102,n)},o.onerror=function(e){console.log(e),t._onError(101,e)},o.send()},messageHandler:function(e){{var o=this,t=e.data;({createFile:function(){0!=t.statusCode?o._onError(t.statusCode,e):(o.folderName=t.dir,n.setItem(r,n.getItem(r)+t.dir+"&"))},onProgress:function(){t.lengthComputable&&(o.downloadedSize=t.downloadedSize,o.onProgress&&o.onProgress(t.id,t))},onThreadComplete:function(){o.onThreadComplete&&o.onThreadComplete(t.id)},onDownloadComplete:function(){o.openDownloadDialog(t.fileURL),o.onComplete&&o.onComplete()},onFileGenerate:function(){0!=t.statusCode&&o._onError(t.statusCode,e)},debug:function(){console.log(t.i)}})[t.action]()}},prepare:function(){var e=this;this.worker.onmessage=function(o){e.messageHandler(o)},this.uriAnalyser(function(){e.onConnected(e.fileSize,e.fileName),e.worker.postMessage({action:"run",sectionMaxSize:e.options.sectionMaxSize,fileName:e.fileName,fileSize:e.fileSize,threads:e.options.threads,retries:e.options.retries,contentType:e.contentType,url:e.url})})},openDownloadDialog:function(e){var o=document.createElement("a");o.href=e,o.download=this.fileName,o.click()},onConnected:function(){},download:function(){return this.constructor.supported?void this.prepare():void this._onError(100)},panDomainFilter:function(e){return e},_onError:function(e,o){o=o||{},this.onError(e,o.fileErrorCode)},getErrorName:function(e){return 100>e?"FileError: "+e:a[e]+"Error"},getFileSize:function(){return this.fileSize},abort:function(){this.worker.postMessage({action:"abort"}),l(this.folderName)},getDownloadedSize:function(){return this.downloadedSize}};var l=function(e){var o="downloadcache/";webkitRequestFileSystem(TEMPORARY,0,function(t){t.root.getDirectory(o+e,{create:!1},function(o){o.removeRecursively(function(){console.log("remove: "+e),n.setItem(r,n.getItem(r).replace(e+"&",""))})})})};!function(){if(n){var e=n.getItem(r);if(e){var o=(new Date).getTime(),t=e.split("&");t=t.splice(0,t.length-1),t.forEach(function(e){var t=parseInt(e,36);o-t>i&&l(e)})}}}(),t.exports=s});
;define("wkview:widget/ui/file_downloader/file_downloader.js",function(e,o,t){var n=e("wkview:widget/ui/file_downloader/file_downloader_core.js"),d=e("wkcommon:widget/ui/lib/jquery/jquery.js"),r=function(){this._init.apply(this,arguments)};r.isSupport=function(){return n.supported},r.printRFileSize=function(e,o){var t,n;return o="number"==typeof o&&o>=0?o:1,1024>e?(t=1,n="byte",o=0):1048576>e?(t=1024,n="kb"):1073741824>e?(t=1048576,n="MB"):(t=1073741824,n="GB"),(e/t).toFixed(o)+n},r._speedRank=[{precent:0,speed:0},{precent:70.13,speed:262144},{precent:93.49,speed:524288},{precent:99.52,speed:1310720},{precent:99.99,speed:13107200}],r.speedRank=function(e){var o=r._speedRank,t=o[o.length-1].speed;if(e=parseInt(1e3*e),0>=e)return 0;e>t&&(e=t);for(var n=0;e>o[n].speed;)n++;n>0&&(n-=1);try{var d=o[n].precent,a=o[n+1].precent,i=a-d,l=o[n].speed,s=o[n+1].speed,p=s-l;return parseFloat(((e-l)/p*i+d).toFixed(2))}catch(_){return null}},window.FileDownloader=r,r.download=function(e){return new r(e)},r.prototype={_defaultOptions:{url:"",threads:3,retries:1,speedUpdateInterval:1e3,success:function(){},error:function(){},onprogress:function(){}},_init:function(e){var o=this;o.options=e=d.extend(o._defaultOptions,e),o._startTime=null,o._endTime=null,o._lastUpdateTime=null,o._lastUpdateLoaded=0,o._downloadSpeed=0,o._downloadSpeedInterval=null,o._downloader=new n(e.url,{fileName:e.fileName||null,threads:e.threads,retries:e.retries}),o._downloader.onProgress=d.proxy(o._onProgress,o),o._downloader.onComplete=d.proxy(o._onComplete,o),o._downloader.onError=d.proxy(o._onError,o),o._startTime=o._lastUpdateTime=+new Date,o._downloadSpeedInterval=setInterval(d.proxy(o._speedInterval,o),e.speedUpdateInterval),o._downloader.download()},_onProgress:function(e,o){var t=this,n={},d=+new Date;n.total=t._downloader.getFileSize(),n.loaded=t._downloader.getDownloadedSize(),n.usedTime=d-t._startTime,n.remainTime=parseInt((n.total-n.loaded)/t._downloadSpeed),n.speed=t._downloadSpeed,t.options.onprogress(n,o)},_onComplete:function(){var e=this,o={};e._endTime=+new Date,clearInterval(e._downloadSpeedInterval),o.total=e._downloader.getFileSize(),o.loaded=o.total,o.usedTime=e._endTime-e._startTime,o.remainTime=0,o.speed=o.total/o.usedTime,o.speedRank=r.speedRank(o.speed),e.options.success(o)},_onError:function(e,o){var t=this;t.options.error(t._downloader.getErrorName(e),o)},_speedInterval:function(){var e,o=this,t=o.getFileSize(),n=o.getDownloadedSize(),d=+new Date;t&&n&&(e=(n-o._lastUpdateLoaded)/(d-o._lastUpdateTime),o._downloadSpeed=e>0?e:0,o._lastUpdateTime=d,o._lastUpdateLoaded=n)},abort:function(){this._downloader.abort()},getFileSize:function(){return this._downloader.getFileSize()},getDownloadedSize:function(){return this._downloader.getDownloadedSize()}},t.exports=r});
;define("wkview:widget/ui/doc_business/doc_business.js",function(i,e,s){function o(i){this.options=t.extend({doc_title:"",doc_size:"",content:"",resize:function(){},open:function(){},firstOpen:function(){},close:function(){}},i||{}),this.init()}{var t=i("wkcommon:widget/ui/lib/jquery/jquery.js"),n=i("wkcommon:widget/lib/tangram/base/base.js"),a=i("wkcommon:widget/lib/fis/data/data.js"),d=(i("wkcommon:widget/ui/js_core/log/log.js"),a.get("WkInfo"));a.get("userFlowGroup")}o.prototype={init:function(){var i=this;i.creat(),i.bindEvent(),this.isChrome=n.browser.chrome||n.browser.safari},reset:function(){t(this.el).remove(),t(".dialog-container-iframe").remove(),this.init()},creat:function(){var i=null,e=document.body;docTitle=n.string.getByteLength(d.DocInfo.title)<26?d.DocInfo.title:n.string.subByte(d.DocInfo.title,26,"...");var s='<iframe class="dialog-container-iframe" allowTransparency="true" src="" frameborder="0" scrolling="no"></iframe>',o=['<div class="dialog-container dialog-org border-none">','<div class="close-btn"></div>','<div class="dialog-top">','<p class="doc-title">'+docTitle+"</p>",'<p class="doc-size  doc-size-3">',"("+(d.DocInfo.size/1024+"").replace(/^(\d+\.\d)\d+$/,"$1")+"K)","</p>","</div>",'<div class="dialog-inner">','<p class="ticket-num-msg msg0 error-sure hide">\u7cfb\u7edf\u9519\u8bef\uff0c\u8bf7\u5728\u9875\u9762\u5237\u65b0\u540e\u91cd\u65b0\u4e0b\u8f7d</p>','<p class="ticket-num-msg msg1 org">\u6240\u9700\u4e0b\u8f7d\u5238\uff1a7</p>','<p class="ticket-detail-msg msg2 org">\u60a8\u6301\u67091\u4e0b\u8f7d\u5238.\u79ef\u5206\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5151\u6362\u4e0b\u8f7d\u5238</p>','<p class="ticket-detail-msg msg3 org hide">(\u4f01\u4e1a\u8d26\u53f7\u4ec5\u652f\u6301\u4e0b\u8f7d\u4ef7\u683c\u572850\u5143\u4ee5\u5185\u7684\u6587\u6863)</p>','<p class="ticket-detail-msg warning org hide">\u672c\u6587\u6863\u4ec5\u652f\u6301\u5728\u7ebf\u9605\u8bfb\uff0c\u8d2d\u4e70\u540e\u53ef\u9605\u8bfb\u5168\u6587</p>','<div class="dialog-down-load-btn-center dialog-gray"><a class="dialog-down-load-btn btn-green btn-l btn-small" href="javascript:void(0);">\u5207\u6362\u81f3\u4e2a\u4eba\u8d26\u53f7\u4e0b\u8f7d</a></div>','<div class="dialog-down-load-btn-center dialog-green"><a class="dialog-down-load-btn btn-green btn-l" href="javascript:void(0);">\u7acb\u5373\u4e0b\u8f7d</a></div>','<div class="dialog-down-load-btn-center error-sure hide"><a class="dialog-down-load-btn btn-green btn-l" href="javascript:void(0);">\u786e\u5b9a</a></div>','<div class="dialog-down-load-btn-center close-sure hide"><a class="dialog-down-load-btn',' btn-green btn-l" href="javascript:void(0);">\u5173\u95ed</a></div>','<div class="dialog-bottom">','<p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"</div>","</div>"].join("");i=document.createElement("div"),i.id="WkDialogDownDoc",i.style.display="none",i.innerHTML=o,e.insertBefore(i,e.firstChild),t(i).after(s),t(i).addClass("hide"),t(i).addClass("WkDialogDownDoc"),this.el=i},creat_2:function(){var i=null,e=document.body,s=(n.string.getByteLength(d.DocInfo.title)<26?d.DocInfo.title:n.string.subByte(d.DocInfo.title,26,"..."),'<iframe class="dialog-container-iframe" allowTransparency="true" src="" frameborder="0" scrolling="no"></iframe>'),o=['<div class="dialog-container dialog-org">','<div class="close-btn"></div>','<div class="dialog-inner dialog-inner_s">','<div style="padding:0 39px;">','<h1>\u60a8\u6700\u8fd1\u4f7f\u7528\u7684\u4f01\u4e1a\u8d26\u53f7: <span class="org_name">\u5357\u65b9\u7535\u7f51 </span>\u5df2\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u83b7\u5f97\u6388\u6743:</h1>','<p class="ticket-num-msg msg1 org">\u7b2c\u4e00\u6b65 : \u8bbf\u95ee <a href="http://10.91.3.106:8001/Pages/Index.html" target="_blank"><span class="org_name">\u5357\u65b9\u7535\u7f51</span>\u60c5\u62a5\u4e2d\u5fc3;</a></p>','<p class="ticket-detail-msg msg2 org">\u7b2c\u4e8c\u6b65 : \u5728\u60c5\u62a5\u4e2d\u5fc3\u641c\u7d22\u60a8\u9700\u8981\u7684\u6587\u6863\uff0c\u5e76\u70b9\u51fb\u8fdb\u5165\u767e\u5ea6\u6587\u5e93\uff0c\u5373\u53ef\u6b63\u5e38\u4e0b\u8f7d;</p>','<div class="wealth-5-container">','<a href="javascript:;" class="org-sure btn-gray btn-m">\u786e\u5b9a</a>','<a href="javascript:;" class="org-gr-download btn-green btn-m dialog-gray"><i class="btn-ico"></i><span>\u4f7f\u7528\u4e2a\u4eba\u8d26\u53f7\u4e0b\u8f7d</span></a>',"</div>","</div>",'<div class="dialog-bottom">','<p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>',"</div>","</div>"].join("");i=document.createElement("div"),i.id="WkDialogDownDoc",i.style.display="none",i.innerHTML=o,e.insertBefore(i,e.firstChild),t(i).after(s),t(i).addClass("hide"),t(i).addClass("WkDialogDownDoc"),this.el=i},vcodeOk:function(){t(".vcode-box .vcode-right").css("visibility","visible"),t(".vcode-box .error-tip").css("height","0px")},vcodeError:function(){t(".vcode-box .error-tip").css("height","16px"),t(".vcode-box .vcode-right").css("visibility","hidden")},vcodeImg:function(){var i=this;t.get("/vcode?t="+(new Date).getTime(),function(e){t(".vcode-box img").attr("src",e.imgurl),i.vcodeValue=e.vcode_str,window.postVcode=i.vcodeValue})},bindEvent:function(){var i=this;t(".close-btn").click(function(){i.close()}),t(".close-sure").click(function(){i.close()}),t(".org-sure").on("click",function(){i.close(),console.log("\u60a8\u70b9\u51fb\u4e86\u786e\u5b9a!")}),t(".error-sure").on("click",function(){location.reload(!0)})},bindDownLoadBtton:function(i){var e=this;t(".dialog-green").on("click",function(){e.close(),i()})},bindChangePerson:function(i){var e=this;t(".dialog-gray").on("click",function(){e.close(),i()})},setVcode:function(i){this.vcodeFlag=i},getVcode:function(){return this.vcodeFlag},setMessage:function(i){this.useMessageData=i},show:function(){var i=this,e=t(window).height();t(this.el).css("display","block"),t(".dialog-container-iframe").css({display:"block",height:t("body").height()}),i.getVcode()&&t(".ticket-no-wealth-container").hasClass("hide")&&(i.vcodePass=!0,t(".vcode-box").show(),i.vcodeImg()),t("#WkDialogDownDoc").css("top",e/2-150),t("#doc_reader")&&!this.isChrome&&t("#doc_reader").css("visibility","hidden")},close:function(){t(this.el).css("display","none"),t(".dialog-container-iframe").css("display","none"),t("#doc_reader")&&t("#doc_reader").css("visibility","visible")},setContent:function(){},set0Msg:function(){t(this.el).find(".msg0").removeClass("hide"),t(this.el).find(".msg1").addClass("hide"),t(this.el).find(".msg2").addClass("hide"),t(this.el).find(".error-sure").removeClass("hide"),t(this.el).find(".dialog-green").addClass("hide"),t(this.el).find(".dialog-gray").addClass("hide")},set1Msg:function(i){t(this.el).find(".msg1").html(i)},set2Msg:function(i,e){t(this.el).find(".msg2").html(i),e&&t(this.el).find(".msg2").addClass(e)},set3Msg:function(i){t(this.el).find(".msg3").html(i).removeClass("hide")},setWarning:function(){t(this.el).find(".warning").removeClass("hide")},setBtnMsg:function(i){t(this.el).find(".dialog-down-load-btn").text(i),"\u5207\u6362\u81f3\u4e2a\u4eba\u8d26\u53f7\u4e0b\u8f7d"==i||"\u4f7f\u7528\u4e2a\u4eba\u8d26\u53f7\u8d2d\u4e70"==i?t(".dialog-green").addClass("hide"):"\u5173\u95ed"===i?(t(".dialog-green").addClass("hide"),t(".dialog-gray").addClass("hide"),t(".close-sure").show()):t(".dialog-gray").addClass("hide")},setBtnWay:function(i){t(".dialog-gray span").html(i)},setBottomMsg:function(i){t(this.el).find("#bottom-btn").text(i)},setWealth5:function(){t(".btn-green").addClass("hide")},reset:function(){t(this.el).remove(),t(".dialog-container-iframe").remove(),this.init()}},s.exports=o});
;define("wkview:widget/ui/dialog_down_doc/dialog_down_doc.js",function(e,t,i){function n(e){this.options=a.extend({doc_title:"",doc_size:"",content:"",resize:function(){},open:function(){},firstOpen:function(){},close:function(){}},e||{}),this.init()}var a=e("wkcommon:widget/ui/lib/jquery/jquery.js"),s=e("wkcommon:widget/lib/tangram/base/base.js"),o=e("wkcommon:widget/lib/fis/data/data.js"),d=e("wkcommon:widget/ui/js_core/log/log.js"),c=e("wkcommon:widget/ui/js_core/dialog/dialog.js"),l=e("wkcommon:widget/lib/doT/doT.min.js"),r=e("wkview:widget/ui/file_downloader_ui/file_downloader_ui.js"),u=e("wkview:widget/node_modules/@baidu/wenku-model-user/index.js"),v=e("wkview:widget/doc_download_main/submit.js"),g=o.get("WkInfo")||{},p=g.DocInfo||{},h=p.docId,b=function(){var e=null;return function(){return e||(e=c.dialogCreate()),e}}();n.prototype={constructor:n,init:function(){var e=this;e.vcodePass=!1,e.getVipInfo(),e.getIsVipDoc(),e.creat(),e.bindEvent(),this.isChrome=s.browser.chrome||s.browser.safari},getVipInfo:function(){var e=this;a.ajax({type:"get",async:!0,cache:!1,url:"/user/interface/getuserinfo",success:function(t){t&&0===t.status.code&&(t.data.vipinfo.type>0||t.data.jiaoyu_vip_info&&t.data.jiaoyu_vip_info.is_vip)&&(e.isVip=!0)}})},getIsVipDoc:function(){var e=this;u.isVipFreeDoc(p,function(t){e.isVipDoc=t})},getDate:function(){var e=new Date;return{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear(),today:e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},creat:function(){var e=null,t=document.body,i=s.string.getByteLength(g.DocInfo.title)<26?g.DocInfo.title:s.string.subByte(g.DocInfo.title,26,"..."),n=['<iframe class="dialog-container-iframe" ','allowTransparency="true" src="" ','frameborder="0" scrolling="no">',"</iframe>"].join(""),c="",r=(p.size/1024+"").replace(/^(\d+\.\d)\d+$/,"$1"),u=o.get("mitidialogtitle")||"",v=o.get("mitidialogfontsize")||"",h={docTitle:i,docSizeKB:r,fontSize:v,title:u};this.isVipDoc&&this.isVip?(c=l.template('<div class="dialog-ad dialog-ad-miti">\n<div class="dialog-ad-hd">\n<span class="dialog-ad-logo"></span>\n<h4 class="dialog-ad-title" style="font-size: {{=it.fontSize}}px">\n{{=it.title}}</h4>\n<a target="_blank" href="//wenku.baidu.com/miti" \n            class="dialog-ad-more log-xsend" data-logxsend="[1, 100448]">\n\u514d\u8d39\u5b89\u88c5&gt;&gt;</a>\n</div>\n<div class="dialog-container vip-freedoc">\n<div class="close-btn"></div>\n<div class="dialog-top">\n<p class="doc-title">{{=it.docTitle}}</p>\n<p class="doc-size doc-size-2">{{=it.docSizeKB}}</p>\n</div>\n<div class="dialog-inner">\n<div class="vip-freedoc-container">\n<p class="vip-freedoc-tips">\u672c\u6587\u4e3a\u6587\u5e93VIP\u514d\u8d39\u6587\u6863\uff0c\u60a8\u53ef\u76f4\u63a5\u4e0b\u8f7d</p>\n<a href="javascript:;" class="ui-bz-btn-senior btn-vip-freedoc-download">\n<b class="ui-bz-btn-p-40 ui-bz-btc">\u7acb\u5373\u4e0b\u8f7d</b>\n</a>\n</div>\n</div>\n<div class="dialog-bottom">\n<p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>\n</div>\n</div>\n</div>')(h),d.xsend(1,100273)):c=l.template('<div class="dialog-ad dialog-ad-miti">\n<div class="dialog-ad-hd">\n<span class="dialog-ad-logo"></span>\n<h4 class="dialog-ad-title" style="font-size: {{=it.fontSize}}px">\n{{=it.title}}</h4>\n<a target="_blank" href="//wenku.baidu.com/miti" \n            class="dialog-ad-more log-xsend" data-logxsend="[1, 100448]">\n\u514d\u8d39\u5b89\u88c5&gt;&gt;</a>\n</div>\n<div class="dialog-container">\n<div class="close-btn"></div>\n<div class="dialog-left-greenbar"></div>\n<div class="dialog-top">\n<p class="doc-title">{{=it.docTitle}}</p>\n<p class="doc-size doc-size-1">{{=it.docSizeKB}}</p>\n</div>\n<div class="dialog-inner">\n<p class="ticket-num-msg msg1"></p>\n<p class="ticket-detail-msg msg2"></p>\n<div class="wealth-5-container hide">\n<a href="javascript:;" class="wealth-5-btn-use-down-load-ticket btn-gray btn-m">\n\u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a>\n<a href="javascript:;" class="wealth-5-btn-use-free btn-green btn-m">\n<i class="btn-ico"></i><span>\u514d\u4e0b\u8f7d\u5238\u4e0b\u8f7d</span>\n</a>\n</div>\n<div class="ticket-no-wealth-container hide">\n<div class="ticket-btn-container ticket-btn-container-vip">\n<a href="javascript:;" class="btn-green btn-m ticket-exchange-btn">\n\u5151\u6362\u540e\u4e0b\u8f7d</a>\n<a href="javascript:;" class="btn-gray btn-m ticket-user-free-download-btn">\n\u514d\u4e0b\u8f7d\u5238\u4e0b\u8f7d</a>\n</div>\n<div class="clear"></div>\n<div class="ticket-raido-container hidden">\n<div class="ticket-raido-bg">\n<span class="ticket-radio-tips">\n\u60a8\u5171\u6709<i>100</i>\u79ef\u5206\uff0c\u53ef\u5151\u6362\uff1a</span>\n<ul>\n<li class="disable">\n<span class="sel-option" data-value="3"></span>3\u4e0b\u8f7d\u5238</li>\n<li class="disable">\n<span class="sel-option" data-value="5"></span>5\u4e0b\u8f7d\u5238</li>\n<li class="disable">\n<span class="sel-option" data-value="10"></span>10\u4e0b\u8f7d\u5238</li>\n<li class="disable">\n<span class="sel-option" data-value="30"></span>30\u4e0b\u8f7d\u5238</li>\n<li class="disable">\n<span class="sel-option" data-value="50"></span>50\u4e0b\u8f7d\u5238</li>\n<li class="other">\n<span class="sel-option"></span>\n<input type="text" placeholder="\u5176\u4ed6" class="other-input"/>\u4e0b\u8f7d\u5238</li>\n</ul>\n<div class="ticket-tips">\n<div class="ticket-tips-item w6 ticket-num">\n\u5151\u6362\u540e\u83b7\u5f97\uff1a<em></em>\u4e0b\u8f7d\u5238<span class="ticket_gift_tips">+\u8d603\u4e0b\u8f7d\u5238</span>\n</div>\n<div class="ticket-tips-item w4">\n\u5171\u6d88\u8017\uff1a<em class="ticket-wealth"></em>\u79ef\u5206</div>\n<div class="tikcet-tips-notice w4">\n\u4e0b\u8f7d\u5238\u6709\u6548\u671f\uff1a<em>30\u5929</em>\n</div>\n</div>\n</div>\n<a class="btn-green btn-l ticket-exchange-download-btn \n                        \'ticket-exchange-download-btn-disable" href="javascript:;"\n                    >\n\u5151\u6362\u5e76\u4e0b\u8f7d</a>\n</div>\n</div>\n<div class="vip-getback hide">\n<a href="javascript:;" class="ui-bz-btn-senior btn-vip-ticket-download">\n<b class="ui-bz-btn-p-16 ui-bz-btc">\u82b1\u8d39\u4e0b\u8f7d\u5238\u4e0b\u8f7d</b>\n</a><a href="###" class="ui-bz-btn">\n<b class="ui-bz-btn-p-16 ui-bz-btc">\n\u7eed\u8d39VIP<i>/\u8d605\u6b21\u4e0b\u8f7d\u7279\u6743</i>\n</b>\n</a>\n</div>\n<div class="user-dialog-download-btn-center hide">\n<a class="dialog-down-load-btn btn-green btn-l" href="javascript:void(0);">\n\u7eed\u8d39VIP</a>\n<a class="btn-orange btn-l ml24" href="/user/mydocs?check_new_user_gift=1">\n<b class="gift-icon"></b>\u9886\u53d6\u65b0\u624b\u793c\u5305</a>\n</div>\n<div class="dialog-down-load-btn-center">\n<a class="dialog-down-load-btn btn-green btn-l" href="javascript:void(0);">\n\u7eed\u8d39VIP</a>\n</div>\n<div class="vcode-box vcode-disable">\n<input type="text" class="vcode-ipt" />\n<img src="" />\n<span class="vcode-change">\u6362\u4e00\u6362</span>\n<b class="vcode-right"></b>\n<p class="error-tip">\n<b class="vcode-error"></b>\n<span>\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801\uff01</span>\n</p>\n</div>\n<div class="download-btn-others">\n<a href="/cashier/browse/dispatch?doc_id=\' + docId + \'" target="_blank" \n                    class="download-btn-tip">\n\u7eed\u8d393\u6708\u5373\u9001\u4e0b\u8f7d\u7279\u6743</a>\n</div>\n</div>\n<div class="dialog-bottom">\n<p id="bottom-btn" class="bottom-btn">\u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d</p>\n<p id="price10-bottom-btn" class="price10-bottom-btn hide" style="text-decoration: none;">\n\u7531\u4e8e\u6587\u6863\u4ef7\u683c\u8f83\u9ad8\uff0c\u5efa\u8bae\u60a8\u4f7f\u7528<span style="text-decoration: underline; color: #139f72;">\n\u4e0b\u8f7d\u7279\u6743</span>\u4e0b\u8f7d</p>\n<p class="bottom-msg">\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u8d22\u5bcc\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</p>\n</div>\n</div>\n</div>')(h),e=document.createElement("div"),e.id="WkDialogDownDoc",e.style.display="none",e.innerHTML=c,t.insertBefore(e,t.firstChild),a(e).after(n),a(e).addClass("hide"),this.el=e},setIsVipBackBtn:function(){a(".dialog-down-load-btn-center").hide(),a(".download-btn-others").hide(),a(".vip-getback").show()},setNewUserGift:function(){a(".dialog-down-load-btn-center").hide(),a(".user-dialog-download-btn-center").show()},vcodeOk:function(){a(".vcode-box .vcode-right").css("visibility","visible"),a(".vcode-box .error-tip").css("height","0px")},vcodeError:function(){a(".vcode-box .error-tip").css("height","16px"),a(".vcode-box .vcode-right").css("visibility","hidden")},vcodeImg:function(){var e=this;a.get("/vcode?t="+(new Date).getTime(),function(t){a(".vcode-box img").attr("src",t.imgurl),e.vcodeValue=t.vcode_str,window.postVcode=e.vcodeValue})},bindEvent:function(){var e=this;a(".close-btn").click(function(){e.close()}),a(".vcode-change").on("click",function(){e.vcodeImg()}),a(".vcode-ipt").on("input propertychange",function(){if(a(this).val().length>5)e.vcodeError();else if(4===a(this).val().length){var t=a(this).val();a.ajax({url:"/user/interface/vcodefordownload",type:"get",cache:!1,data:{m:"check",v_code:e.vcodeValue,v_input:t}}).done(function(i){i.errno?e.vcodeError():(e.vcodeOk(),e.vcodePass=!1,window.postVcode=e.vcodeValue,window.postVinput=t)})}else a(".vcode-box .vcode-right").css("visibility","hidden"),a(".vcode-box .error-tip").css("height","0px")}),document.downloadForm.storage.value=1,document.downloadForm.useTicket.value=0,a(".dialog-down-load-btn").click(function(){if(e.vcodePass)return e.vcodeError(),!1;var t=a(this).text();if("\u7acb\u5373\u4e0b\u8f7d"===t||"\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d"===t)document.downloadForm.useTicket.value="\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d"===t?1:0,e.close(),s.lang.eventCenter.dispatchEvent("download.toGetFile"),d.xsend(1,100036);else if("VIP\u514d\u4e0b\u8f7d\u5238\u4e0b\u8f7d"===t){var i=o.get("isDownloadTongJi");switch(i){case 0:i="31_8_13_15";break;case 1:i="31_8_13_16";break;case 2:i="31_8_13_17"}var n=s.url.getQueryValue(location.href,"isVipfree")||"";(1===+n||2===+n)&&(i="download_frSearch_test"),window.open("/cashier/browse/dispatch?doc_id="+h+"&dqStatCode="+i),d.xsend(1,102497,{isVip:0,jingpin_vip_test:n})}else"\u7f34\u8d39VIP"===t?window.open("/cashier/browse/dispatch?doc_id="+h):"\u7eed\u8d39VIP"===t?window.open("/cashier/browse/dispatch?doc_id="+h):"VIP\u793c\u5305\u8d60\u7279\u6743"===t&&window.open("/cashier/browse/vippackagecashier?dqStatCode=31_23_38_39&from_doc="+h)}),a(".ticket-exchange-download-btn").on("click",function(){return e.vcodePass?(e.vcodeError(),!1):void(a(this).hasClass("ticket-exchange-download-btn-disable")||(document.downloadForm.useTicket.value=0,e.close(),s.lang.eventCenter.dispatchEvent("download.toGetFile"),d.xsend(1,100036)))}),a(".wealth-5-btn-use-down-load-ticket").click(function(){e.close(),document.downloadForm.useTicket.value=0,s.lang.eventCenter.dispatchEvent("download.toGetFile")}),a(".wealth-5-btn-use-free").click(function(){var e=o.get("WkInfo").DocInfo.docId;window.open("/cashier/browse/dispatch?doc_id="+e+"&dqStatCode=31_8_13_19")}),a(".ticket-user-free-download-btn").click(function(){var e=o.get("WkInfo").DocInfo.docId;window.open("/cashier/browse/dispatch?doc_id="+e+"&dqStatCode=31_8_13_16")}),a("#price10-bottom-btn").click(function(){var e=o.get("WkInfo").DocInfo.docId;window.open("/cashier/browse/dispatch?doc_id="+e+"&dqStatCode=31_8_13_18")}),a(".bottom-btn").click(function(){var t=a(this).text();if("\u52a0\u5165\u6587\u5e93VIP\uff0c\u4e0b\u8f7d\u7279\u6743\u968f\u5fc3\u7528\uff01"===t)window.open("//wenku.baidu.com/cashier/browse/dispatch?dqStatCode=download_pop_tips");else if("\u52a0\u5165\u6587\u5e93VIP,\u514d\u8d39\u4e0b\u8f7d\u6587\u6863,\u8fd8\u6709\u66f4\u591aVIP\u7279\u6743"===t){var i=o.get("WkInfo").DocInfo.docId;window.open("/cashier/browse/dispatch?doc_id="+i+"&dqStatCode=31_8_13_14")}else"\u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d"===t?(s.lang.eventCenter.dispatchEvent("download.toUseU"),e.changeUseU()):"\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d"===t&&(s.lang.eventCenter.dispatchEvent("download.toUseT"),e.changeUseT())}),a(".btn-vip-freedoc-download").on("click",function(){return e.vcodePass?(e.vcodeError(),!1):(b().confirm({title:"\u4e0b\u8f7d\u6587\u6863",content:'<iframe width="460" height="220" name="runDown" frameborder="0"></iframe>',width:500,height:220,onRendered:function(){document.downloadForm.useTicket.value=0,document.downloadForm.req_vip_free_doc.value=1,e.close();var t=(g.DocInfo.size/1024+"").replace(/^(\d+\.\d)\d+$/,"$1");if(!r.isSupport(t)){var i=window.postVcode||0,n=window.postVinput||0;a(document.downloadForm).find("input[name=v_code]").val(i),a(document.downloadForm).find("input[name=v_input]").val(n),s.lang.eventCenter.dispatchEvent("download.realStart")}var o=function(){if(r.isSupport(t)){var e={},i=a(document.downloadForm);a.each(i.serializeArray(),function(t,i){e[i.name]=i.value}),e.v_code=window.postVcode||0,e.v_input=window.postVinput||0,e.method="async",a.post(i.attr("action"),e,function(e){r.download({url:e.url,title:p.title,fileSize:t,fileType:window.docType||p.docType})},"json")}else document.downloadForm.submit()};v.run(document.downloadForm,o),d.xsend(1,100274)}}),void b().hide())}),a(".ticket-exchange-btn").on("click",function(){a(".ticket-btn-container").addClass("hidden"),a(".ticket-raido-container").removeClass("hidden"),d.xsend(1,100194,{isVip:e.useMessageData.isvip}),e.getVcode()&&(e.vcodePass=!0,a(".vcode-box").show(),e.vcodeImg())})},setVcode:function(e){this.vcodeFlag=e},getVcode:function(){return this.vcodeFlag},changeUseU:function(){var e=this;if(e.useMessageData.needUticket<=e.useMessageData.UticketCount)return e.set1Msg("\u6240\u9700\u4e0b\u8f7d\u5238\uff1a"+e.useMessageData.needUticket),e.set2Msg("\u60a8\u6301\u6709\u7684\u4e0b\u8f7d\u5238\uff1a"+e.useMessageData.UticketCount),e.setBtnMsg("\u7acb\u5373\u4e0b\u8f7d"),e.setBottomMsg("\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d"),void d.xsend(1,100118);if(e.useMessageData.UticketCount<e.useMessageData.needUticket&&e.useMessageData.canUticket+e.useMessageData.UticketCount>=e.useMessageData.needUticket){var t=e.useMessageData.needUticket-e.useMessageData.UticketCount;return e.set1Msg("\u6240\u9700\u4e0b\u8f7d\u5238\uff1a"+e.useMessageData.needUticket),e.set2Msg("\u60a8\u6301\u6709"+e.useMessageData.UticketCount+"\u4e0b\u8f7d\u5238,\u53ef\u7528"+t*e.useMessageData.exchangeRate+"\u79ef\u5206\u5151\u6362"+t+"\u4e0b\u8f7d\u5238"),e.setBottomMsg("\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d"),e.batchDownloadDoc({UticketCount:e.useMessageData.UticketCount,needUticket:e.useMessageData.needUticket,wealth:e.useMessageData.wealth,exchangeRate:e.useMessageData.exchangeRate,canUticket:e.useMessageData.canUticket,NTicket:t}),e.setBatchDownloadDoc(),void d.xsend(1,100193,{isVip:e.useMessageData.isvip})}return e.useMessageData.ticketCount>0&&e.useMessageData.UticketCount<e.useMessageData.needUticket&&e.useMessageData.canUticket+e.useMessageData.UticketCount<e.useMessageData.needUticket?(e.set1Msg("\u6240\u9700\u4e0b\u8f7d\u5238\uff1a"+e.useMessageData.needUticket),e.set2Msg("\u60a8\u6301\u6709"+e.useMessageData.UticketCount+"\u4e0b\u8f7d\u5238\uff0c\u79ef\u5206\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5151\u6362\u4e0b\u8f7d\u5238"),e.setBtnMsg("\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d"),e.setBottomMsg("\u52a0\u5165\u6587\u5e93VIP\uff0c\u4e0b\u8f7d\u7279\u6743\u968f\u5fc3\u7528\uff01"),void d.xsend(1,100120)):e.useMessageData.UticketCount<e.useMessageData.needUticket&&e.useMessageData.canUticket+e.useMessageData.UticketCount<e.useMessageData.needUticket?(e.set1Msg("\u6240\u9700\u4e0b\u8f7d\u5238\uff1a"+e.useMessageData.needUticket),e.set2Msg("\u60a8\u6301\u6709"+e.useMessageData.UticketCount+"\u4e0b\u8f7d\u5238\uff0c\u79ef\u5206\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5151\u6362\u4e0b\u8f7d\u5238"),e.setBtnMsg("VIP\u793c\u5305\u8d60\u7279\u6743"),e.setBottomMsg("\u52a0\u5165\u6587\u5e93VIP\uff0c\u4e0b\u8f7d\u7279\u6743\u968f\u5fc3\u7528\uff01"),void d.xsend(1,100121)):void 0},changeUseT:function(){var e=this;e.useMessageData.ticketCount>1&&(e.set1Msg("\u60a8\u5269\u4f59\u4e0b\u8f7d\u7279\u6743\uff1a"+e.useMessageData.ticketCount),e.set2Msg(""),e.setBtnMsg("\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d"),e.setBottomMsg("\u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d"),d.xsend(1,100122)),e.useMessageData.ticketCount<1&&(e.set1Msg("\u60a8\u5269\u4f59\u4e0b\u8f7d\u7279\u6743\uff1a0"),e.set2Msg(""),e.setBtnMsg("VIP\u793c\u5305\u8d60\u7279\u6743"),e.setBottomMsg("\u4f7f\u7528\u4e0b\u8f7d\u5238\u4e0b\u8f7d"),d.xsend(1,100123)),e.closeBatchDownloadDoc()},setMessage:function(e){this.useMessageData=e},show:function(){var e=this,t=a(window).height();a(this.el).css("display","block"),a(".dialog-container-iframe").css({display:"block",height:a("body").height()}),e.getVcode()&&a(".ticket-no-wealth-container").hasClass("hide")&&(e.vcodePass=!0,a(".vcode-box").show(),e.vcodeImg()),a("#WkDialogDownDoc").css("top",t/2-150),a("#doc_reader")&&!this.isChrome&&a("#doc_reader").css("visibility","hidden")},close:function(){a(this.el).css("display","none"),a(".dialog-container-iframe").css("display","none"),a("#doc_reader")&&a("#doc_reader").css("visibility","visible")},setContent:function(){},set1Msg:function(e){a(this.el).find(".msg1").html(e)},set2Msg:function(e){a(this.el).find(".msg2").html(e)},setBtnMsg:function(e){a(this.el).find(".dialog-down-load-btn").text(e),"\u7f34\u8d39VIP"===e||"\u7eed\u8d39VIP"===e?a(".download-btn-tip").css("visibility","visible"):a(".download-btn-tip").css("visibility","hidden")},setBottomMsg:function(e){a(this.el).find("#bottom-btn").text(e)},setWealth5:function(){a(".dialog-down-load-btn-center").addClass("hide"),a(".download-btn-others").addClass("hide"),a(".wealth-5-container").removeClass("hide")},setPrice10:function(){a(this.el).find(".bottom-btn").addClass("hide");var e=a(this.el).find("#price10-bottom-btn");a(e).removeClass("hide")},setBatchDownloadDoc:function(){a(".dialog-down-load-btn-center").add(a(".download-btn-others")).addClass("hide"),a(".ticket-no-wealth-container").removeClass("hide")},closeBatchDownloadDoc:function(){a(".dialog-down-load-btn-center").add(a(".download-btn-others")).removeClass("hide"),a(".ticket-no-wealth-container").addClass("hide")},batchDownloadDoc:function(e){var t=a(this.el).find(".ticket-raido-container ul"),i=a(this.el).find(".ticket-num"),n=a(this.el).find(".ticket-wealth"),s=a(this.el).find(".other-input"),o=a(this.el).find(".ticket-tips"),c=0,l=a(this.el).find(".ticket-exchange-download-btn"),r=this,u=[3,5,10,30,50];this.timer=null,e&&e.wealth&&a(this.el).find(".ticket-radio-tips i").html(e.wealth);for(var v=0,g=u.length;g>v;v++)e.canUticket>=u[v]&&t.find('[data-value="'+u[v]+'"]').parent().removeClass("disable");var p,h,b,f,w=t.find("li:not(.disable)"),k=w.find(".sel-option"),m=function(){k.on("click",function(){if(k.removeClass("sel-option-cur"),a(this).addClass("sel-option-cur"),a(this).parent().hasClass("other")){var t=0;r.timer=setInterval(function(){return s.prev(".sel-option").hasClass("sel-option-cur")?(t=s.val()||0,void(!isNaN(t)&&p(t)&&h(t)&&b(t))):void clearInterval(r.timer)},300),d.xsend(1,100196,{data:0})}else{var i=+a(this).attr("data-value");switch(clearInterval(r.timer),h(i)&&(b(i),p(i)),i){case 3:d.xsend(1,100196,{data:1,isVip:e.isvip});break;case 5:d.xsend(1,100196,{data:2,isVip:e.isvip});break;case 10:d.xsend(1,100196,{data:3,isVip:e.isvip});break;case 30:d.xsend(1,100196,{data:4,isVip:e.isvip});break;case 50:d.xsend(1,100196,{data:5,isVip:e.isvip})}}}),s.on("keyup",function(){this.value=this.value.replace(/\D/g,"")}).on("focus",function(){a(this).prev(".sel-option").trigger("click")}).on("focusout",function(){clearInterval(r.timer)})};p=function(t){var a=0;if(t>e.canUticket)o.addClass("ticket-tips-wrong"),i.html("\u79ef\u5206\u4e0d\u8db3\uff0c\u8bf7\u51cf\u5c11\u60a8\u5151\u6362\u7684\u4e0b\u8f7d\u5238\u603b\u91cf\u3002");else if(t>1e3)o.addClass("ticket-tips-wrong"),i.html("\u522b\u592a\u8d2a\u5fc3\u54e6\uff0c\u5355\u6b21\u5151\u6362\u91cf\u8bf7\u52ff\u8d85\u8fc71000\u4e0b\u8f7d\u5238\u3002");else{o.removeClass("ticket-tips-wrong"),t>=50&&(a=5),50>t&&t>=30&&(a=3);var s=["\u5151\u6362\u540e\u83b7\u5f97\uff1a<em>"+t+"</em>\u4e0b\u8f7d\u5238",'<span class="ticket_gift_tips">+\u8d60'+a+"\u4e0b\u8f7d\u5238</span>"].join("");i.html(a>0?s:"\u5151\u6362\u540e\u83b7\u5f97\uff1a<em>"+t+"</em>\u4e0b\u8f7d\u5238"),n.html(e.exchangeRate*t)}return!0},f=function(){return l.removeClass("ticket-exchange-download-btn-disable"),e.canUticket>=50&&e.NTicket<=50?(t.find('[data-value="50"]').trigger("click"),void b(50)):e.canUticket>=30&&e.NTicket<=30?(t.find('[data-value="30"]').trigger("click"),void b(30)):e.canUticket>=10&&e.NTicket<=10?(t.find('[data-value="10"]').trigger("click"),void b(10)):e.canUticket>=5&&e.NTicket<=5?(t.find('[data-value="5"]').trigger("click"),void b(5)):e.canUticket>=3&&e.NTicket<=3?(t.find('[data-value="3"]').trigger("click"),void b(3)):(e.NTicket>0&&(t.find(".other .sel-option").trigger("click"),s.val(e.NTicket),b(e.NTicket)),e.NTicket>e.canUticket&&l.addClass("ticket-exchange-download-btn-disable"),a(".ticket-btn-container").removeClass("hidden"),void a(".ticket-raido-container").addClass("hidden"))},h=function(t){return t=+t,t&&!(t>e.canUticket||0===+t||t>1e3||t+e.UticketCount<e.needUticket)?(l.removeClass("ticket-exchange-download-btn-disable"),!0):(l.addClass("ticket-exchange-download-btn-disable"),!1)},b=function(e){c=e,a('input[name="target_uticket_num"]').val(c)};var _=function(){m(),f(),r.setBatchDownloadDoc()};_()},reset:function(){a(this.el).remove(),a(".dialog-container-iframe").remove(),this.init()}},i.exports=n});
;define("wkview:widget/fix_searchbar/fix_searchbar.js",function(a,e,s){var n=a("wkcommon:widget/ui/lib/jquery/jquery.js"),i=a("wkcommon:widget/lib/fis/data/data.js"),o=a("wkcommon:widget/lib/tangram/base/base.js"),t=a("wkcommon:widget/ui/lib/browser/browser.js"),r=a("wkcommon:widget/ui/js_core/log/log.js"),d=a("wkcommon:widget/ui/lib/cookie/cookie.js"),l=a("wkview:widget/doc_download_main/doc_download_main.js"),c=a("wkcommon:widget/ui/js_core/xform/xform.js"),p=a("wkcommon:widget/sessionX/sessionX.js"),h=a("wkview:widget/node_modules/davidshimjs-qrcodejs/qrcode.js"),f=a("wkcommon:widget/ui/js_core/xform/xform.js"),u=a("wkview:widget/node_modules/@baidu/el-visible/index.js"),m=a("wkcommon:widget/ui/js_core/login/login.js").login,b=a("wkcommon:widget/lib/doT/doT.min.js"),w=a("wkcommon:widget/ui/js_core/dropDown/dropDown.js").dropDownCreate,v=a("wkcommon:widget/user_bar/user_bar_newmember.js"),g=a("wkcommon:widget/ui/js_core/_dialog/_dialog.js").alert,x=a("wkcommon:widget/user_bar/user_bar_s.js"),_=p.sessionXMgr,k=v,y=i.get("WkInfo"),j=y.DocInfo.isPaymentDoc||0,I=y.DocInfo.professionalDoc||0,C=y.DocInfo.isInRoomButDeletedByCreater||!1,D=y.DocInfo.isdownloaded||0,B=b.template('<div class="fix-searchbar-wrap" style="display:none;">\n    <div class="bg-opacity"></div>\n    <div class="sb-con clearfix">\n        <div class="evaluate-wrap">\n            <div class="evaluate"></div>\n        </div>\n        <a href="/" class="wk-logo bg-fsb"></a>\n        <div class="search-form-wrap">\n            <div class="search-form-holder"></div>\n        </div>\n        <a class="gk-2016-flow log-xsend" target="_blank" data-logxsend="[1, 100781, {\u2018index\u2019: 1}]"></a>\n        <div class="qrHover">&nbsp;&nbsp;&nbsp;\n            <div class="wrap-big">\n                <div class="qrcode"></div>\n                <div class="qr-title">\u9a6c\u4e0a\u626b\u4e00\u626b</div>\n                <div class="qr-text">\n                    \u624b\u673a\u6253\u5f00<br>\n                    \u968f\u65f6\u67e5\u770b\n                </div>\n            </div>\n            <span class="open-in-phone">\n                <span style="font-size:14px;color:#5DC1A2;" class="iconfont">&#xe621;</span>\n                \u5728\u624b\u673a\u6253\u5f00\n            </span>\n            <div class="add-has-money-pay">\n                <div class="add-money-icon"></div>\n                <div class="add-has-money-text"></div>\n            </div>\n        </div>\n        <div class="top-down-load-container">\n            <a id="top-download-btn" class="top-download-btn ui-bz-btn-senior {{=it.disableddownload}}" href="javascript:void(0);">\n                <b class="ui-btn-p-16 ui-btn-btc">\n                    <i class="iconfont">&#xe62d;</i>\u4e0b\u8f7d</b>\n            </a> \n            <span class="top-download-price"> \n                <span class="top-download-text">{{=it.ticket}}&nbsp;\u4e0b\u8f7d\u5238</span>\n            </span> \n            <span class="top-download-tip" style="display:none;"> \n                <span class="text">\u505a\u4efb\u52a1\u9886\u4e0b\u8f7d\u5238</span> \n                <a href="//wenku.baidu.com/task/browse/daily" target="_blank" class="btn">\u7acb\u5373\u524d\u5f80</a> \n                <span class="adorn"></span> \n            </span> \n        </div>\n        <div class="user-bar-new {{? it.islogin }}user-bar-login{{?}}">\n            {{\n                if (+it.userInfo.isBusinessUser === 1) {\n                    it.userNameUrl = \'/user/business\';\n                }\n                else {\n                    it.userNameUrl = \'/user/mydocs\';\n                }\n            }}\n            <ul class="inner">\n                <!--\u672a\u767b\u5f55-->\n                {{? !it.islogin }}\n                <li>\n                    <a href="https://passport.baidu.com/v2/?login" id="login-btn" class="log-xsend"\n                        data-logxsend="[1, 102114, {\'index\': \'login\'}]">\n                    \u767b\u5f55\n                    </a>\n                </li>\n                <li style="position: relative;">\n                    <a href="/cashier/browse/vipcashier?dqStatCode=ViewXdVipWordKt&cashier_code=ViewXdVipWordKt" target="_blank"\n                        title="VIP" style="height: auto;" id="my-wkHome-vip-tips-search-bar-no-login">\n                        <span class="wk-color-vip-red">VIP\u65b0\u5ba2\u7acb\u51cf2\u5143</span>\n                    </a>\n                    <div class="vip-tips-hover-div clearfix" style="width: 180px;">\n                        <div class="vip-tips-hover-div-content">\n                            <ul>\n                                <li class="icon-pro-doc">\n                                    \u4eabVIP\u4e13\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743\n                                </li>\n                                <li class="icon-share-doc">\n                                    \u8d60\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743\n                                </li>\n                                <li class="icon-free-doc">\n                                    100w\u4f18\u8d28\u6587\u6863\u514d\u8d39\u4e0b\u8f7d\n                                </li>\n                                <li class="icon-yuedu-vip">\n                                    \u8d60\u767e\u5ea6\u9605\u8bfbVIP\u7cbe\u54c1\u7248\n                                </li>\n                            </ul>\n                            <a target="_blank"\n                                class="log-xsend vip-tips-hover-gotocashier ljkt-btn-gold vip-tips-hover-to-cashier"\n                                href="/cashier/browse/dispatch?dqStatCode=ViewXdVipBtmKt"\n                                data-logxsend="[1, 101547, {\'index\': \'fis-search-bar\' }]"> \u7acb\u5373\u5f00\u901a </a>\n                        </div>\n                    </div>\n                </li>\n                {{??}}\n                <li class="mn-lk-w member-icon" id="user-bar-uname">\n                    {{? it.userInfo.isNoUsername && +it.userInfo.isFrom }}\n                        {{? +it.userInfo.isFrom === 2 }}\n                            <b class="ic ic-sina"></b>\n                        {{?? +it.userInfo.isFrom === 1 }}\n                            <b class="ic ic-renren"></b>\n                        {{?? +it.userInfo.isFrom === 15 }}\n                            <b class="ic ic-qq"></b>\n                        {{?}}\n                    {{?}}\n                    <a id="userNameCon" href="{{=it.userNameUrl}}" target="_blank"\n                        class="uname-search-bar mn-lk user-my-name log-xsend user-bar-home-link"\n                        data-logxsend="[1, 100795, {\'index\': \'fis-search-bar\' }]"\n                    >\n                        <span class="text-dec-under">\n                            {{? it.userInfo.displayname }}\n                                {{=it.userInfo.displayname}}\n                            {{??}}\n                                {{=it.userInfo.userName}}\n                            {{?}}\n                        </span>\n                        <span id="wk-user-icon-home-search-bar">\n                            <i class="iconfont ic-not-vip member-icon">&nbsp;&nbsp;&nbsp;</i>\n                        </span>\n                    </a>\n                    <div class="user-my-name-tip-search-bar user-mn-tip">\n                        <ul class="user-mn-tip-inner">\n                            <li class="user-info-wrap">\n                                <div class="user-image" style="background-image:url({{=it.userInfo.headicon}})"></div>\n                                <div class="user-tip-info">\n                                    <a class="user-name log-xsend" href="{{=it.userNameUrl}}" target="_blank" data-logxsend="[1, 101969, {\'index\':\'name-search-bar\'}]">\n                                        {{? it.userInfo.displayname }}\n                                            {{=it.userInfo.displayname}}\n                                        {{??}}\n                                            {{=it.userInfo.userName}}\n                                        {{?}}\n                                        <div class="tip-vip-ico">\n                                        </div>\n                                    </a>\n                                    <div class="vip-info">\n                                        <span class="tip-vip-status">\u60a8\u8fd8\u672a\u5f00\u901aVIP</span>\n                                        <a class="tip-vip-btn-search-bar" href="/ndcashier/browse/jiaoyuvipcashier?cashier_code=ViewXdIdcardKt" target="_blank">\u7acb\u5373\u5f00\u901a</a>\n                                    </div>\n                                </div>\n                                <a href="http://passport.baidu.com/?logout&aid=7&u=http%3A%2F%2Fwenku.baidu.com" id="logout-btn" class="log-xsend tip-logout" data-logxsend="[1, 102114, {\'index\': \'logout\'}]">\u9000\u51fa</a>\n                            </li>\n                            <li class="card-info">\n                                <a class="card-item log-xsend" href="{{=it.userNameUrl}}" target="_blank" data-logxsend="[1, 101969, {\'index\':\'user-search-bar\'}]">\n                                    <span class="card-ico"><i class="user-card"></i></span>\n                                    \u4e2a\u4eba\u4e2d\u5fc3\n                                </a>\n                                <a class="card-item log-xsend" href="/ndvipmember/browse/index" target="_blank" data-logxsend="[1, 101969, {\'index\':\'vip-search-bar\'}]">\n                                    <span class="card-ico"><i class="vipmember-card"></i></span>\n                                    \u4f1a\u5458\u4e2d\u5fc3\n                                </a>\n                                <a class="card-item log-xsend" href="/user/task?fr=status" target="_blank" alog-action="fisSearchBar.mytask" data-logxsend="[1, 101969, {\'index\':\'task-search-bar\'}]">\n                                    <span class="card-ico"><i class="task-card"></i></span>\n                                    \u6211\u7684\u4efb\u52a1\n                                </a>\n                                {{? +it.userInfo.isPGC }}\n                                    <a class="card-item log-xsend" href="/p/{{=it.userInfo.uname}}" target="_blank" class="log-xsend" data-logxsend="[1, 100134, {\'index\':\'pgc-search-bar\'}]">\n                                        <span class="card-ico"><i class="auth-card"></i></span>\n                                        \u4e2a\u4eba\u4e3b\u9875\n                                    </a>\n                                {{?? +it.userInfo.isBGC }}\n                                    <a class="card-item log-xsend" href="/wenkuverify?from=3" target="_blank" id="user-bar-my-home-search-bar" class="log-xsend org-home" data-logxsend="[1, 100135, {\'index\':\'bgc-search-bar\'}]">\n                                        <span class="card-ico"><i class="auth-card"></i></span>\n                                        \u6211\u7684\u4e3b\u9875\n                                    </a>\n                                {{??}}\n                                    <a class="card-item log-xsend" href="/wenkuverify?from=3" target="_blank" class="log-xsend org-home" data-logxsend="[1, 100135, {\'index\':\'auth-search-bar\'}]">\n                                        <span class="card-ico"><i class="auth-card"></i></span>\n                                        \u7533\u8bf7\u8ba4\u8bc1\n                                    </a>\n                                {{?}}\n                            </li>\n                        </ul>\n                    </div>\n                </li>\n                <li><a href="/user/vip" target="_blank" title="" style="height: auto;" id="my-wkHome-vip-tips-search-bar"></a></li>\n                {{?}}\n                <!--\u767b\u5f55-->\n            </ul>\n        </div>\n        <div class="fix-searchbar-gaokao"></div>\n        <div class="tob-fc-bar"></div>\n    </div> \n    <div class="fix-searchbar-ad">\n        <a href="javascript:;" class="btn-fix-searchbar-close"></a> \n        <a href="//wenku.baidu.com/miti" class="fix-searchbar-img log-xsend" data-logxsend="[1, 100452]" target="_blank"> \n            <img src="https://edu-wenku.bdimg.com/icms_transform/img/iknow/wenku/img_miti_topbar_400x50.png" />\n        </a> \n    </div>\n</div>'),S=function(a){this.defaultConfig={evaluateBoxId:"",evaluateTagId:""},this.config=n.extend(!0,this.defaultConfig,a||{}),this.init.call(this)};S.prototype={constructor:S,init:function(){this._createDom(),this._setElWidth(),this._cache(),this._initScrollEl(),this._initAddMoneyAd(),this._initEvent(),this._showDownloadTip(),this._initAd(),this.onResizeOpenInPhone(),this.log(),this.hasDownloadItem=0},lastShowHideSwitchTime:0,lastHandleScrollTime:0,log:function(){u.onElsVisible(".fix-searchbar-wrap .open-in-phone",function(){r.xsend(101788)}),n(".fix-searchbar-wrap .open-in-phone").mouseenter(function(){r.xsend(101789)})},_initEvent:function(){function a(a,e){var s=["<style>",a+"{","background-image:url("+e+");","background: none no-repeat left top\\9;","filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+e+", sizingMethod=scale);","}","</style>"].join("");n("head").append(s)}function e(a){var e=new Date,s="__wk_";return s+=a+"_",s+=e.getFullYear(),s+=e.getMonth(),s+=e.getDate()}function s(a,e){var s=new n.Deferred;return n.ajax({dataType:"json",url:"/xpage/form/getform?id=wk_pc_skin",success:function(n){n.status&&0===n.status.code?s.resolve(n.data.form_data[a+"_strategy"][e+"_is_open"],n.data.form_data[a+"_strategy"]):s.resolve(!1)},error:function(){s.resolve(!1)}}),s.promise()}var t=this;setInterval(function(){t._initScrollEl()},500),n(".s_ipt").on("focus",function(){n(this).parent().addClass("ipt-wr-hover")}),n(".s_ipt").on("blur",function(){n(this).parent().removeClass("ipt-wr-hover")}),n(".fix-searchbar-wrap").on("mouseover",".open-in-phone",function(){if(!n(this).hasClass("hide-text")){if(n(".fix-searchbar-wrap .qrHover .wrap-big").show(),!t.qrcodeBig){var a=i.get("WkInfo").DocInfo.docId,e="https://wk.baidu.com/topic/nadownload?refer=1021578u&deeplink=1&docid="+a;t.qrcodeBig=new h(n(".fix-searchbar-wrap .qrHover .wrap-big .qrcode")[0],{text:e,width:90,height:90,correctLevel:h.CorrectLevel.L})}n(".wrap-big").mouseover(function(){n(this).show()}).mouseout(function(){n(this).hide()})}}).on("mouseout",".open-in-phone",function(){n(this).hasClass("hide-text")||n(".fix-searchbar-wrap .qrHover .wrap-big").hide()}),o.lang.eventCenter.addEventListener("Reader.zoomChange",function(){t._setElWidth(),t._setElPos()}),n(window).resize(n.proxy(this.onResizeOpenInPhone,this)),this.hasDownloadItem&&this.downloadBtn&&n(this.downloadBtn).click(function(){r.xsend(1,102340,{type:"download",from:"searchBox"}),r.xsend(100035,{pos:"top"});var a=_.getSessionItem("fromSearchOptFirst"),e=n.extend(!0,{page:"view",pos:"top"},a);r.xsend(101592,e);var s=y.DocInfo.isInRoomButDeletedByCreater?"\u6743\u9650\u95ee\u9898":"\u7248\u6743\u65b9\u8981\u6c42";n(this).hasClass("downloadDisabled")?g({title:"\u63d0\u793a",content:'<p style="font-size:14px;margin:20px;text-align:center;">\u8be5\u6587\u6863\u56e0'+s+"\uff0c\u4ec5\u652f\u6301\u5728\u7ebf\u9605\u8bfb\u54e6\u3002</p>",width:350,height:180}):l.goSpecialDownload(y),(2e3===t.topBarFcEid||2001===t.topBarFcEid||2002===t.topBarFcEid)&&r.xsend(101658,{index:3,fcEid:t.topBarFcEid})});var d=n(".fix-searchbar-wrap").find(".fix-searchbar-ad");d.on("click",".btn-fix-searchbar-close",function(a){a.stopPropagation(),d.fadeOut()}),o.lang.eventCenter.addEventListener("syncUserInfo",function(a){var e=a.data,s=o.json.parse(e),r=o.json.parse(e),d=+r.data.vipinfo.type,l=+r.data.edu_vip_info.is_vip,c=+r.data.jiaoyu_vip_info.vip_status,p=r.data.org_eng_name,h=s.data||{};if(2111===+h.sf_svip&&(n("body").addClass("sf-2111"),k=x),0===r.status.code&&p){var f=n(".org-home");n("#user-bar-my-home-search-bar").attr("href","/org/view?org="+p),"\u6211\u7684\u4e3b\u9875"===f.text()&&f.attr("href","/org/view?org="+p)}var u="\u6211\u7684\u6587\u5e93VIP",m="/user/vip",b="",w=0===l?"":'<span class="iconfont ic-eduVip">&#xe64e;</span>',v=0===d?"":'<span class="iconfont ic-classVip">&#xe64e;</span>',g=0===c?"":'<span class="iconfont ic-jiaoyuVip"></span>',_=n(".user-mn-tip");if(l||d||c){(d||c)&&_.addClass("vip-mn-tip");var y=r.data.vipinfo.nor_end_time,j=r.data.edu_vip_info.expire_time,I=r.data.jiaoyu_vip_info.expire_time,C=n(".tip-vip-status"),D=n(".tip-vip-btn-search-bar"),B="",S="/ndcashier/browse/jiaoyuvipcashier?cashier_code=";if(d&&c){var z=new Date(y),T=new Date(I);B=z>T?y:I,B+="\u5230\u671f",D.text("\u7acb\u5373\u7eed\u8d39"),D.attr("href",S+"ViewXdIdcardXf")}else c?(B=I+"\u5230\u671f",D.text("\u7acb\u5373\u7eed\u8d39"),D.attr("href",S+"ViewXdIdcardXf")):d?(B=y+"\u5230\u671f",D.text("\u7acb\u5373\u5347\u7ea7"),D.attr("href",S+"ViewXdIdcardSj")):l&&(B=j+"\u5230\u671f",D.attr("href",S+"ViewXdIdcardKt"));C.html(B)}else{b='<span class="iconfont ic-not-vip">&#xe64e;</span>',u='<span class="wk-color-vip-red">\u52a0\u5165\u767e\u5ea6\u6587\u5e93VIP</span>',m="/cashier/browse/dispatch?dqStatCode=ViewXdVipWordKt";var E=i.get("WkInfo")||{};E.DocInfo&&E.DocInfo.docId&&(m+="&from_doc="+E.DocInfo.docId)}var q=n("#wk-user-icon-home-search-bar"),F=n("#my-wkHome-vip-tips-search-bar"),P=n(".tip-vip-ico");P.html(b+g+v+w),r.isSearchBar=!0;var U=k.initMemberPrivilege(r);u=U.icContent,m=U.vipWordLink,q&&(q.html(b+g+v+w),F&&F.html(u).attr("href",m).addClass("log-xsend").attr("data-logxsend","[1, 101547]"),t._setElPos())});var c=o.g("login-btn"),p=o.g("logout-btn");if(c&&o.on(c,"click",function(a){m.log(),setTimeout(function(){var a=o.dom.q("pass_login_form","login-normal","form")[0];if(a)var e=a.u;var s=encodeURI(location.href).replace(/[#?].*$/g,""),n="from_mod=fis_search_bar";e&&(s+=-1===s.indexOf("?")?"?"+n:"&"+n,e.value=s)},500),o.event.preventDefault(a)}),p){var f=location.href;i.get("logined_page")&&(f=i.get("logout_url")&&"string"==typeof i.get("logout_url")?i.get("logout_url"):"https://wenku.baidu.com"),p.href="https://passport.baidu.com/?logout&aid=7&u="+escape(f);var u=document.location.pathname,b=o.cookie.get("BDUSS"),w={homepage:/^\/$/i,edu:/^\/edu\/index$/i,ppt:/^\/ppt\/index$/i,pro:/^\/pro\/index$/i,form:/^\/form\/index$/i,org:/^\/org\//i,topic:/^\/topic$/i,search:/^\/search/i,catelist:/^\/list\//i,hotlist:/^\/hotlist/i,upload:/^\/new/i,submit:/^\/submit/i,view:/^\/view\//i,userlist:/^\/userlist\//i,latest:/^\/latest/i,album:/^\/album\//i,usercenter:/^\/(room|user\/)/i};for(var v in w)if(w.hasOwnProperty(v)){var j=w[v];j.test(u)&&b&&p.setAttribute("data-logsend",'{"send":["general","logout",{"refer":"'+v+'", "bduss":"'+b+'"}]}')}}s("view","topbar").then(function(s,i){if(s&&-1!==["0","3","10","25","28"].indexOf(y.DocInfo.flag)){var o=i.topbar_jump_url;r.xsend(1,102318,{opType:"show",jumpUrl:o}),a(".zsj-topbar.mini",i.topbar_pic_url),a(".zsj-topbar",i.topbar_big_pic_url);var t=e("hometop");localStorage[t]?n("body").prepend('<a class="zsj-topbar mini" target="_blank" href="'+o+'"><div class="close"></div></a>'):(n("body").prepend('<a class="zsj-topbar" target="_blank" href="'+o+'"><div class="close"></div></a>'),localStorage[t]=1,setTimeout(function(){n(".zsj-topbar").addClass("mini")},3e3)),n(".zsj-topbar").click(function(){r.xsend(1,102318,{opType:"click",jumpUrl:o})}),n(".zsj-topbar .close").click(function(a){a.stopPropagation(),a.preventDefault(),r.xsend(1,102319,{}),n(".zsj-topbar").hide()})}}),s("view","leftbar").then(function(e,s){if(e&&-1!==["0","3","10","25","28"].indexOf(y.DocInfo.flag)){var i=s.leftbar_jump_url;r.xsend(1,102320,{opType:"show",jumpUrl:i}),a(".zsj-leftbar-1",s.leftbar_pic1_url),a(".zsj-leftbar-2",s.leftbar_pic2_url),a(".zsj-leftbar-3",s.leftbar_pic3_url);var o='<a class="zsj-leftbar-1" target="_blank" href="'+i+'"></a>';o+='<a class="zsj-leftbar-2" target="_blank" href="'+i+'"></a>',o+='<div class="zsj-leftbar-3"></div>',n("body").append(o);var t=n(window),d=!1;t.scroll(function(){t.scrollTop()>300&&!d&&(n(".zsj-leftbar-1").addClass("follow"),n(".zsj-leftbar-2").addClass("follow"),n(".zsj-leftbar-3").addClass("follow"),d=!0),t.scrollTop()<=300&&d&&(n(".zsj-leftbar-1").removeClass("follow"),n(".zsj-leftbar-2").removeClass("follow"),n(".zsj-leftbar-3").removeClass("follow"),d=!1)}),n(".zsj-leftbar-1").click(function(){r.xsend(1,102320,{opType:"click",jumpUrl:i})}),n(".zsj-leftbar-2").click(function(){r.xsend(1,102320,{opType:"click",jumpUrl:i})});var l=!0,c=!1;n(".zsj-leftbar-3").click(function(){r.xsend(1,102321,{}),l&&(n(".zsj-leftbar-2").addClass("slideup").removeClass("slidedown"),n(".zsj-leftbar-3").hide(),l=!1)}),n(".zsj-leftbar-1").mouseover(function(){l||n(".zsj-leftbar-2").addClass("slidedown").removeClass("slideup")}),n(".zsj-leftbar-1").mouseout(function(){l||setTimeout(function(){c||n(".zsj-leftbar-2").addClass("slideup").removeClass("slidedown")},200)}),n(".zsj-leftbar-2").mouseover(function(){l||(c=!0)}),n(".zsj-leftbar-2").mouseout(function(){l||(c=!1,n(".zsj-leftbar-2").addClass("slideup").removeClass("slidedown"))})}}),s("view","toppos").then(function(e,s){if(e&&-1!==["0","3","10","25","28"].indexOf(y.DocInfo.flag)){var i=s.toppos_jump_url;r.xsend(1,102322,{opType:"show",jumpUrl:i}),a(".zsj-toppos",s.toppos_pic_url);var o=n(".fix-searchbar-wrap").find(".qrHover");o.html('<a class="posbtn" target="_blank" href="'+i+'"></a>'),o.addClass("zsj-toppos").removeClass("qrHover"),n(".zsj-toppos .posbtn").click(function(){r.xsend(1,102322,{opType:"click",jumpUrl:i})})}})},onResizeOpenInPhone:function(){n(window).width()<=1232?n(".open-in-phone").addClass("narrow-screen"):n(".open-in-phone").removeClass("narrow-screen")},_initAddMoneyAd:function(){function a(){n(window).width()<=1232?n(".add-has-money-pay, .add-money-icon").hide():n(window).width()<1334&&n(window).width()>1232?(n(".add-has-money-pay, .add-money-icon").show(),n(".add-has-money-pay").css({"line-height":"20px"}),n(".add-has-money-pay .banner-text").css({"white-space":"normal",width:83}),n(".add-has-money-pay .hover-qrcode").css({top:2,left:-3})):n(window).width()>=1334&&(n(".add-has-money-pay, .add-money-icon").show(),n(".add-has-money-pay").css({"line-height":"44px"}),n(".add-has-money-pay .banner-text").css({"white-space":"nowrap"}),n(".add-has-money-pay .hover-qrcode").css({top:-5,left:0}))}f.getJSON("add_wenku_money_ad",{success:function(e){var s=n(".fix-searchbar-wrap").find(".add-has-money-pay");if(s.length>0&&e&&e.data&&e.data.view){var i=e.data.view;if(i.viewBannerText){var o;o=i.viewDialogImg?['<span class="banner-text log-xsend" data-href="',i.viewBannerLink,'">',i.viewBannerText,"</span>",'<div class="hover-qrcode" data-href="',i.viewDialogImgLink,'">','<img src="',i.viewDialogImg,'" >','<div class="text">',i.viewDialogText,"</div>","</div>"].join(""):['<span class="banner-text log-xsend" data-href="',i.viewBannerLink,'">',i.viewBannerText,"</span>"].join(""),n(".add-has-money-text",s).html(o),n(".add-money-icon").html('<div class="add-img"></div>'),a(),n(window).resize(function(){a()});var t=n(".add-has-money-pay .banner-text");t&&t.data("href")&&t.addClass("addUnderLine"),n(".add-has-money-pay .hover-qrcode")&&n(".add-has-money-pay .hover-qrcode").data("href")&&n(".add-has-money-pay .hover-qrcode").addClass("addcur"),t.click(function(){n(this).data("href")&&(window.location.href=n(this).data("href")),r.xsend(1,101662,{type:"click"})}),n(".add-has-money-pay .hover-qrcode").click(function(){n(this).data("href")&&(window.location.href=n(this).data("href")),r.xsend(1,101663,{type:"click"})}),s.find(".banner-text").mouseover(function(){r.xsend(1,101663,{type:"show"})})}}}})},_initAd:function(){var a=y.DocInfo.jiaoyu_vip_type,e=y.DocInfo.vip_type;if(!(a>0||e>0)){var s=this;n(window).on("topBarFcAd.tob",function(a,e){if(e&&e.data&&e.data.ad_place_data){n(".tob-fc-bar").html(e.data.ad_place_data).show();var i=e.data.ad_place_js,o="<script>"+i+"</script>";n("head").append(o),n("body").on("click",".tob-fc-bar",function(){r.xsend(1,101658,{index:1})}),r.xsend(1,101658,{index:2})}s.topBarFcEid=e.eid,(2e3===s.topBarFcEid||2001===s.topBarFcEid||2002===s.topBarFcEid)&&r.xsend(101658,{index:4,fcEid:s.topBarFcEid})})}},_initScrollEl:function(){var a=this,e=n(window).scrollTop(),s=+new Date;s-a.lastHandleScrollTime>100&&(a._switchPos(e),a._ctrlFSB(e),a.lastHandleScrollTime=s)},_createDom:function(){this.el=n(B({islogin:y.PageInfo.isLogin,userInfo:y.UserInfo,ticket:y.DocInfo.docTicket||0,disableddownload:j&&!D||C?" downloadDisabled":""})),n("body").append(this.el),n(".fix-searchbar-wrap").delegate(".s_btn","click",function(){r.send("view","cealingSearchboxUse"),r.xsend(1,100022,{word:n(".fix-searchbar-wrap .s_ipt").val()})}),n(document.body).delegate(".fsb-suggestion-main td","mouseup",function(){r.send("view","cealingSearchboxUse")});var a=o.q("uname-search-bar"),e=o.q("user-my-name-tip-search-bar");a.length&&w({bindEl:a[0],el:e[0],onShow:function(){r.xsend(1,101968)}})},_showDownloadTip:function(){var a=d.get("wkview_gotodaily_tip");"1"!==a&&d.set("wkview_gotodaily_tip",1,{expires:31536e6})},_setElWidth:function(){var a=this.el.find(".sb-con");a.css("width",n(".bd-wrap .body").width()-8)},_setElPos:function(){var a=document.getElementsByClassName("main");if(a[0]){var e=a[0].getBoundingClientRect(),s=n(".user-bar-new");s.css("left",e.width+18)}},_cache:function(){this.evaluateWrap=this.el.find(".evaluate-wrap"),this.evaluate=this.el.find(".evaluate"),this.searchFormWrap=this.el.find(".search-form-wrap"),this.searchForm=this.el.find(".search-form-holder"),this.downloadBtn=this.el.find(".top-download-btn"),this.dowloadEl=this.el.find(".top-down-load-container"),this.$gaokaoAd=n(".fix-searchbar-gaokao"),I||j||1===i.get("WkInfo").DocInfo.freeDoc||1===i.get("WkInfo").DocInfo.vip_free_buy?(this.dowloadEl.hide(),this.$gaokaoAd.addClass("down-sp")):this.hasDownloadItem=1},_switchPos:function(a){var e=this;e.scrollTimer&&clearTimeout(e.scrollTimer),e.scrollTimer=setTimeout(function(){y.isUgcTest||e._switchEvalutePos(a),e._switchSearchFormPos(a)},0)},_ctrlFSB:function(a){var e=this.el,s=this;n(window).on("adBarImg.scrollTop",function(){s.scrollZero=!0});var i=+new Date;a>110?((6===t.ie||"6"===t.ie)&&e.css({position:"absolute",top:a}),e.is(":hidden")&&i-s.lastShowHideSwitchTime>500&&(n(".fix-searchbar-wrap").length>0&&n(".fix-searchbar-wrap").fadeIn(200),r.xsend(1,100021),r.send("view","cealingSearchboxShow"),r.xsend(1,101662,{type:"show"}),s.lastShowHideSwitchTime=i,o.cookie.get("adshow")&&!o.cookie.get("nobar")&&(n(window).on("adBarImg.sendImgUrl",function(a,e){var s='url("'+e.barImgUrl.barLink+'") '+e.barImgUrl.barBgcolor+" no-repeat center";n(".ad-taishan-bar").css("background",s),n(".ad-taishan-bar a").attr("href",e.barImgUrl.clickLink),n(".ad-taishan-bar").css("display","block"),n(".fix-searchbar-wrap").animate({top:"44px"},1e3),n(".bg-opacity").animate({top:"44px"},1e3)}),s.scrollZero&&c.getJSON("taishanAd_link",{success:function(a){var e='url("'+a.barLink+'") '+a.barBgcolor+" no-repeat center";n(".ad-taishan-bar").css("background",e),n(".ad-taishan-bar a").attr("href",a.clickLink),n(".ad-taishan-bar").css("display","block"),n(".fix-searchbar-wrap").animate({top:"44px"},1e3),n(".bg-opacity").animate({top:"44px"},1e3),s.scrollZero=!1}}))),this.gaokaoshow&&(r.xsend(1,100782,{index:1}),this.gaokaoshow=!1)):70>a&&e.is(":visible")&&(n(".fix-searchbar-wrap").length>0&&n(".fix-searchbar-wrap").fadeOut(200),n(".ad-taishan-bar").css("display","none"),n(".fix-searchbar-wrap").css("top","0"),n(".bg-opacity").css("top","0"),s.lastShowHideSwitchTime=i)},_switchEvalutePos:function(){var a=this.config,e=a.evaluateBoxId,s=null;n(".reader-tools-bar "+e)[0]||(n(a.evaluatePreCl).after(n(e)),s=n(e),s.removeClass("fsb-evaluate"),s.css("display","block"),s.addClass("value-box-nofixed"),s.removeClass("value-box-fixed"))},_switchSearchFormPos:function(a){var e=this,s=null,i=n(".tangram-suggestion-main");a>110?(e.hasDownloadItem&&(e.dowloadEl.show(),e.$gaokaoAd.removeClass("down-sp")),e.el.find("#topSearchBox")[0]||(e.searchForm.replaceWith(n("#topSearchBox")),s=n("#topSearchBox"),t.chrome&&e.el.find("#kw").css("marginLeft","6px"),s.append('<input type="hidden" id="ext-spara" name="fr_ext" value="ceiling">'),s.addClass("fsb-search-form"),i.addClass("fsb-suggestion-main"),e.searchFormWrap.append('<div class="search-form-holder"></div>'),e.searchForm=e.el.find(".search-form-holder"))):70>a&&(e.hasDownloadItem&&(e.dowloadEl.hide(),e.$gaokaoAd.addClass("down-sp")),n(".top-search-box #topSearchBox")[0]||(n("#ext-spara").remove(),n(".s_nav").after(n("#topSearchBox")),s=n("#topSearchBox"),s.removeClass("fsb-search-form"),i.removeClass("fsb-suggestion-main")))},getXpageDataNew:function(){c.getJSON("gaokao_pc_flow",{success:function(a){if(a&&a.topbar){var e=['<span class="gk-icon-sp-t"></span>','<a href="#url#" class="log-xsend text-under" data-logxsend="[1, 101092, {index:#index#}]" ','target="_blank">',"#text#</a>"].join("");e=e.replace("#url#",a.topbar.url||"#"),e=e.replace("#text#",a.topbar.text||""),e=e.replace("#index#",a.topbar.index||0),n(".fix-searchbar-gaokao").html(e)}}})}},s.exports.fixSearchBar=S});
;define("wkview:widget/ad_taishan/ad_taishan.js",function(i,a,t){var e=i("wkcommon:widget/ui/lib/jquery/jquery.js"),o=i("wkcommon:widget/lib/tangram/base/base.js"),s=i("wkcommon:widget/ui/lib/browser/browser.js"),n=i("wkcommon:widget/ui/js_core/xform/xform.js"),r={isAction:!1,scrollValue:0,updateView:function(){this.scrollValue=e(window).scrollTop();var i='url("'+this.imageLink+'") '+this.imageBgcolor+" no-repeat center",a='url("'+this.barLink+'") '+this.barBgcolor+" no-repeat center";e(".ad-taishan").css("background",i),e(".ad-taishan-bar").css("background",a),e(".ad-taishan a").attr("href",this.clickLink),e(".ad-taishan-bar a").attr("href",this.clickLink)},init:function(){this.bindCloseEvent();var i=this;n.getJSON("taishanAd_link",{success:function(a){var t=new Date;t.getTime()>=i.dateFormat(a.startDate).getTime()&&t.getTime()<=i.dateFormat(a.endDate).getTime()&&(o.cookie.get("adshow")?(e(window).trigger("adBarImg.sendImgUrl",{barImgUrl:a}),0===e(window).scrollTop()&&e(window).trigger("adBarImg.scrollTop",{barImgUrl:a})):(i.imageLink=a.imageLink,i.imageBgcolor=a.imageBgcolor,i.barLink=a.barLink,i.barBgcolor=a.barBgcolor,i.clickLink=a.clickLink,i.updateView(),i.action(a)))}})},dateFormat:function(i){var a=i.split(/[\/\.-]/g),t=+a[0],e=+a[1],o=+a[2],s=new Date(t,e-1,o);return s},action:function(i){var a=this,t=e(".ad-taishan");0===a.scrollValue?(e(document.body).prepend(t),e(window).trigger("adBarImg.scrollTop",{barImgUrl:i})):e(".ad-taishan").addClass("ad-taishan-top"),t.slideDown(1500,function(){a.isUserAction(),a.isAction?a.showSlideUp(t):setTimeout(function(){a.showSlideUp(t)},2500)})},isUserAction:function(){var i=this;e(window).on("scroll click",function(){i.isAction=!0})},showSlideUp:function(i){var a=e(".ad-taishan-bar"),t=e(".bg-opacity"),o=e(".fix-searchbar-wrap"),s=o.css("display");i.slideUp(500,function(){"block"===s&&(a.css("display","block"),o.animate({top:"44px"},1e3),t.animate({top:"44px"},1e3))}),this.setCookie("adshow")},setCookie:function(i){var a=new Date,t=a.getFullYear(),e=a.getMonth(),s=a.getDate(),n=o.cookie.get(i);n||o.cookie.set(i,a.getTime(),{expires:new Date(t,e,s+1).getTime()-a.getTime(),path:"/"})},bindCloseEvent:function(){var i=this;(6===s.ie||"6"===s.ie)&&(e(".ad-taishan-bar").css({position:"absolute",top:i.scrollValue}),e(".ad-taishan").css({position:"absolute",top:i.scrollValue}));var a=e(".ad-bar-close");a.on("click",function(){e(".ad-taishan-bar").css("display","none"),e(".fix-searchbar-wrap").css("top","0"),e(".bg-opacity").css("top","0"),i.setCookie("nobar")})}};t.exports=r});
;define("wkview:widget/ad/commonAd/commonAd.js",function(t,i,o){var n=t("wkcommon:widget/ui/lib/jquery/jquery.js"),r={loadCommonAd:function(){(window.cproArray=window.cproArray||[]).push({id:"u2280094"}),(window.cproStyleApi=window.cproStyleApi||{}).u2280094={at:"3",rsi0:"966",rsi1:"190",pat:"6",tn:"baiduCustNativeAD",rss1:"#FFFFFF",conBW:"1",adp:"1",ptt:"0",titFF:"%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91",titFS:"14",rss2:"#000000",titSU:"0",ptbg:"90",piw:"0",pih:"0",ptp:"0"}},loadWMjs:function(){var t=document.createElement("script");t.src="https://cpro.baidustatic.com/cpro/ui/c.js",n("body").append(t)},init:function(){var t=this,i=setTimeout(function(){t.loadCommonAd(),t.loadWMjs(),clearTimeout(i)},3e3)}};o.exports=r});
;define("wkview:widget/doc_download_main/submit.js",function(o,n,e){var t=o("wkcommon:widget/lib/fis/data/data.js"),i=o("wkview:widget/format_convert/download_handler/download_handler.js"),d=t.get("WkInfo")||{},r=d.DocInfo||{},a=o("wkcommon:widget/ui/lib/jquery/jquery.js"),w=function(){};w.prototype={constructor:w,run:function(o,n){var e=a(o).serializeObject(),t=window.dataFormatConvert||{};a.extend(e,{transDocType:t.docTypeConvert}),i.needConvert(t,r,window.vipInfo)?i.run(o.action,e,r):"function"==typeof n?n():o.submit()}},e.exports=new w});
;define("wkview:widget/doc_download_main/doc_download_main.js",function(o,e,i){function n(){}var a=o("wkview:widget/ui/view/down_doc/down_org_vip.js"),t=o("wkview:widget/ui/view/down_doc/down_doc.js").downDoc,d=o("wkcommon:widget/ui/js_core/login/login.js").login,c=o("wkcommon:widget/lib/tangram/base/base.js"),w=o("wkcommon:widget/ui/js_core/log/log.js"),l=o("wkview:widget/ui/view/down_doc/dialog_down_doc/dialog_down_doc.js"),r=(o("wkview:widget/ui/view/vip_cashier/vip_cashier.js"),o("wkview:widget/ui/view/small_flow_vipcashier/smallFlow.js"),o("wkview:widget/ui/view/small_flow_vipcashier/smallflow_vip_conf.js"),n.prototype);r.goSpecialDownload=function(o){var e=this;e.WkInfo=o;var i=$.ajax({url:"/orgvip/interface/caniuse",cache:!1,async:!1,type:"get",data:{doc_id:o.DocInfo.docId,dowmloadTime:(new Date).getTime()}}),n=$.ajax({url:"/xpage/form/getform?id=wenku_view_download_optimize"});$.when(i,n).done(function(o,i){window.wenkuViewDwnloadOptimize=i&&i[0]&&i[0].data&&i[0].data.form_data&&i[0].data.form_data.open,o=o&&o[0],$.proxy(e.tryDirectDownload,e)(o)}).fail(e.normal)},r.tryDirectDownload=function(o){var e=this,i=o&&void 0!==o.status.code&&(11===+o.data.vip_type||1===+o.data.vip_type);if(i){if(o.data.eduai&&0===o.status.code){var n=l.get("eduaiTip",o.data);return void n.show(function(){$(".eduai-stay-wenku a").on("click",function(){setTimeout(function(){a.init({WkInfo:e.WkInfo,docSize:(e.WkInfo.DocInfo.size/1024+"").replace(/^(\d+\.\d)\d+$/,"$1"),downDoc:t,caniuse:o}),a.downloaddoc()},100)})})}a.init({WkInfo:e.WkInfo,docSize:(e.WkInfo.DocInfo.size/1024+"").replace(/^(\d+\.\d)\d+$/,"$1"),downDoc:t,caniuse:o})}else if(1===window.wenkuViewDwnloadOptimize){e.wealth=0,e.pay=0,e.code=4;{parseInt(o.status.code,10)}void 0!==o.data.org_privilege_left&&(e.wealth=o.data.org_privilege_left||0),void 0!==o.data.doc_privilege_use_num&&(e.pay=o.data.doc_privilege_use_num||0),e.isBDLosgin=o.data.isBDLosgin||!1,e.code=o.status.code,e.vipType=+o.data.vip_type,1===+o.data.is_repeat_user&&(e.code=4),e.orgName=decodeURIComponent(o.data.org_name)||"";var d=[0,-1,99,99,99,99,3,99,1];d[13]=5,d[14]=6,99!==+d[e.code]?a.eventInit(e):e.normal()}else e.normal()},r.normal=function(){var o=this,e=function(){c.lang.eventCenter.dispatchEvent("download.doc")},i=o.WkInfo&&o.WkInfo.DocInfo&&o.WkInfo.DocInfo.docId||"",n=function(){var i=o.WkInfo.isRealName||0;if(i>0)e();else if(passport.pop.init){var n=passport.pop.init({type:"accRealName",id:"download-btn",apiOpt:{product:"do",staticPage:"http://"+location.host+"/static/common/html/v3Jump.html",u:c.string.encodeHTML(location.href).replace(/&amp;/g,"&").replace(/#+$/g,"")},tangram:!0,color:"green",onSubmitStart:function(){},onShow:function(){},onHide:function(){$("#passport-accRealName-pop").remove(),e()},onSubmitSuccess:function(){w.xsend(1,101096,{index:1}),location.reload()},onNotloginAction:function(){},onVerifyalreadyAction:function(){e()}});w.xsend(1,101095,{index:1}),n.show()}else e()};d.verlogin(n,null,null,{actionName:"download",fromMod:"download",docId:i},!1)};var s=function(){var o;return function(){return o=o?o:new n}}();i.exports=s()});
;define("wkview:widget/doc_download_main/doc_download_pro.js",function(e,t,o){var a=e("wkcommon:widget/lib/tangram/base/base.js"),i=e("wkcommon:widget/ui/js_core/dialog/dialog.js"),n=e("wkcommon:widget/lib/fis/data/data.js"),d=e("wkcommon:widget/ui/js_core/log/log.js"),s=e("wkcommon:widget/ui/js_core/util/util.js"),c=e("wkcommon:widget/ui/lib/cookie/cookie.js"),l=n.get("WkInfo"),r=e("wkcommon:widget/ui/lib/jquery/jquery.js"),p=e("wkview:widget/ui/view/down_doc/dialog_down_doc/dialog_down_doc.js"),w=e("wkview:widget/ui/view/down_doc/new_dialog_down_doc/new_dialog_down_doc.js"),v=e("wkview:widget/node_modules/@baidu/wenku-model-user/index.js"),u=e("wkview:widget/doc_download_main/submit.js"),f=e("wkview:widget/ui/view/small_flow_vipcashier/smallFlow.js"),g=e("wkview:widget/ui/view/small_flow_vipcashier/smallflow_vip_conf.js"),h="view_cashier_radio"===f(g),m="cashier_duizhao"===f(g),b=h?w:p,k=function(){var e=null;return function(){return e||(e=i.dialogCreate()),e}}(),_=function(){var e=function(){this.init.apply(this)};return r.extend(e.prototype,{userData:{},publicData:{isInit:!1,dialogWindow:!1},init:function(){var e=this;e.WkInfo=l,e.UserInfo=e.WkInfo.UserInfo,e.VipInfo=n.get("WkInfo").VipInfo,e.UserInfo&&(e.isCreater=e.UserInfo.isCreater),e.docSize=(e.WkInfo.DocInfo.size/1024+"").replace(/^(\d+\.\d)\d+$/,"$1"),e.urlInterfaceGetRepeatDown=e.WkInfo.Urls.interfaceGetRepeatDown,e.docId=e.WkInfo.DocInfo.docId,e.isPaymentDoc=e.WkInfo.DocInfo.isPaymentDoc,e.isPaied=e.WkInfo.DocInfo.ispaied,this.publicData.isInit===!1&&(a.lang.eventCenter.addEventListener("download.toGetProFile",function(){e.getFile()}),a.lang.eventCenter.addEventListener("download.checkVipDownload",function(){e.checkVipDownload()}),this.publicData.isInit=!0)},start:function(){var e=this;if(e.publicData.dialogWindow=!1,!e.UserInfo)return void window.location.reload();if(e.isCreater)return void a.lang.eventCenter.dispatchEvent("download.toGetProFile");var t=r.ajax({url:e.urlInterfaceGetRepeatDown,cache:!1,type:"post",dataType:"json",data:{atype:"getRepeatDown",doc_id:e.docId}}),o=r.ajax({url:"/activity/interface/getactivityinfo?doc_id="+e.docId,dataType:"json",cache:!1});r.when(t,o).always(function(t,o){if(t=200009===parseInt(t.errno,10)?0:parseInt(t,10)||0,o&&o[0]){o=o[0];var a=o.status||{};e.userData.hasActivityAferDownload=0===a.code}return e.isShowVcode=200008===parseInt(t,10)?!0:!1,200009===parseInt(t.errno,10)&&"ok"!==c.get("wk_bindemaillater")?void e.bindEmailLater(t.token):e.isPaymentDoc&&e.isPaied?void e.pay("PaymentDoc"):1===t?void e.pay("payed"):2===t?void e.pay("saved"):void v.getVipInfo().done(function(t){t=t||{},e.userData.ticketCount=t.proDownloadRights||0,e.userData.isShowVcode=e.isShowVcode,e.dialogDownDoc("",e.userData)})})},dialogDownDoc:function(e,t){var o=this,a=t||{},i=o.WkInfo.DocInfo||{};return a.not_hit_dump_doc=o.WkInfo.smallFlowContent&&o.WkInfo.smallFlowContent.not_hit_dump_doc,i.professionalDoc&&1===+i.professionalDoc?(o.publicData.dialogWindow||(o.publicData.dialogWindow=b.get("proVipTicketDocDialog",a)),o.publicData.dialogWindow.show(function(){(f||m)&&d.xsend(1,102280,{small:m?"compare":"new",canDownload:!0,isVip:!0})}),!0):void 0},checkVipDownload:function(){},pay:function(e){var t=this,o=t.WkInfo.DocInfo,i=n.get("taskData")||{},s={docId:o.docId,docType:o.docType,cid1:o.cid1,cid2:o.cid2,cid3:o.cid3,cid4:o.cid4},c={first:['<p class="c-gray9">','    <a style="color: #999;text-decoration: underline;" ','        href="//wenku.baidu.com/topic/money_2014/" target="_blank">',"        \u9650\u65f6\u62a2\u5151\u4e0b\u8f7d\u5238\uff0c\u6587\u6863\u514d\u8d39\u4e0b>>","    </a>","</p>"].join(""),saved:['<p class="c-gray9">\u53bb>>','    <a href="/room?from=down_saved_pop_tip" target="_blank">',"        \u6211\u7684\u6587\u5e93","    </a>","    \u67e5\u770b\u81ea\u5df1\u6240\u6709\u7684\u6587\u6863\uff0c\u8fd8\u53ef\u4ee5\u5c06\u6587\u6863\u516c\u5f00\u5230\u6587\u5e93\uff0c\u8d5a\u53d6\u79ef\u5206\uff01","</p>"].join(""),free:"<p>\u8fd9\u662f\u514d\u8d39\u6587\u6863\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u6216\u514d\u8d39\u6536\u85cf\uff1b</p>",download:"<p>\u53ef\u514d\u8d39\u6536\u85cf\u8be5\u6587\u6863\uff1b\u4e00\u4e2a\u6708\u5185\u91cd\u590d\u4e0b\u8f7d\u514d\u8d39\uff1b</p>",xunlei:["<p>\u6682\u4e0d\u652f\u6301\u8fc5\u96f7\u7b49\u5de5\u5177\u4e0b\u8f7d\uff0c",'    <a class="c-gray9" href="http://www.baidu.com/search/wenku/help/help.html?nav=31" ','    target="_bland">\u67e5\u770b\u5e2e\u52a9</a>\u3002',"</p>"].join("")},r={docTitle:['<div class="title">{title}<span class="c-gray9">({size}KB)</span></div>'].join(""),tabControl:['<div class="tabControl">','<div class="use-wealth ib">\u4f7f\u7528\u79ef\u5206\u4e0b\u8f7d</div>','<div class="use-ticket ib">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743\u4e0b\u8f7d</div>',"</div>"].join(""),wealthInfo:['<div class="info">',"<p>\u4e0b\u8f7d\u6240\u9700\u79ef\u5206\uff1a{price}</p>",'<p>\u60a8\u5269\u4f59\u79ef\u5206\uff1a<span class="c-orange">{wealth}</span></p>',"</div>"].join(""),ticketInfo:['<div class="info">',"<p>\u4e0b\u8f7d\u6240\u9700\u4e0b\u8f7d\u7279\u6743\uff1a{needTicket}</p>",'<p>\u60a8\u5269\u4f59\u4e0b\u8f7d\u7279\u6743\uff1a<span class="c-orange">{ticket}</span></p>',"</div>"].join(""),saveControl:['<div class="box ml20 mt10 c-gray9" style="line-height: 20px;">','<div class="media" style="margin:0">','    <input type="checkbox" checked id="choice-for-saved" class="choice-for-saved" value="0"/>',"</div>",'<div class="content">{txt}</div>',"</div>"].join(""),noWealth:['<div class="info">',"<p>\u4e0b\u8f7d\u6240\u9700\u79ef\u5206\uff1a{price}</p>",'<p class="c-red">\u60a8\u5f53\u524d\u7684\u79ef\u5206\u4e3a{wealth}\uff0c\u4e0d\u8db3\u4ee5\u652f\u4ed8\u4e0b\u8f7d\u3002</p>','<p class="c-red">\u4f46\u60a8\u4e5f\u53ef\u4ee5\u514d\u79ef\u5206\u4e0b\u8f7d\u5230\u624b\u673a\u5ba2\u6237\u7aef\u4e2d\u3002','<a href="javascript:void(0);" class="fsm-btn">\u7acb\u5373\u4e0b\u8f7d\u5230\u624b\u673a</a></p>',"</div>",'<div class="you-can">',"<dl>",'<dt class="c-gray9">\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u9014\u5f84\u83b7\u53d6\u79ef\u5206:</dt>','<dd>1.\u4f7f\u7528<a href="http://liulanqi.baidu.com/landingPage/index.html#page=5" target="_blank">\u767e\u5ea6\u6d4f\u89c8\u5668</a>\uff0c\u6bcf\u592912\u70b9\u79ef\u5206\u8f7b\u677e\u5f97\uff01',"<dd>2.\u4e0a\u4f20\u6587\u6863</dd>","</dl>","</div>",'<div class="read-more">','<a href="http://www.baidu.com/search/wenku/help.html#\u5982\u4f55\u83b7\u53d6\u79ef\u5206" target="_blank">',"\u4e86\u89e3\u66f4\u591a\u7684\u79ef\u5206\u8be6\u60c5&gt;&gt;","</a>","</div>"].join(""),docTitleNew:['<div class="title-new">','    <span class="down-title-icon"></span>{title}','    <span class="c-gray9">({size}KB)</span>',"</div>"].join(""),wealthInfoNew:['<div class="wealth-info-new">','<span class="price">\u6240\u9700\u79ef\u5206\uff1a<span class="mv5 c-read-red">{price}</span></span>','<span class="ml20 wealth">\u60a8\u5269\u4f59\u79ef\u5206\uff1a<span class="mv5 c-read-red">{wealth}</span></span>',"</div>"].join(""),wealthInfoNewNotEnough:['<div class="wealth-info-new">','<span class="price">\u60a8\u5269\u4f59<span class="mv5 c-read-red">{wealth}</span>\u79ef\u5206\uff0c\u4e0d\u8db3\u4ee5\u652f\u4ed8\u4e0b\u8f7d\u3002</span>',"</div>"].join(""),saveDoc:['<div class="save-doc">','    <a style="color: #999;text-decoration: underline;" ','        href="//wenku.baidu.com/topic/money_2014/" target="_blank">\u9650\u65f6\u62a2\u5151\u4e0b\u8f7d\u5238\uff0c\u6587\u6863\u514d\u8d39\u4e0b>></a>',"</div>"].join(""),getWealthFooter:['<div class="get-wealth-footer" style="height:63px;">',i.hasGrownupData===!0?'<a class="task ml5" href="/user/task?tab=0&fr=downPop" target="_blank">\u53c2\u52a0\u4efb\u52a1</a>':'<a class="task ml5" href="/user/task?tab=1&fr=downPop" target="_blank">\u53c2\u52a0\u4efb\u52a1</a>','\u3001<a href="/new?fr=downPop" target="_bland" class="upload">\u4e0a\u4f20\u6587\u6863</a>\u83b7\u53d6\u79ef\u5206','<a class="task ml5" style="background:none;color:#bebebe;font-size:9px;float:left;','    line-height:0px;text-decoration: none;">',"\u56e0\u672c\u6b21\u4e0b\u8f7d\u800c\u4ea7\u751f\u7684\u79ef\u5206\u5c06\u7531\u767e\u5ea6\u6587\u5e93\u4ee5\u4e00\u5b9a\u65b9\u5f0f\u8f6c\u4ea4\u7248\u6743\u4eba</a>","</div>"].join(""),ticketNew:['<div class="ticket-content">','<div class="price-info">\u6240\u9700\u79ef\u5206\uff1a<span class="mv5 c-read-red">{price}</span></div>','<div class="btn-content">','<div class="ticket-btn-wp btn-wp">','<a href="###" class="bt ui-btn ui-btn-32-green j_ticket-btn">','    <b class="btc"><b class="btText">\u4f7f\u7528\u4e0b\u8f7d\u7279\u6743<span class="recommend"></span></b></b>',"</a>",'<div class="btn-bg-wp">','<div class="btn-bg '+(t.ticketCount<=10?"show-vip-guide":"")+'">','<div class="btn-bg-info">','<div class="need">\u6240\u9700\u4e0b\u8f7d\u7279\u6743\uff1a<span class="c-gray3">{needTicket}</span></div>','<div class="have">\u5269\u4f59\u4e0b\u8f7d\u7279\u6743\uff1a<span class="">{ticket}</span></div>',"</div>",'<div class="vip-guide">','<a href="###" class="vip-guide-btn j_vip-guide"></a>','<span class="vip-guide-txt">\u7eed\u8d393\u6708\u900110\u5f20</span>',"</div>","</div></div>","</div>",'<div class="wealth-btn-wp btn-wp">','<a href="###" class="bt ui-btn ui-btn-32-light j_wealth-btn">','<b class="btc"><b class="btText">\u4f7f\u7528\u79ef\u5206</b></b>',"</a>",'<div class="btn-bg-wp"><div class="btn-bg">','<div class="btn-bgf-info">',+t.WkInfo.UserInfo.wealth<+(t.WkInfo.DocInfo.price?'<div class="have nohave c-read-red">\u60a8\u7684\u79ef\u5206\u4e0d\u8db3\u4ee5\u652f\u4ed8\u4e0b\u8f7d</div>':'<div class="need">\u6240\u9700\u79ef\u5206\uff1a<span class="c-gray3">{price}</span></div><div class="have">\u5269\u4f59\u79ef\u5206\uff1a<span class="">{wealth}</span></div>'),"</div>","</div></div>","</div>","</div>","</div>"].join("")},p={first:['<div class="dlg-down">',r.docTitle,r.wealthInfo,r.saveControl,"</div>"].join(""),payed:['<div class="dlg-down">',r.docTitle,'<div class="info">','<p>\u4f60\u5df2\u4e3a\u8be5\u6587\u6863\u8fdb\u884c\u8fc7\u652f\u4ed8\uff0c\u672c\u6b21\u4e0b\u8f7d<span class="c-red">\u514d\u8d39</span></p>',"</div>",'<div class="pl20 pt5 c-gray9">{txt}</div>',"</div>"].join(""),saved:['<div class="dlg-down">',r.docTitle,'<div class="info">','<p>\u4f60\u5df2\u8f6c\u5b58\u8fc7\u6b64\u6587\u6863\u81f3>><a href="/room?from=down_saved_pop" ','target="_blank">\u6211\u7684\u6587\u5e93</a>\uff0c\u6c38\u4e45<span class="c-red">\u514d\u8d39\u4e0b\u8f7d</span></p>',"</div>",'<div class="pl20 pt5 c-gray9">{txt}</div>',"</div>"].join(""),ticket:['<div class="dlg-down">',r.ticketContent,"</div>"].join(""),PaymentDoc:['<div class="dlg-down">',r.docTitle,'<div class="info">','<p>\u4f60\u5df2\u8f6c\u5b58\u8fc7\u6b64\u6587\u6863\u81f3>><a href="/room?from=down_saved_pop" ','target="_blank">\u6211\u7684\u6587\u5e93</a>\uff0c\u6c38\u4e45<span class="c-red">\u514d\u8d39\u4e0b\u8f7d</span></p>',"</div>","</div>"].join(""),noWealth:['<div class="dlg-down dlg-down-noWealth">',r.docTitle,r.noWealth,r.joinvip,"</div>"].join(""),firstNew:['<div class="dlg-down has-sns ',(Number(t.WkInfo.DocInfo.price)>=10?"dlg-price-gt10":"")+'">',r.docTitleNew,r.wealthInfoNew,r.saveDoc,r.getWealthFooter,function(){var e=n.get("WkInfo").DocInfo.docId;return Number(t.WkInfo.DocInfo.price)>=10?'<span class="price-gt10">\u7531\u4e8e\u6587\u6863\u4ef7\u683c\u8f83\u9ad8\uff0c\u5efa\u8bae\u60a8\u4f7f\u7528<a target="_blank" href="/cashier/browse/dispatch?doc_id='+e+'" class="gt10-link">\u4e0b\u8f7d\u7279\u6743</a>\u4e0b\u8f7d</span>':""}(),"</div>"].join(""),noWealthNewX:['<div class="dlg-down dlg-down-noWealth">','<div class="title-new"><span class="down-title-icon">','</span>{title}<span class="c-gray9">({price}\u79ef\u5206)</span></div>',r.wealthInfoNewNotEnough,r.getWealthFooter,"</div>"].join(""),ticketNew:['<div class="dlg-down dlg-down-ticketNew">',r.docTitleNew,r.ticketNew,r.getWealthFooter,"</div>"].join("")},w={payed:function(o){o.height=290;var i=t.WkInfo.DocInfo.title;i=a.string.getByteLength(i)<26?i:a.string.subByte(i,26,"..."),o.content=p.payed.replace("{title}",i).replace("{price}",t.WkInfo.DocInfo.price).replace("{size}",t.docSize).replace("{txt}",c.xunlei),h?(t.getFile(e),d.xsend(1,100036),d.send("down","docdownload",a.object.merge(s,{repeat:1}))):k().confirm({title:o.title,content:o.content,width:o.width,height:o.height,className:"wk-downdoc-dialog",btnText:["\u4e0b\u8f7d","\u53d6\u6d88"],onOk:function(){t.getFile(e),d.xsend(1,100036),d.send("down","docdownload",a.object.merge(s,{repeat:1}))}})},saved:function(o){o.height=290;var i=t.WkInfo.DocInfo.title;i=a.string.getByteLength(i)<26?i:a.string.subByte(i,26,"..."),o.content=p.saved.replace("{title}",i).replace("{size}",t.docSize).replace("{txt}",c.saved),l.DocInfo.downloaded=!0,h?(t.getFile(e),d.xsend(1,100036),d.send("down","docdownload",a.object.merge(s,{repeat:1}))):k().confirm({title:o.title,content:o.content,width:o.width,height:o.height,className:"wk-downdoc-dialog",btnText:["\u4e0b\u8f7d","\u53d6\u6d88"],onOk:function(){t.getFile(e),d.xsend(1,100036),d.send("down","docdownload",a.object.merge(s,{repeat:1}))}})},PaymentDoc:function(o){o.height=260;var i=t.WkInfo.DocInfo.title;i=a.string.getByteLength(i)<26?i:a.string.subByte(i,26,"..."),o.content=p.PaymentDoc.replace("{title}",i).replace("{size}",t.docSize),t.bindSaveEvent(),t.getFile(e),d.xsend(1,100036),d.send("down","docdownload",a.object.merge(s,{repeat:0}))}},v={title:"\u6587\u6863\u4e0b\u8f7d",width:360};document.downloadForm.storage.value=0,document.downloadForm.useTicket.value=0,w[e](v)},getFile:function(e){var t=this,o=!1;"payed"===e?(k().confirm({title:"\u4e0b\u8f7d\u6587\u6863",content:'<iframe width="460" height="220" name="runDown" frameborder="0"></iframe>',width:500,height:220,onRendered:function(){t.postGetFile()}}),k().hide()):(k().confirm({title:"\u4e0b\u8f7d\u6587\u6863",content:'<iframe name="runDown" frameborder="0"></iframe>',width:500,btnText:["\u4e0b\u8f7d","\u53d6\u6d88"],onRendered:function(){t.postGetFile(),o||(o=!0,"1"===document.downloadForm.storage.value&&a.ajax.get("/user/submit/foldutimeupdate?atype=updateFoldUTime&fold_id=0&_t="+(new Date).getTime()))},onOk:function(){t.postGetFile(),"first"!==e&&"ticket"!==e||o||(o=!0,"1"===document.downloadForm.storage.value&&a.ajax.get("/user/submit/foldutimeupdate?atype=updateFoldUTime&fold_id=0&_t="+(new Date).getTime()))}}),k().hide())},bindSaveEvent:function(){var e=k().el,t=a.dom.getAttr(e,"data-is-bind-save");"binded"!==t&&(s.delegate(e,".choice-for-saved","click",function(){this.checked?document.downloadForm.storage.value=1:(document.downloadForm.storage.value=0,d.send("down","cancel_copy"))}),a.dom.setAttr(e,"data-is-bind-save","binded")),document.downloadForm.storage.value=1},postGetFile:function(){var e=this,t=0,o=e.WkInfo.DocInfo.size;d.send("down","down_doc_tongji",{size:o,useMutli:t});var i=window.postVcode||0,n=window.postVinput||0;r(document.downloadForm).find("input[name=v_code]").val(i),r(document.downloadForm).find("input[name=v_input]").val(n),1===+r('input[name="wpUpload"]:checked').val()?e.WkInfo.DocInfo.wpsf=1:r(".wpUpload").length>0&&(e.WkInfo.DocInfo.wpsf=2),a.lang.eventCenter.dispatchEvent("download.realStart",{hasActivityAferDownload:e.userData.hasActivityAferDownload});var s=e.userData.isvip||e.userData.is_edu_vip||e.userData.is_jiaoyu_vip,c=s&&e.userData.isVipDocLimited;if(e.isEduLimitedDoc&&e.endTime&&c){var l=r(document.downloadForm);l.attr("action","/user/submit/downloadnew"),l.append('<input type="hidden" name="down_process" value="10">')}u.run(document.downloadForm)},bindEmailLater:function(e){var t=passport.pop.ArmorWidget,o=t("bindemail",{token:e,title:"\u8bf7\u60a8\u7ed1\u5b9a\u90ae\u7bb1",msg:"",auth_title:"\u8bf7\u60a8\u7ed1\u5b9a\u90ae\u7bb1",auth_msg:["\u767e\u5ea6\u6587\u5e93\u68c0\u6d4b\u5230\u60a8\u672a\u7ed1\u5b9a\u90ae\u7bb1\uff0c\u8d26\u53f7\u53ef\u80fd\u5b58\u5728\u4e0d\u5b89\u5168\u56e0\u7d20\u3002","\u4e3a\u4e86\u4fdd\u8bc1\u60a8\u4e0b\u8f7d\u6587\u6863\u540e\u7684\u4e2a\u4eba\u9690\u79c1\uff0c\u8bf7\u60a8\u7ed1\u5b9a\u90ae\u7bb1\u3002",'<a href="javascript:void(0)" id="bindEmailLater" style="color:#666;">\u4e0b\u6b21\u7ed1\u5b9a</a>'].join(""),auth:{onRender:function(){var e=a.g("bindEmailLater");a.event.on(e,"click",function(){c.set("wk_bindemaillater","ok",{expires:864e5}),c.set("BAIDU_DOC_NACT","download",{expires:6048e5}),window.location.reload()})}},onSubmitSuccess:function(){c.set("BAIDU_DOC_NACT","download",{expires:6048e5}),window.location.reload()},onSubmitFail:function(){}});o.show()}}),e}(),D=function(){var e=_,t=new e;return t};o.exports.downDocCreate=D,o.exports.downDoc=_});
;define("wkview:widget/crm_multi/wangmeng/wangmeng.js",function(t,i,n){var s=t("wkcommon:widget/ui/lib/jquery/jquery.js"),c=t("wkcommon:widget/lib/doT/doT.min.js"),o=t("wkview:widget/ui/detectImgBlock/detectImgBlock.js"),a=t("wkcommon:widget/ui/js_core/log/xshowLog.js"),e=function(t){this.ele=s(t.ele),this.position=t.position,this.actId=t.actId,this.random=t.random||0,this.ad=t.ad||"",t.ad&&"newtext"===t.ad?(this.items=t.items,this.num=t.num,this.clickurl=t.clickurl,this.platinit()):t.ad&&"newbanner"===t.ad?(this.img=t.img,this.clickurl=t.clickurl,this.platinit()):this.init()};e.prototype={constructor:e,init:function(){this.template=c.template('{{? it.position == \'doc-btm\' }}\n<div id="cpro_u3054374" class="new-wm"></div>\n<script type="text/javascript">\n    (window.cproArray = window.cproArray || []).push({\n        id: "u3054374"\n    });\n</script>\n<script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>\n{{?? it.position == \'doc2-3\' }}\n<div id="cpro_u3054369" class="new-wm"></div>\n<script type="text/javascript">\n    (window.cproArray = window.cproArray || []).push({\n        id: "u3054369"\n    });\n</script>\n<script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>\n{{?? it.position == \'doc3-4\' }}\n<div id="cpro_u2845472" class="new-wm"></div>\n<script type="text/javascript">\n    (window.cproArray = window.cproArray || []).push({\n        id: "u2845472"\n    });\n</script>\n<script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>\n{{?? it.position == \'4T5\' }}\n<div id="cpro_u3054371" class="new-wm"></div>\n<script type="text/javascript">\n    (window.cproArray = window.cproArray || []).push({\n        id: "u3054371"\n    });\n</script>\n<script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>\n{{?}}\n'),100772===this.actId&&a.send({adPid:3,adId:"wm",act:"back"}),this.initPage()},initPage:function(){this.initAds()},initAds:function(){var t=this;s(t.ele).html(t.template({position:t.position})),100772===t.actId&&a.send({adPid:3,adId:"wm",act:"show"}),o.requestBlock(),o.domBlock(s(t.ele)),t.sendLog(t.actId)},sendLog:function(){},platinit:function(){this.template=c.template('{{? it.ad === \'newtext\' }}\n<div class="bottom-plat-wrap">\n    <div class="bottom-plat-title">\u641c\u7d22\u63a8\u8350</div>\n    {{? it.items && it.items.length > 0}}\n    <a class="bottom-plat-ad" href={{= it.clickurl}}>\n        <div class="bottom-plat-item">\n            <div class="bottom-plat-item-img">\n                <img src="{{= it.items[0].mainimg.url }}" />\n            </div>\n            <div class="bottom-plat-item-content">\n                <p>{{= it.items[0].title }}</p>\n                <p>{{= it.num }}\u4eba\u611f\u5174\u8da3</p>\n            </div>\n        </div>\n        <div class="bottom-plat-item">\n            <div class="bottom-plat-item-img">\n                <img src="{{= it.items[1].mainimg.url }}" />\n            </div>\n            <div class="bottom-plat-item-content">\n                <p>{{= it.items[1].title }}</p>\n                <p>{{= it.num }}\u4eba\u611f\u5174\u8da3</p>\n            </div>\n        </div>\n        <div class="bottom-plat-item">\n            <div class="bottom-plat-item-img">\n                <img src="{{= it.items[2].mainimg.url }}" />\n            </div>\n            <div class="bottom-plat-item-content">\n                <p>{{= it.items[2].title }}</p>\n                <p>{{= it.num }}\u4eba\u611f\u5174\u8da3</p>\n            </div>\n        </div>\n    </a>\n    {{?}}\n</div>\n{{?? it.ad === \'newbanner\' }}\n<a class="bottom-plat-wrap" href={{= it.clickurl}}>\n    <img class="bottom-plat-banner" src={{= it.img.url }} />\n</a>\n{{?}}');var t=this;s(t.ele).html(t.template({items:t.items,num:t.num,clickurl:t.clickurl,img:t.img,ad:t.ad})),s(".union-ad-bottom").css("border","0"),s(".ad-vip-close-bottom").css("top","19px"),o.requestBlock(),o.domBlock(s(t.ele)),t.sendLog(t.actId)}},n.exports=e});
;define("wkview:widget/crm_multi/crm_multi.js",function(i,t,e){function d(i){this.opt=i||{},this.vipNoAd=i.vipNoAd,this.init()}var n=i("wkcommon:widget/ui/lib/jquery/jquery.js"),a=i("wkcommon:widget/lib/fis/data/data.js"),o=i("wkview:widget/crm_multi/wangmeng/wangmeng.js"),c=i("wkcommon:widget/vipNoAdDialog/vipNoAdDialog.js"),s=i("wkview:widget/commerce/pinzhuan/model.js"),l=i("wkview:widget/commerce/fengchao/modelAnimation.js"),m=i("wkcommon:widget/ui/js_core/log/xshowLog.js"),r=a.get("WkInfo")||{},w=r&&r.WkAdInfo,k=w.blockStatus,u=(i("wkcommon:widget/ui/lib/cookie/cookie.js"),i("wkcommon:widget/ui/lib/hxABtest/hxABtest.js"));d.prototype={constructor:d,init:function(){},checkAdBlockStatus:function(){return k?(n(".ad-vip-close-bottom").remove(),!0):!1},bindAdClick:function(){n("#wkad21-2").on("click",".fc-link",function(){m.send({adPid:3,adId:"fc",act:"click"})})},show2To3:function(i,t){var e=this;e.bindAdClick(),e.checkAdBlockStatus()||(m.send({adPid:3,adId:"pz",act:"req"}),s.fetchData(1523).then(function(i){m.send({adPid:3,adId:"pz",act:"back"}),n("#wkad21-2").html(i.adPlace.ad_place_data).show(),m.send({adPid:3,adId:"pz",act:"show"})}).fail(function(){e.getFcAnim("#wkad21-2",t,1,"doc2-3"),m.send({adPid:3,adId:"pz",act:"fail"})}))},getFcAnim:function(i,t,e,d){var a=this,c=a.opt.viewFcReqRate,s=a.opt.rateRandom;if(s>=+c){{new o({ele:n(i),actId:100772,position:d,random:t})}return m.send({adPid:3,adId:"wm",act:"req"}),void m.send({adPid:3,adId:"fc",act:"fail"})}m.send({adPid:3,adId:"fc",act:"req"});var r;r=.5>=t?22011:22012,l.fetchData(r).then(function(a){if(a.ads[e].length)window.Apex.plugin["parallax-scrolling-webku"](i,{im_time_sign:a.im_time_sign,ads:a.ads[e],animEid:r}),m.send({adPid:3,adId:"fc",act:"back"}),m.send({adPid:3,adId:"fc",act:"show"});else{{new o({ele:n(i),actId:100772,position:d,random:t})}m.send({adPid:3,adId:"wm",act:"req"})}}).fail(function(){new o({ele:n(i),actId:100772,position:d,random:t});m.send({adPid:3,adId:"wm",act:"req"}),m.send({adPid:3,adId:"fc",act:"fail"})})},showDocBtm:function(i,t){var e=this,d=a.get("WkInfo").DocInfo||{},o=d.title||"";e.checkAdBlockStatus()||n.ajax({type:"post",url:"//eduad.baidu.com/bidding/wenku_post_json",data:JSON.stringify({slotid:"30",wkkeyword:[o]}),contentType:"text/plain",dataType:"json",success:function(i){if(i.wktextlink&&i.wktextlink!=={}||i.banner&&i.banner!=={})if(+e.opt.wkAdMid>=0){var d=100*Math.random(),n=+e.opt.wkAdMid;n>=d?e.renderZy(i,t):e.getFcAnim("#wkgg",t,2,"doc-btm")}else e.getFcAnim("#wkgg",t,2,"doc-btm");else e.getFcAnim("#wkgg",t,2,"doc-btm")},error:function(){e.getFcAnim("#wkgg",t,2,"doc-btm")}})},show4To5:function(i){if(!this.checkAdBlockStatus()){{new o({ele:n("#html-reader-AD-4t5"),actId:100774,position:"4T5",random:i})}n("#html-reader-AD-4t5").append('<a class="ad-logo"></a>'),n("#html-reader-AD-4t5").on("click",".ad-logo",function(){if(+n("#jiaoyu-vip-data").val()){n(".ad-onff").remove();var i=r.DocInfo||{},t=w&&w.wkAdMid&&JSON.parse(w.wkAdMid),e=t&&t.vipNoAd||{};u.setUpCookie("adOnView","/view",{vipNoAd:e,jiaoyu_vip_stime:i.jiaoyu_vip_stime})}else{new c}})}},renderZy:function(i,t){if(i.wktextlink&&i.wktextlink!=={}){i=i.wktextlink;var e=i.item||{},d=i.complete_num||"1000",a=i.clickurl||"",c=i.impurl||"";""!==c&&this.visitUrl(c),this.wm=new o({ele:n("#wkgg"),actId:100774,position:"doc-btm",random:t,ad:"newtext",items:e,num:d,clickurl:a})}else if(i.banner&&i.banner!=={}){i=i.banner;var s=i.mainimg||{},a=i.clickurl||"",c=i.impurl||"";""!==c&&this.visitUrl(c),this.wm=new o({ele:n("#wkgg"),actId:100774,position:"doc-btm",random:t,ad:"newbanner",img:s,clickurl:a})}},visitUrl:function(i){if(i){var t=new Image;return t.src=i,t}}},e.exports=d});
;define("wkview:widget/crm_multi/fengchao/fengchao.js",function(e,t,o){function n(e){e=e||{},this.opt=e,this.tpl=s,this.$el=i(e.el),this.$el.length<1||this.init()}var i=e("wkcommon:widget/ui/lib/jquery/jquery.js"),r=e("wkcommon:widget/lib/doT/doT.min.js"),a=e("wkcommon:widget/ui/js_core/log/log.js"),s=r.template("<span>\u51e4\u5de2\u5e7f\u544a~</span>");n.prototype={constructor:n,init:function(){var e=this;e.bindE()},bindE:function(){var e=this,t=!1;i(window).on("scroll",function(){var o=e.$el.offset().top,n=i(window).scrollTop(),r=i(window).height();n+r>=o&&!t&&(e.showContent(),t=!t)}).trigger("scroll")},showContent:function(){var e=this,t=["http://wenku.","baidu.com/xpage/interface/ecomsuez"].join("");i.ajax({type:"get",url:t,data:e.getParams(),dataType:"jsonp"}).done(function(t){var o=t&&t.ad_place_list[0]&&t.ad_place_list[0].ad_place_data;return o?(e.setStyle(t.ad_place_list[0].ad_place_css),e.$el.html(t.ad_place_list[0].ad_place_data).parent().css("height","auto"),e.$el.height()<10?void e.error():void e.sendLog(e.opt.actId)):void e.error()})},setStyle:function(e){if(e){var t=document.getElementsByTagName("link")[0],o=document.createElement("div"),n=document.getElementsByTagName("head")[0];o.innerHTML="x<style>"+e+"</style>",n.appendChild(o.lastChild),t.styleSheet&&t.styleSheet.cssText&&(t.styleSheet.cssText+=e)}},getParams:function(){var e=this;return{title:e.opt.title,refer:document.referrer,url:location.href,eid:e.opt.eid}},sendLog:function(e,t){var o=this;a.xsend(1,e||100736,{error:~~t,eid:o.opt.eid})},error:function(){var e=this;window.console.log("fengchao: data error"),e.sendLog(e.opt.actId,1),e.opt.error&&e.opt.error()},test:function(){var e=this;e.$el.html(e.tpl())}},o.exports=n});
;define("wkview:widget/next_doc/next_doc.js",function(o,e,n){var d=o("wkcommon:widget/ui/lib/jquery/jquery.js"),t=o("wkcommon:widget/ui/js_core/log/log.js");n.exports=function(){var o;d(window).on("rightDocLoadEnd",function(){var e=d(".relate-doc .current a.A-relate-doc"),n=Math.floor(Math.random()*e.size());o=e.eq(n).attr("href"),o&&(d("#next_doc_box a").attr("href",o),d("#next_doc_box").hasClass("hiddenForDownload")||(d("#next_doc_box").show(),t.xsend(1,100574,{index:1})))}),d(window).on("doc:clickShowAll",function(){o&&(d("#next_doc_box").show(),t.xsend(1,100574,{index:1}))})}});
;define("wkview:widget/crmAd/crmAd.js",function(t){var i=t("wkcommon:widget/ui/lib/jquery/jquery.js"),n=t("wkcommon:widget/lib/doT/doT.min.js"),a=t("wkcommon:widget/ui/js_core/log/log.js"),e={init:function(){this.template=n.template('{{? it.pid == 48}}\n    <div class="hd">\n        <h4>\u4eca\u65e5\u63a8\u8350</h4>\n    </div>\n    <div class="bd">\n    {{~it.data :item:i}}\n        {{? item.tpl_data && item.tpl_data.length > 0}}\n            <div class="recom-item{{? i == 1 }} m{{?? i == 2 }} r{{?}}">\n                <div class="item-wrap">\n                    <div class="item-img">\n                        <div class="item-img-border">\n                            <a href="{{= item.tpl_data[0].link}}" class="log-xsend" data-logxsend="[1,100060,{\'index\':\'<{$item@index}>\',\'click_doc_id\':\'0\'}]" target="_blank">\n                                <img src="{{= item.tpl_data[0].pic }}" alt="">\n                            </a>\n                            {{? item.tpl_data[0].doc_num != 0}}\n                            <p class="filter-bg"></p>\n                            <p>{{= item.tpl_data[0].doc_num }}\u4efd\u6587\u6863</p>\n                            {{?}}\n                        </div>\n                    </div>\n                    <div class="item-list">\n                        <h5>\n                            <a href="{{= item.tpl_data[0].link }}" title="{{= item.tpl_data[0].name }}" target="_blank"  class="log-xsend" data-logxsend="[1,100060,{\'index\':\'{{= i}}\',\'click_doc_id\':\'0\'}]">{{= item.tpl_data[0].name }}</a></h5>\n                        <ul>\n                            {{~item.tpl_data[0].tagInfo :tagInfo:j}}\n                                {{? tagInfo }}\n                                    <li>\n                                        <span class="ic ic-{{? tagInfo.doctype == 1}}doc{{?? tagInfo.doctype == 2}}pdf{{?? tagInfo.doctype == 3}}ppt{{?? tagInfo.doctype == 4}}wps{{?? tagInfo.doctype == 5}}txt{{?? tagInfo.doctype == 6}}xls{{?? tagInfo.doctype == 7}}epub{{?}}"></span>\n                                        <a href="{{? tagInfo.href }}{{= tagInfo.href }}{{??}}/view/{{= tagInfo.doc_id }}.html{{?}}" title="{{= tagInfo.title }}" class="log-xsend" data-logxsend="[1,100060,{\'index\':\'{{= i}}\',\'click_doc_id\':\'{{= tagInfo.doc_id }}\'}]" target="_blank">{{= tagInfo.title }}</a>\n                                    </li>\n                                {{?}}\n                            {{~}}\n                        </ul>\n\n                    </div>\n                </div>\n            </div>\n        {{?}}\n    {{~}}\n    </div>\n{{?? it.pid == 18}}\n    {{~ it.data :item:i }}\n        {{? item.tpl_data && item.tpl_data.length > 0}}\n            <a href="{{= item.tpl_data[0].link}}" target="_blank">\n                <img src="{{= item.tpl_data[0].infoImg}}" width="200" height="200">\n            </a>\n        {{?}}\n    {{~}}\n{{?? it.pid == 26}}\n    <!-- \u9605\u8bfb\u98751\u30012\u9875\u95f4\u5929\u773c\u67e5\u9879\u76ee\u5e7f\u544a -->\n    {{? it.data.pc_image_url}}\n        <a href="{{= it.data.link}}" target="_blank">\n            <img src="{{= it.data.pc_image_url}}" width="100%" >\n            </a>\n    {{?}}\n{{?? it.pid == 21 && it.wangmeng && it.wangmeng == 1}}\n    <!-- \u9605\u8bfb\u98751\u30012\u9875\u95f4\u56fa\u5b9a\u7684\u7f51\u76df\u5e7f\u544a -->\n    <div id="cpro_u2845605"></div>\n    <script type="text/javascript">\n        require.async([\'wkcommon:widget/ui/lib/sio/sio.js\'], function(sio) {\n            var url = \'https://cpro.baidustatic.com/cpro/ui/c.js\';\n\n            sio.callByBrowser(\n                url,\n                function () {\n                    BAIDU_CLB_fillSlotAsync(\'u2845605\',\'cpro_u2845605\');\n                }\n            );\n        });\n    </script>\n{{?? it.pid == 21 && it.wangmeng && it.wangmeng == 2}}\n    <div id="cpro_u3419031" class="rt-wangmeng-wrap"></div>\n    <script type="text/javascript">\n        (window.cproArray = window.cproArray || []).push({\n            id: "u3419031"\n        });\n    </script>\n    <script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>\n{{?? it.pid == 21 || it.pid == 3 }}\n    {{~ it.data :item:i }}\n        {{? !item.ad_id }}\n\n        {{?? item.tpl_id == "10" }}\n            <!-- PC\u65e7\u5e7f\u544a -->\n            <div class="event-banner banner-block" style="background-image:url({{= item.pic }});" data-url="{{= item.url }}" alog-group="htmlbanner.event">\n                <div class="banner-content">\n                    <h2 class="banner-title">{{= item.text[0] }}</h2>\n                    {{? item.text[1] }}<a href="{{= item.url}}" class="banner-link link-color-0" target="_blank">{{= item.text[1] }}</a>{{?}}\n                    {{? item.text[2] }}<a href="{{= item.url}}" class="banner-link link-color-1" target="_blank">{{= item.text[2] }}</a>{{?}}\n                    {{? item.text[3] }}<a href="{{= item.url}}" class="banner-link link-color-2" target="_blank">{{= item.text[3] }}</a>{{?}}\n                    {{? item.text[4] }}<a href="{{= item.url}}" class="banner-link link-color-3" target="_blank">{{= item.text[4] }}</a>{{?}}\n                </div>\n            </div>\n        {{?? item.tpl_id == "3" }}\n            <!-- \u56fe\u7247\u94fe\u63a5\u5e7f\u544a -->\n            {{? item.tpl_data }}\n                <a href="{{=item.tpl_data.ios[0].link }}" target="_blank" class="log-xsend" data-logxsend="[1,100006]">\n                    <img class="lazybg" src="{{=item.tpl_data.ios[0].info}}" alt="tob_id_{{= item.ad_id}}" />\n                </a>\n            {{?}}\n        {{?? item.tpl_id == "5" }}\n            <!-- \u7f51\u76df\u5e7f\u544a     -->\n            {{? item.tpl_data }}\n                <!-- \u5e7f\u544a\u5360\u4f4d\u5bb9\u5668 -->\n                <div id="cpro_{{= item.tpl_data.ios[0].adId}}"></div>\n                <script type="text/javascript">\n                    require.async([\'wkcommon:widget/ui/lib/sio/sio.js\'], function(sio) {\n                        var url = \'https://cpro.baidustatic.com/cpro/ui/c.js\';\n\n                        sio.callByBrowser(\n                            url,\n                            function () {\n                                BAIDU_CLB_fillSlotAsync(\'{{= item.tpl_data.ios[0].adId}}\',\'cpro_{{= item.tpl_data.ios[0].adId}}\');\n                            }\n                        );\n                    });\n                </script>\n            {{?}}\n        {{?}}\n    {{~}}\n{{?}}\n'),this._initPage()},_initPage:function(){this._initAds()},_initAds:function(){},_ajaxAdsData:function(t,n,e){var d=this,l={pid:n,tid:1};e&&(l.limit=e);var o=["//wenku","baidu.com/shifen/get"];i.ajax({type:"get",url:o[0]+"."+o[1],data:l,dataType:"jsonp",success:function(e){if(!(!i(t).length>0)&&(21===n&&10===+e[0].tpl_id&&(e[0].text=e[0].text.split("\uff0c")),i(".daily-recom-wrap",t).html(d.template({data:e,pid:n})),e[0].ad_id))for(var l=0;l<e.length;l++)a.xsend(1,100421,{action_type:"display",group_id:n,advertiser:e[l].from,ad_id:e[l].ad_id})},error:function(t){window.console&&console.log(t)}})}};e.init()});
;define("wkview:widget/crmAd/crmAd2.js",function(t,i,n){var e=t("wkcommon:widget/ui/lib/jquery/jquery.js"),a=t("wkcommon:widget/lib/doT/doT.min.js"),d=t("wkcommon:widget/ui/js_core/log/log.js"),o=t("wkview:widget/ui/detectImgBlock/detectImgBlock.js"),l=t("wkcommon:widget/lib/fis/data/data.js"),s=(t("wkcommon:widget/ui/lib/jquery_xdomainrequest/xdomainrequest.js"),t("wkcommon:widget/ui/js_core/xform/xform.js")),c=t("wkcommon:widget/vipNoAdDialog/vipNoAdDialog.js"),r=t("wkview:widget/commerce/fengchao/modelAnimation.js"),m=function(t){this.ele=e(t.ele),this.pid=t.pid,this.isVip=t.isVip,this.wkAdMid=t.wkAdMid,this.animEid=t.animEid,this.rateRandom=t.rateRandom,this.viewFcReqRate=t.viewFcReqRate,this.init(),this.ele.length>0&&this.ele.on("click",function(){d.xsend(1,101692,{pos:1})})};m.prototype={constructor:m,init:function(){this.template=a.template('{{? it.pid == 48}}\n    <div class="hd">\n        <h4>\u4eca\u65e5\u63a8\u8350</h4>\n    </div>\n    <div class="bd">\n    {{~it.data :item:i}}\n        {{? item.tpl_data && item.tpl_data.length > 0}}\n            <div class="recom-item{{? i == 1 }} m{{?? i == 2 }} r{{?}}">\n                <div class="item-wrap">\n                    <div class="item-img">\n                        <div class="item-img-border">\n                            <a href="{{= item.tpl_data[0].link}}" class="log-xsend" data-logxsend="[1,100060,{\'index\':\'<{$item@index}>\',\'click_doc_id\':\'0\'}]" target="_blank">\n                                <img src="{{= item.tpl_data[0].pic }}" alt="">\n                            </a>\n                            {{? item.tpl_data[0].doc_num != 0}}\n                            <p class="filter-bg"></p>\n                            <p>{{= item.tpl_data[0].doc_num }}\u4efd\u6587\u6863</p>\n                            {{?}}\n                        </div>\n                    </div>\n                    <div class="item-list">\n                        <h5>\n                            <a href="{{= item.tpl_data[0].link }}" title="{{= item.tpl_data[0].name }}" target="_blank"  class="log-xsend" data-logxsend="[1,100060,{\'index\':\'{{= i}}\',\'click_doc_id\':\'0\'}]">{{= item.tpl_data[0].name }}</a></h5>\n                        <ul>\n                            {{~item.tpl_data[0].tagInfo :tagInfo:j}}\n                                {{? tagInfo }}\n                                    <li>\n                                        <span class="ic ic-{{? tagInfo.doctype == 1}}doc{{?? tagInfo.doctype == 2}}pdf{{?? tagInfo.doctype == 3}}ppt{{?? tagInfo.doctype == 4}}wps{{?? tagInfo.doctype == 5}}txt{{?? tagInfo.doctype == 6}}xls{{?? tagInfo.doctype == 7}}epub{{?}}"></span>\n                                        <a href="{{? tagInfo.href }}{{= tagInfo.href }}{{??}}/view/{{= tagInfo.doc_id }}.html{{?}}" title="{{= tagInfo.title }}" class="log-xsend" data-logxsend="[1,100060,{\'index\':\'{{= i}}\',\'click_doc_id\':\'{{= tagInfo.doc_id }}\'}]" target="_blank">{{= tagInfo.title }}</a>\n                                    </li>\n                                {{?}}\n                            {{~}}\n                        </ul>\n\n                    </div>\n                </div>\n            </div>\n        {{?}}\n    {{~}}\n    </div>\n{{?? it.pid == 18}}\n    {{~ it.data :item:i }}\n        {{? item.tpl_data && item.tpl_data.length > 0}}\n            <a href="{{= item.tpl_data[0].link}}" target="_blank">\n                <img src="{{= item.tpl_data[0].infoImg}}" width="200" height="200">\n            </a>\n        {{?}}\n    {{~}}\n{{?? it.pid == 26}}\n    <!-- \u9605\u8bfb\u98751\u30012\u9875\u95f4\u5929\u773c\u67e5\u9879\u76ee\u5e7f\u544a -->\n    {{? it.data.pc_image_url}}\n        <a href="{{= it.data.link}}" target="_blank">\n            <img src="{{= it.data.pc_image_url}}" width="100%" >\n            </a>\n    {{?}}\n{{?? it.pid == 21 && it.wangmeng && it.wangmeng == 1}}\n    <!-- \u9605\u8bfb\u98751\u30012\u9875\u95f4\u56fa\u5b9a\u7684\u7f51\u76df\u5e7f\u544a -->\n    <div id="cpro_u2845605"></div>\n    <script type="text/javascript">\n        require.async([\'wkcommon:widget/ui/lib/sio/sio.js\'], function(sio) {\n            var url = \'https://cpro.baidustatic.com/cpro/ui/c.js\';\n\n            sio.callByBrowser(\n                url,\n                function () {\n                    BAIDU_CLB_fillSlotAsync(\'u2845605\',\'cpro_u2845605\');\n                }\n            );\n        });\n    </script>\n{{?? it.pid == 21 && it.wangmeng && it.wangmeng == 2}}\n    <div id="cpro_u3419031" class="rt-wangmeng-wrap"></div>\n    <script type="text/javascript">\n        (window.cproArray = window.cproArray || []).push({\n            id: "u3419031"\n        });\n    </script>\n    <script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>\n{{?? it.pid == 21 || it.pid == 3 }}\n    {{~ it.data :item:i }}\n        {{? !item.ad_id }}\n\n        {{?? item.tpl_id == "10" }}\n            <!-- PC\u65e7\u5e7f\u544a -->\n            <div class="event-banner banner-block" style="background-image:url({{= item.pic }});" data-url="{{= item.url }}" alog-group="htmlbanner.event">\n                <div class="banner-content">\n                    <h2 class="banner-title">{{= item.text[0] }}</h2>\n                    {{? item.text[1] }}<a href="{{= item.url}}" class="banner-link link-color-0" target="_blank">{{= item.text[1] }}</a>{{?}}\n                    {{? item.text[2] }}<a href="{{= item.url}}" class="banner-link link-color-1" target="_blank">{{= item.text[2] }}</a>{{?}}\n                    {{? item.text[3] }}<a href="{{= item.url}}" class="banner-link link-color-2" target="_blank">{{= item.text[3] }}</a>{{?}}\n                    {{? item.text[4] }}<a href="{{= item.url}}" class="banner-link link-color-3" target="_blank">{{= item.text[4] }}</a>{{?}}\n                </div>\n            </div>\n        {{?? item.tpl_id == "3" }}\n            <!-- \u56fe\u7247\u94fe\u63a5\u5e7f\u544a -->\n            {{? item.tpl_data }}\n                <a href="{{=item.tpl_data.ios[0].link }}" target="_blank" class="log-xsend" data-logxsend="[1,100006]">\n                    <img class="lazybg" src="{{=item.tpl_data.ios[0].info}}" alt="tob_id_{{= item.ad_id}}" />\n                </a>\n            {{?}}\n        {{?? item.tpl_id == "5" }}\n            <!-- \u7f51\u76df\u5e7f\u544a     -->\n            {{? item.tpl_data }}\n                <!-- \u5e7f\u544a\u5360\u4f4d\u5bb9\u5668 -->\n                <div id="cpro_{{= item.tpl_data.ios[0].adId}}"></div>\n                <script type="text/javascript">\n                    require.async([\'wkcommon:widget/ui/lib/sio/sio.js\'], function(sio) {\n                        var url = \'https://cpro.baidustatic.com/cpro/ui/c.js\';\n\n                        sio.callByBrowser(\n                            url,\n                            function () {\n                                BAIDU_CLB_fillSlotAsync(\'{{= item.tpl_data.ios[0].adId}}\',\'cpro_{{= item.tpl_data.ios[0].adId}}\');\n                            }\n                        );\n                    });\n                </script>\n            {{?}}\n        {{?}}\n    {{~}}\n{{?}}\n'),this._initPage()},_initPage:function(){this._initAds()},_initAds:function(){var t=this;21!==t.pid?this._ajaxAdsData(t.ele,t.pid):this.getAdConf(t.ele,t.pid)},_ajaxAdsData:function(t,i,n){var a=this;if(21===i){var r=l,m=r.get("WkInfo"),p=m.DocInfo||{},g=p.title||"",u=p.docId||"",f=m.is_tianyancha_doc;if(f)var _=m.OrgInfo.uid||{};var h="",w=document.referrer,v=new RegExp("(^|&)word=([^&]*)(&|$)"),x=w.match(v);null!==x&&(h=x[2]);var k="",y=new RegExp("(^|&)eqid=([^&]*)(&|$)"),b=w.match(y);null!==b&&(k=b[2]);var j,A={slotid:"12",wkkeyword:[h,g],eqid:k,docid:u};if(f)return void this.getTianyan(a,_);s.getJSON("2018overnight_fame",{success:function(n){if(n&&n.isOneNight)e(t).html(a.template({wangmeng:2,pid:21}));else{if("1"!==a.adConf.adswitch)return void e("#html-reader-banner-2").hide();if(!a.adConf.zy)return void a.loadFC(t);e.ajax({type:"post",url:"//eduad.baidu.com/bidding/wenku_post_json",data:JSON.stringify(A),xhrFields:{withCredentials:!0},crossDomain:!0,contentType:"text/plain",beforeSend:function(){j=(new Date).getTime(),d.xsend(1,101154,{action_type:"request",slot_id:12,time:0})},dataType:"json",success:function(n){var l=(new Date).getTime(),s=l-j;if(d.xsend(1,101154,{action_type:"success",slot_id:12,time:s}),!(!e(t).length>0)){if(n.adm)if(+a.wkAdMid>=0){var r=100*Math.random(),m=+a.wkAdMid;m>=r?(e(t).html(n.adm),21===i&&n.landingpageurl&&n.landingpageurl.split("?")[0].indexOf("baidu.com")<0&&(e(t).append('<a class="ad-logo"></a>'),e(".html-reader-banner-2").on("click",".ad-logo",function(){new c})),d.xsend(1,101154,{action_type:"display",slot_id:12,time:0}),d.xsend(1,101648,{index:2})):(o.requestBlock(),a.loadFC(t))}else a.loadFC(t);else o.requestBlock(),a.loadFC(t);o.domBlock(e(t))}},error:function(i){window.console&&console.log(i),d.xsend(1,101154,{action_type:"error",slot_id:12,time:0}),a.loadFC(t)}}),d.xsend(1,101648,{index:1})}},error:function(){a.loadFC(t)}})}else{var A={pid:i,tid:1};n&&(A.limit=n);var I=["//wenku","baidu.com/shifen/get"];e.ajax({type:"get",url:I[0]+"."+I[1],data:A,dataType:"jsonp",success:function(n){if(!(!e(t).length>0)){if(5===+n[0].tpl_id&&o.requestBlock(),21===i&&10===+n[0].tpl_id&&(n[0].text=n[0].text.split("\uff0c")),e(t).html(a.template({data:n,pid:i})),21===i&&2===+n[0].product_category&&e(t).append('<a class="ad-logo" href="/cashier/browse/vipcashier?cashier_code=adfree_joinvip"></a>'),n[0].ad_id)for(var l=0;l<n.length;l++)d.xsend(1,100421,{action_type:"display",group_id:i,advertiser:n[l].from,ad_id:n[l].ad_id});o.domBlock(e(t))}},error:function(t){window.console&&console.log(t)}})}},getTianyan:function(t,i){e.ajax({url:"/business/interface/getmarketingdata?&type=pc&uid="+i+"&_t="+(new Date).getTime(),type:"get",success:function(i){if(0===i.errno&&i.tpl_list)try{var n=i.tpl_list.ad;e(t.ele).html(t.template({pid:26,data:n}))}catch(a){window.console&&console.log(a)}else window.console&&console.log("1-2\u9875\u914d\u7f6e\u5e7f\u544a\u7a7a"),d.xsend(1,101962,{action_type:"error"})},error:function(t){window.console&&console.log(t),d.xsend(1,101962,{action_type:"error"})}})},getAdConf:function(){var t=this,i={zy:!0,fc:!0,wm:!0,adswitch:"1"},n={t:(new Date).getTime(),end_type:1,ad_pos:14};e.ajax({url:"/xpage/interface/getadmanageconf",type:"get",data:n}).then(function(n){n&&n.status&&0===n.status.code&&(t.adConf=n.data||i,t._ajaxAdsData(t.ele,t.pid))},function(){t.adConf=i,t._ajaxAdsData(t.ele,t.pid)})},loadFC:function(t){var i=this,n=i.viewFcReqRate,e=i.rateRandom;if(+n>e){var a=i.animEid;r.fetchData(a).then(function(n){n.ads[0].length?window.Apex.plugin["parallax-scrolling-webku"]("#wkad21",{im_time_sign:n.im_time_sign,ads:n.ads[0],animEid:a}):i.loadWmAd(t)}).fail(function(){i.loadWmAd(t)})}else i.loadWmAd(t)},loadWmAd:function(t){var i=this;e(t).html(i.template({wangmeng:1,pid:21})),d.xsend(1,101648,{index:3})}},n.exports=m});
;define("wkview:widget/crmAd/log.js",function(o,g,c){var e=o("wkcommon:widget/ui/js_core/log/scrollLog.js"),i=(o("wkcommon:widget/ui/js_core/log/log.js"),{});i.run=function(){var o={pageLog:{actId:101934,param:{}},viewLog:{"#ggbtm":{actId:101935,param:{},flag:!1}},clickLog:{}};this.log=new e(o)},c.exports=i});
;define("wkview:widget/crmAd/crmAd3.js",function(i,t,n){var e=i("wkcommon:widget/ui/lib/jquery/jquery.js"),a=i("wkcommon:widget/lib/doT/doT.min.js"),d=i("wkcommon:widget/ui/js_core/log/log.js"),c=i("wkview:widget/ui/detectImgBlock/detectImgBlock.js"),s=i("wkview:widget/commerce/pinzhuan/model.js"),r=i("wkview:widget/crmAd/log.js"),o=i("wkview:widget/commerce/fengchao/modelAnimation.js"),p=i("wkcommon:widget/lib/fis/data/data.js"),m=p.get("WkInfo")||{},l=(m.WkAdInfo||{},function(i){this.ele=e(i.ele),this.pid=i.pid,this.animEid=i.animEid,this.rateRandom=i.rateRandom,this.viewFcReqRate=i.viewFcReqRate,this.random=Math.random()>.5?!0:!1,this.init()});l.prototype={init:function(){this.template=a.template('{{? it.pid == 1}}\n<div id="cpro_u2280119"></div>\n<script type="text/javascript">\n    (window.cproArray = window.cproArray || []).push({\n        id: "u2280119"\n    });\n</script>\n\n<script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>\n\n{{?}}\n{{? it.pid == 3}}\n<div id="cpro_u2088751"></div>\n<script type="text/javascript">\n    var cpro_id="u2088751";\n        (window["cproStyleApi"] = window["cproStyleApi"] || {})[cpro_id]={at:"3",rsi0:"966",rsi1:"180",pat:"6",tn:"baiduCustNativeAD",rss1:"#FFFFFF",conBW:"1",adp:"1",ptt:"0",titFF:"%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91",titFS:"14",rss2:"#000000",titSU:"0",ptbg:"90",piw:"0",pih:"0",ptp:"0"}\n</script>\n\n<script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>\n\n{{?}}\n{{? it.pid == 4}}\n<div id="cpro_u2280097"></div>\n<script type="text/javascript">\n    var cpro_id="u2280097";\n    (window["cproStyleApi"] = window["cproStyleApi"] || {})[cpro_id]={at:"3",rsi0:"200",rsi1:"167",pat:"17",tn:"baiduCustNativeAD",rss1:"#FFFFFF",conBW:"1",adp:"1",ptt:"0",titFF:"%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91",titFS:"14",rss2:"#000000",titSU:"0"}\n    </script>\n\n</script>\n\n<script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>\n\n{{?}}\n{{? it.pid == 5 || it.pid == 6 }}\n\n{{?? it.pid == 7 }}\n    <div class="page-doc-list">\n        <h4>\u731c\u4f60\u559c\u6b22</h4>\n    </div>\n    <div id="cpro_u3075407"></div>\n    <script type="text/javascript">\n        (window.cproArray = window.cproArray || []).push({\n            id: "u3075407"\n        });\n    </script>\n    <script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>\n{{?}}'),this.initPage()},initPage:function(){var i=this;2===i.pid?s.fetchData(1524).then(function(t){e(i.ele).html(t.adPlace.ad_place_data).show(),d.xsend(1,101931,{index:1})}).fail(function(){e.ajax({url:"/xpage/form/getform?id=wk_ad_anim",success:function(t){if(0===t.status.code){var n=100*Math.random(),e=t.data.form_data&&t.data.form_data.ad;if(e>=n){var a=i.viewFcReqRate,d=i.rateRandom;+a>d?o.fetchData(i.animEid).then(function(t){return i.animEid&&22011===i.animEid?void(t.ads[3].length?window.Apex.plugin["parallax-scrolling-webku"](i.ele.selector,{im_time_sign:t.im_time_sign,ads:t.ads[3],animEid:i.animEid}):t.ads[0].length||i.initAds()):void(t.ads[0].length?window.Apex.plugin["parallax-scrolling-webku"](i.ele.selector,{im_time_sign:t.im_time_sign,ads:t.ads[0],animEid:i.animEid}):i.initAds())}).fail(function(){i.initAds()}):i.initAds()}else i.initAds()}}})}):7===i.pid?s.fetchData(1525).then(function(t){var n='<div class="page-doc-list">';n+="<h4>\u731c\u4f60\u559c\u6b22</h4>",n+="</div>",e(i.ele).append(n),e(i.ele).append('<div class="wk_pz_ad_container"></div>'),e(i.ele).find(".wk_pz_ad_container").html(t.adPlace.ad_place_data),e(i.ele).show()}).fail(function(){}):this.initAds()},initAds:function(){var i=this;e(i.ele).html(i.template({pid:i.pid,random:i.random})),2===+i.pid&&(i.random?(d.xsend(1,101302,{index:1}),i.monitorWm(0,3)):(d.xsend(1,101302,{index:2}),i.monitorWm(0,4)));var t=e("#ggbtm-ads");t&&t.length&&0===t.html().length&&e(".ggbtm-vip-close").remove(),c.requestBlock(),c.domBlock(e(i.ele))},monitorWm:function(i,t){var n=i,a=setInterval(function(){n++;var i=e("#ggbtm").find("iframe");i.length&&(clearInterval(a),d.xsend(1,101302,{index:t}),r.run()),n>8&&clearInterval(a)},500)}},n.exports=l});
;define("wkview:widget/crmAd/zyAd.js",function(n,i,e){var o=n("wkcommon:widget/ui/lib/jquery/jquery.js"),t=n("wkview:widget/crm_multi/wangmeng/wangmeng.js"),d=n("wkcommon:widget/lib/fis/data/data.js"),a=n("wkcommon:widget/vipNoAdDialog/vipNoAdDialog.js"),s=n("wkcommon:widget/ui/js_core/log/log.js"),c="cp01-edu-ad-offline.epc.baidu.com:8034/bidding/wenku_post_json?clouddesp_debug=true",r="//eduad.baidu.com/bidding/wenku_post_json",l=(n("wkcommon:widget/ui/lib/cookie/cookie.js"),!1),g=n("wkcommon:widget/ui/lib/hxABtest/hxABtest.js");e.exports={show2To3:function(n){{var i=d.get("WkInfo").DocInfo||{};i.title||""}n.next&&n.next()},show3To4:function(n){{var i=d.get("WkInfo").DocInfo||{};i.title||""}n.next&&n.next()},show3To4Wangmeng:function(){new t({ele:o("#html-reader-AD-3t4"),position:"doc3-4"});o("#html-reader-AD-3t4").append('<a class="ad-logo"></a>'),o("#html-reader-AD-3t4").on("click",".ad-logo",function(){if(+o("#jiaoyu-vip-data").val()){o(".ad-onff").remove();var n=d.get("WkInfo")||{},i=n.DocInfo,e=n.WkAdInfo&&n.WkAdInfo.wkAdMid&&JSON.parse(n.WkAdInfo.wkAdMid),t=e&&e.vipNoAd||{};g.setUpCookie("adOnView","/view",{vipNoAd:t,jiaoyu_vip_stime:i.jiaoyu_vip_stime})}else{new a}})},show4To5:function(n){{var i=d.get("WkInfo").DocInfo||{};i.title||""}n.next&&n.next()},show5To6:function(n){{var i=d.get("WkInfo").DocInfo||{};i.title||""}n.next&&n.next()},showFooter:function(n){var i=this,e=d.get("WkInfo").DocInfo||{},t=e.title||"";o.ajax({type:"post",url:l?c:r,data:JSON.stringify({slotid:"43",wkkeyword:[t]}),contentType:"text/plain",dataType:"json",success:function(e){e.banner&&e.banner.mainimg?(i.insertAd({el:n.el,ads:[{imgUrl:decodeURIComponent(e.banner.mainimg.url),link:e.banner.landingpageurl}],actId:101960,clickurl:e.banner.clickurl}),s.xsend(1,101950),i.visitUrl(e.banner.impurl)):n.next&&n.next()},error:function(){n.next&&n.next()}})},visitUrl:function(n){if(n){var i=new Image;return i.src=n,i}},insertAd:function(n){var i=this;n.el.append('<div class="zy-ad"><img src="'+n.ads[0].imgUrl+'"><span>\u5e7f\u544a</span></div>'),n.el.find(".zy-ad").css({"max-width":"968px","min-width":"964px","max-height":"205px","min-height":"205px",position:"relative",cursor:"pointer"}),n.el.find(".zy-ad span").css({position:"absolute",right:0,bottom:0,color:"#fff","line-height":"22px","font-size":"12px",padding:"0 10px",background:"rgba(102,102,102,.6)"}),n.el.find(".zy-ad img").css({width:"100%",height:"100%"}),n.el.find(".zy-ad").bind("click",function(){window.open(n.ads[0].link),i.visitUrl(n.clickurl),s.xsend(1,n.actId)})}}});
;define("wkview:widget/fengchao_right/fengchao_right.js",function(t,i,e){var o=t("wkcommon:widget/ui/lib/jquery/jquery.js"),c=t("wkview:widget/ui/detectImgBlock/detectImgBlock.js"),s={init:function(){var t=this,i=setTimeout(function(){t.isShowAd(),clearTimeout(i)},2e3)},isShowAd:function(){var t={old:'<div id="cpro_u2285246"></div>',newStr:['<script type="text/javascript">','var cpro_psid = "u2744350";','var cpro_pswidth = "200";','var cpro_psheight = "166";',"</script>"].join("")},i=parseInt(o(".relate-doc").css("height"),10),e=parseInt(o(".other-like-doc").css("height"),10),s=parseInt(o(".zhixin-right").css("height"),10);if(s||i&&e)o(".fengchao-right").css("display","none");else{var r=Math.random();0>r?(o(".fengchao-right").css("display","block").html(t.old),this.loadAdEvent()):(o(".fengchao-right").css("display","block").html(t.newStr),this.loadAdEvent2(),c.requestBlock(),c.domBlock(o(".fengchao-right")))}},loadAdEvent:function(){(window.cproArray=window.cproArray||[]).push({id:"u2285246"}),(window.cproStyleApi=window.cproStyleApi||{}).u2285246={at:"3",rsi0:"200",rsi1:"167",pat:"17",tn:"baiduCustNativeAD",rss1:"#FFFFFF",conBW:"1",adp:"1",ptt:"0",titFF:"%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91",titFS:"14",rss2:"#000000",titSU:"0"};var t=document.createElement("script");t.src="https://cpro.baidustatic.com/cpro/ui/c.js",o("body").append(t)},loadAdEvent2:function(){var t=document.createElement("script");t.src="https://su.bdimg.com/static/dspui/js/ue.js",o("body").append(t)}};e.exports=s});
;define("wkview:widget/view_like_recom/common/business_session.js",function(e,r,i){var t=e("wkcommon:widget/ui/lib/jquery/jquery.js"),a=e("wkcommon:widget/sessionX/sessionX.js"),o=a.sessionXMgr,n=function(){};n.prototype={constructor:n,ops:{id:0},currentPageKey:"",init:function(e){return t.extend(!0,this.ops,e),this.handleRecRelated().handleRecOtherLike(),this},handleRecRelated:function(){var e=this.ops;return t("#pageList-"+e.id+"-relate").on("click",".rec-items",function(){var e=t(this),r=e.prop("href"),i=e.data(),a="view_r_1";a+=i.type||"";var n=o.createUrlParam({mark_pay_doc:i.markPayDoc||0,mark_rec_page:i.markRecPage,mark_rec_position:i.markRecPosition,mark_rec:a},r);e.prop("href",n)}),this},handleRecOtherLike:function(){var e=this.ops;return t("#pageList-"+e.id).on("click",".other-like-item",function(){var e=t(this),r=e.prop("href"),i=e.data(),a=o.createUrlParam({mark_pay_doc:i.markPayDoc||0,mark_rec_page:i.markRecPage,mark_rec_position:i.markRecPosition,mark_rec:"view_r_2"},r);e.prop("href",a)}),this}},i.exports=new n});
;define("wkview:widget/view_like_recom/common/cb_recom_ad_solved.js",function(e,i,t){var o=e("wkcommon:widget/ui/lib/jquery/jquery.js"),r=function(e,i,t){e.data({markRecPosition:t,markRecPage:i})},c=function(){if(!window.recomAdSolved){var e=o(".relate_doc_list li"),i=o(e.length?".relate_doc_list li":".relate_doc_list");i.each(function(e){var i=o(this),t=1;o(">div",i).each(function(i){var c=o(this).find(".rec-items");if(o(this).is(".frist-item"))return void(t=o(this).html().replace(/(^\s*)|(\s*$)/g,"")?1:0);var n=e+1,d=i+t;r(c,n,d)})}),window.recomAdSolved=!0}};t.exports=c});
;define("wkview:widget/view_like_recom/common/item_video/index.js",function(e,i,s){var o=e("wkcommon:widget/ui/js_core/log/log.js"),t=e("wkcommon:widget/ui/lib/jquery/jquery.js"),n=function(e){t.extend(!0,this.ops,e),this.bindEvent().run()};n.prototype={constructor:n,ops:{id:0,pageListId:0,itemIds:"",relateDocCount:0,recommendType:"",isWenkuRecom:!0,recommendAd:{},relateDocIds:""},recomShowedPages:{},bindEvent:function(){var e=this.ops;return t("#pageList-"+e.id+"-relate").on("click",".rec-items",function(){var e=t(".rec-items").length&&t(".rec-items").hasClass("wenku-video")?!0:!1,i=t(this).hasClass("wenku-video")?"video":"doc";i=t(this).hasClass("miaodong-video")?"md-video":i,e&&("video"===i?o.xsend(1,101161):"doc"===i&&o.xsend(1,101162));var s=t(".rec-items").length&&t(this).hasClass("miaodong-video")?!0:!1;s&&o.xsend(1,101275)}),this},run:function(){var e=this,i=e.ops;if(i.relateDocCount<=0)return this;var s=t(".rec-items").length&&t(".rec-items").hasClass("wenku-video")?!0:!1;s&&o.xsend(1,101160);var n=t(".rec-items").length&&t(".rec-items").hasClass("miaodong-video")?!0:!1;return n&&o.xsend(1,101274),this}},s.exports=n});
;define("wkview:widget/view_like_recom/common/tob.js",function(o,i,e){var t=o("wkcommon:widget/ui/js_core/log/log.js"),n=o("wkcommon:widget/ui/lib/jquery/jquery.js"),c=o("wkcommon:widget/lib/fis/data/data.js"),r=o("wkview:widget/view_recom_thirdad/highValueDoc/log.js"),s=c.get("WkInfo")||{},d=s.DocInfo||{},g=function(){};g.prototype={constructor:g,ops:{id:0,recommendAd:{}},init:function(o){n.extend(!0,this.ops,o),this.runOrgDoc()},runOrgDoc:function(){var o=this,i=o.ops;return r.log("pv"),n("#pageList-"+i.id+"-relate").on("click",".rec-items",function(){r.log("click")}),~~d.isOrgDoc&&(t.xsend(1,100724),n(".relate_doc_list").on("click",".rec-items",function(){t.xsend(1,100726)})),this}},e.exports=new g});
;define("wkview:widget/view_like_recom/comp_chuanke/index.js",function(e,t,i){var r=e("wkcommon:widget/lib/tangram/base/base.js"),n=e("wkcommon:widget/ui/js_core/log/log.js"),o=function(e){$.extend(!0,this.ops,e),this.run().run2()};o.prototype={constructor:o,ops:{id:0,readerType:"html",copyright:""},run:function(){var e=this.ops;return r.on("pagePre-"+e.id+" -relate","click",function(t){r.event.stop(t),n.send("view","relateDoc",{right:"pageClick",copyright:e.copyright,pageNo:+r.g("pageNum-"+e.id+" -relate").innerHTML-1,ply:e.readerType})}),r.on("pageNext-"+e.id+" -relate","click",function(t){r.event.stop(t),n.send("view","relateDoc",{right:"pageClick",copyright:e.copyright,pageNo:+r.g("pageNum-"+e.id+" -relate").innerHTML+1,ply:e.readerType})}),this},run2:function(){return n.xsend(1,100924),this}},i.exports=o});
;define("wkview:widget/view_like_recom/comp_eco/index.js",function(e,i,n){var t=e("wkcommon:widget/lib/tangram/base/base.js"),o=e("wkcommon:widget/ui/lib/jquery/jquery.js"),a=e("wkcommon:widget/ui/js_core/log/log.js"),d=e("wkcommon:widget/ui/js_core/log/xshowLog.js"),s=e("wkcommon:widget/lib/fis/data/data.js"),c=e("wkview:widget/view_like_recom/common/cb_recom_ad_solved.js"),r=e("wkview:widget/view_recom_thirdad/adControl/fcwm.js"),u=0,p=0,g=function(e){o.extend(!0,this.ops,e),this.run().run2().run3()};g.prototype={constructor:g,ops:{id:"",readerType:"html",copyright:"",recommendType:"",eeRecCount:0,adUrl:"",viewFcReqRate:""},run:function(){var e=this,i=e.ops;return a.xsend(1,102111,{position:"comp_eco_index_run"}),t.on("pagePre-"+i.id+"-relate","click",function(e){t.event.stop(e),a.send("view","relateDoc",{right:"pageClick",copyright:i.copyright,pageNo:+t.g("pageNum-"+i.id+"-relate").innerHTML-1,ply:i.readerType})}),t.on("pageNext-"+i.id+"-relate","click",function(e){t.event.stop(e),a.send("view","relateDoc",{right:"pageClick",copyright:i.copyright,pageNo:+t.g("pageNum-"+i.id+"-relate").innerHTML+1,ply:i.readerType}),o.each(o("#pageList-"+i.id+"-relate .item"),function(e){if(e>=5){var i=o(this).find(".rec-items");u=i.hasClass("education-chuanke")?u+1:u,p=i.hasClass("education-yuedu")?p+1:p}}),u>0&&a.xsend(1,100949),p>0&&a.xsend(1,100950)}),this},run2:function(){var e=this.ops,i=s.get("WkInfo").DocInfo||{},n=i.jiaoyu_vip_type||0;return a.xsend(1,102111,{position:"comp_eco_index_run_run2"}),this.judgeAdSwitch().then(function(i){var t=i.adpos_12||{};if(a.xsend(1,102111,{position:"comp_eco_index_run_run2_1"}),0===+n&&a.xsend(1,102111,{position:"comp_eco_index_run_run2_2_vip"}),"1"===t.adswitch){var o=e.adUrl?e.adUrl:"/source/getinfo";s.set("isRightLoadFcWmAd",1),a.xsend(1,102111,{position:"comp_eco_index_run_run2_2"}),d.send({adPid:2,adId:"fc",act:"req"}),r.getFcWm(o,e.viewFcReqRate)}else c()}),this},run3:function(){var e=this.ops;return"pay_not_weipu"!==e.recommendType&&"weipu"!==e.recommendType&&+e.eeRecCount&&c(),o("#pageList-"+e.id+"-relate").on("click",".rec-items",function(){var e=o(this),i=e.hasClass("education-wenku"),n=e.hasClass("education-chuanke"),t=e.hasClass("education-yuedu");i&&a.xsend(1,100951),n&&a.xsend(1,100952),t&&a.xsend(1,100953),a.xsend(1,100954)}),this},judgeAdSwitch:function(){var e=new o.Deferred,i={zy:!0,fc:!0,wm:!0,adswitch:"1"},n={adpos_12:i},t=(new Date).getTime();return d.send({adPid:2,adId:"zy",act:"req"}),o.ajax({url:"/xpage/interface/getadmanageconf?merge=1&end_type=1&ad_pos=12&t="+t,type:"get"}).done(function(i){i&&i.status&&0===i.status.code?(e.resolve(i.data),d.send({adPid:3,adId:"pz",act:"back"})):e.resolve(n)}).fail(function(){e.resolve(n),d.send({adPid:3,adId:"pz",act:"fail"})}),e.promise()}},n.exports=g});
;define("wkview:widget/view_like_recom/comp_other/index.js",function(e,i,t){var o=e("wkcommon:widget/lib/tangram/base/base.js"),r=e("wkview:widget/ui/view/page_list/page_list.js"),a=e("wkcommon:widget/ui/js_core/log/log.js"),c=e("wkcommon:widget/ui/lib/jquery/jquery.js"),n=e("wkcommon:widget/lib/fis/data/data.js"),s=function(e){c.extend(!0,this.ops,e),this.largerThan10().largerThan5().largerThan0()};s.prototype={constructor:s,ops:{id:0,otherLikeDocCount:0,otherLikeDocIds:"",itemDocIds:"",readerType:"",copyright:""},largerThan10:function(){var e=this.ops;return e.otherLikeDocCount<=10?this:(o.on("pagePre-"+e.id,"click",function(i){o.event.stop(i),a.send("view","otherLikeDoc",{right:"pageClick",copyright:e.copyright,pageNo:+o.g("pageNum-"+e.id).innerHTML-1,ply:e.readerType})}),void o.on("pageNext-"+e.id,"click",function(i){o.event.stop(i),a.send("view","otherLikeDoc",{right:"pageClick",copyright:e.copyright,pageNo:+o.g("pageNum-"+e.id).innerHTML+1,ply:e.readerType})}))},largerThan5:function(){var e=this.ops;return e.otherLikeDocCount<=5?this:(setTimeout(function(){r.pageList({pageList:"pageList-"+e.id,pageNum:"pageNum-"+e.id,pagePre:"pagePre-"+e.id,pageNext:"pageNext-"+e.id,total:Math.ceil(e.otherLikeDocCount/5)})},250),a.xsend(1,100125,{list_doc_ids:e.itemDocIds}),this)},largerThan0:function(){var e=this.ops;if(e.otherLikeDocCount<=0)return this;this.cbRecomSolved(),c(".other_like_list").on("click",".other-like-item",function(){var e="doc",i=c(this),t=i.data();a.xsend(1,101577,{type:e,markDocType:+t.markPayDoc,recPosition:+t.markRecPosition,recPage:+t.markRecPage,clickDocId:t.clickDocid||"",docTypeName:"",markRecFr:"view_r_2"})}),a.xsend(1,100178),a.xsend(1,100626,{list_doc_ids:e.otherLikeDocIds});var i=n.get("WkInfo").DocInfo||{};return~~i.is_exam_link&&(a.xsend(1,100716),c(".other-like-item").on("click",function(){a.xsend(1,100719)})),~~i.isOrgDoc&&(c(".other-like-doc").hide(),a.xsend(1,100725),c(".other_like_list").on("click",".other-like-item",function(){a.xsend(1,100727)})),this},reDataLink:function(e,i,t){({mark_pay_doc:e.data("markPayDoc")||0,mark_rec_page:i,mark_rec_position:t});e.data({markRecPosition:t,markRecPage:i})},cbRecomSolved:function(){var e=this,i=c(".other_like_list li");i.each(function(i){var t=c(this),o=1;c(">div",t).each(function(t){var r=c(this).find(".other-like-item"),a=i+1,n=t+o;e.reDataLink(r,a,n)})})}},t.exports=s});
;define("wkview:widget/view_like_recom/comp_ppt_tmpl/doc_ad/doc_other_ad.js",function(e,t,i){function o(e){n(document).scrollTop()>=300&&"fixed"!==n(e).css("position")?n(e).css({position:"fixed",top:"50px"}):n(document).scrollTop()<300&&"absolute"!==n(e).css("position")&&n(e).css({position:"absolute",top:"294px"})}var n=e("wkcommon:widget/ui/lib/jquery/jquery.js"),d=e("wkcommon:widget/ui/js_core/log/log.js"),a=e("wkview:widget/crmAd/crmAd2.js"),r=e("wkview:widget/crm_multi/crm_multi.js");e("wkview:widget/crmAd/crmAd.js");var l=e("wkcommon:widget/lib/fis/data/data.js"),c=e("wkcommon:widget/vipNoAdDialog/vipNoAdDialog.js"),s=e("wkview:widget/crmAd/crmAd3.js"),m=e("wkview:widget/crmAd/zyAd.js"),w=e("wkview:widget/commerce/fengchao/modelAnimation.js"),f=e("wkview:widget/ad_xpageForm/xpageForm.js"),g=e("wkview:widget/fengchao_right/fengchao_right.js"),h=e("wkview:widget/commerce/fengchao/left.js"),p=e("wkview:widget/node_modules/@baidu/wenku-model-user/index.js"),u=l.get("WkInfo")||{},k=(e("wkcommon:widget/ui/lib/cookie/cookie.js"),u&&u.WkAdInfo),A=k.blockStatus,v=e("wkcommon:widget/ui/lib/hxABtest/hxABtest.js"),_=function(e){n.extend(!0,this.ops,e),this.run()};_.prototype={constructor:_,ops:{docTitle:""},run:function(){var e=this.ops,t=u.DocInfo.jiaoyu_vip_type,i=v.getCookie(+t,"adOnView","/view");if(!i){var k=!1;p.getVipInfo().done(function(e){e&&(e.isClassicVip||e.isJiaoyuVip||e.isVip||e.isWenkuEduVip||e.isWenkuVip)&&(k=!0)});var _,x=new r({title:e.docTitle}),D=Math.random();_=.5>=D?22011:22012;var j=(new a({ele:n("#wkad18"),pid:18,isVip:k,animEid:_}),l.get("WkInfo")||{});if(n("#fc-left")&&!k&&j.DocInfo&&"19"!==j.DocInfo.flag&&n.ajax({url:"//wenku.baidu.com/xpage/form/getform?id=fcpcview",success:function(e){if(0===e.status.code){var t=e.data.form_data.left;Math.floor(100*Math.random())<=t&&h.fetchData().then(function(e){var t=e.ads[0];if(t.title&&t.title.length>22&&(t.title=t.title.substr(0,22)+"..."),t.style.idea3009||t.style.idea2062){if(!window.ecom||!window.ecom.pl3){var i=document.createElement("script");i.innerHTML=e.script,document.body.appendChild(i)}n("#fc-left .content").text(t.title),n("#fc-left #fc-click").attr("href",t.link),n("#fc-left #fc-click").attr("datasign",e.time),t.style&&t.style.idea3009&&t.style.idea3009.image_item&&t.style.idea3009.image_item.length&&n("#fc-left img").attr("src",t.style.idea3009.image_item[0].image_link),t.style&&t.style.idea2062&&t.style.idea2062.pic_url&&n("#fc-left img").attr("src",t.style.idea2062.pic_url),o("#fc-left"),n("#fc-left").show(),n("#fc-left").on("click",".vip",function(){new c}),n("#fc-left").on("click",".close",function(){n("#fc-left").hide()}),d.xsend(1,102036,{index:1}),n("#fc-left").on("click",function(){window.ecom&&window.ecom.ck&&window.ecom.ck.addCkOnUrl&&(t.link=window.ecom.ck.addCkOnUrl(t.link,e.time),n("#fc-left #fc-click").attr("href",t.link))}),n(window).scroll(function(){o("#fc-left")})}})}}}),n(".reader-pageNo-2").length){{new a({ele:n("#wkad21"),pid:21,isVip:k,animEid:_})}n("#html-reader-banner-3").insertAfter(".reader-pageNo-1")}else n("#html-reader-banner-3").remove();if(n(".reader-pageNo-3").length?(m.show2To3({el:n("#wkad21-2"),next:function(){x.show2To3(function(){new s({ele:n("#wkad21-2"),pid:5})},D)}}),n("#html-reader-AD-5").insertAfter(".reader-pageNo-2")):n("#html-reader-AD-5").remove(),navigator.userAgent.indexOf("MSIE 6.0")<0&&!k&&0===A?x.showDocBtm(function(){new a({ele:n("#wkgg"),pid:3,isVip:k})},D):n(".ad-vip-close-bottom").remove(),n(".reader-pageNo-4").length?(m.show3To4({el:n("#html-reader-AD-3t4"),next:function(){w.fetchData(_).then(function(e){e.ads[2].length?window.Apex.plugin["parallax-scrolling-webku"]("#html-reader-AD-3t4",{im_time_sign:e.im_time_sign,ads:e.ads[2],animEid:_}):m.show3To4Wangmeng()}).fail(function(){m.show3To4Wangmeng()})}}),n("#html-reader-AD-3t4").addClass("hidden-doc-banner").insertAfter(".reader-pageNo-3")):n("#html-reader-AD-3t4").remove(),n("#html-reader-AD-4t5").length>0&&n(".reader-pageNo-5").length?(m.show4To5({el:n("#html-reader-AD-4t5"),next:function(){w.fetchData(_).then(function(e){e.ads[3].length?window.Apex.plugin["parallax-scrolling-webku"]("#html-reader-AD-4t5",{im_time_sign:e.im_time_sign,ads:e.ads[3],animEid:_}):x.show4To5(D)}).fail(function(){x.show4To5(D)})}}),n("#html-reader-AD-4t5").addClass("hidden-doc-banner").insertAfter(".reader-pageNo-4")):n("#html-reader-AD-4t5").remove(),n(".reader-pageNo-6").length?(m.show5To6({el:n("#html-reader-AD-5t6"),next:function(){new f({el:"#html-reader-AD-5t6",orgName:e.orgName})}}),n("#html-reader-AD-5t6").addClass("hidden-doc-banner").insertAfter(".reader-pageNo-5")):n("#html-reader-AD-5t6").remove(),e.needShowAd)if(n(".other-like-doc").height()>10){new s({ele:n("#guess-like-doc"),pid:7})}else g.init();return this}}},i.exports=_});
;define("wkview:widget/view_like_recom/comp_ppt_tmpl/doc_ad/right_rec_first_ad.js",function(e,t,o){var i=e("wkcommon:widget/ui/lib/jquery/jquery.js"),r=(e("wkcommon:widget/ui/js_core/log/log.js"),e("wkcommon:widget/lib/fis/data/data.js")),n=e("wkview:widget/view_like_recom/common/cb_recom_ad_solved.js"),c=e("wkview:widget/view_recom_thirdad/adControl/fcwm.js"),d=function(e){i.extend(!0,this.ops,e),this.run2().run3()};d.prototype={constructor:d,ops:{id:"",readerType:"html",copyright:"",recommendType:"",eeRecCount:0,adUrl:"",viewFcReqRate:""},run2:function(){{var e=this.ops,t=r.get("WkInfo").DocInfo||{};t.jiaoyu_vip_type||0}return this.judgeAdSwitch().then(function(t){var o=t.adpos_12||{};if("1"===o.adswitch){var i=e.adUrl?e.adUrl:"/source/getinfo";r.set("isRightLoadFcWmAd",1),c.getFcWm(i,e.viewFcReqRate)}else n()}),this},run3:function(){var e=this.ops;return"pay_not_weipu"!==e.recommendType&&"weipu"!==e.recommendType&&+e.eeRecCount&&n(),this},judgeAdSwitch:function(){var e=new i.Deferred,t={zy:!0,fc:!0,wm:!0,adswitch:"1"},o={adpos_12:t},r=(new Date).getTime();return i.ajax({url:"/xpage/interface/getadmanageconf?merge=1&end_type=1&ad_pos=12&t="+r,type:"get"}).done(function(t){e.resolve(t&&t.status&&0===t.status.code?t.data:o)}).fail(function(){e.resolve(o)}),e.promise()}},o.exports=d});
;define("wkview:widget/view_like_recom/comp_ppt_tmpl/recom_data.js",function(t,a,e){var i=t("wkcommon:widget/lib/doT/doT.min.js"),o=function(t){$.extend(!0,this.ops,t),this.index()};o.prototype={constructor:o,ops:{title:"",recomUrl:"/search/interface/pptsearch",verticaldocUrl:"/doc/browse/verticaldoctop"},index:function(){var t=this;t.recomDataList={};var a={query:t.ops.title,page_src_from:"view_page",sort_type:0,rn:14};$.ajax({url:t.ops.recomUrl,data:a,type:"POST"}).done(function(a){if(0===+a.status.code&&a.data&&a.data.ppt_list&&a.data.ppt_list.length>4){var e=a.data.ppt_list.length;if(t.ops.docId)for(var i=0;e>i;i++)if(t.ops.docId===a.data.ppt_list[i].doc_strid){a.data.ppt_list.splice(i,1),e--;break}e>0&&9>e?t.recomDataList.rightRecomData=a.data.ppt_list:e>=9&&(t.recomDataList.rightRecomData=a.data.ppt_list.slice(0,5),t.recomDataList.bottomRecomData=a.data.ppt_list.slice(5),13>e&&(e-=e%9,t.recomDataList.bottomRecomData=a.data.ppt_list.slice(5,e))),t.renderRecom(t)}else t.ajaxVerticalDoc(t.renderRecom)})},ajaxVerticalDoc:function(t){var a=this,e={type:"top",pn:0,rn:5};$.ajax({url:a.ops.verticaldocUrl,data:e||"",type:"GET"}).done(function(e){if(0===+e.status.code&&e.data.docList&&+e.data.docList.length>0){for(var i=e.data.docList,o=0;o<i.length;o++)i[o].doc_url="/view/"+i[o].doc_id,i[o].thumbUrlList=i[o].thumbUrlList&&i[o].thumbUrlList[0];a.recomDataList.rightRecomData=i,t(a)}})},renderRecom:function(t){if(t.recomDataList.rightRecomData){var a=i.template('<ul class="right-recom">\n{{~it.rightRecomData:value:index}}        {{? index< 5}}\n        <li class="right-item">\n<div class="pic">\n<a href="{{= value.doc_url}}" target="_blank" class="log-xsend" data-logxsend="[1, 102093, {\'index\': 3 }]">\n<img class="recom-pic" src="{{= value.thumbUrlList}}" alt="">\n</a>\n</div>\n<a href="{{= value.doc_url}}" target="_blank" class="log-xsend" data-logxsend="[1, 102093, {\'index\': 3 }]">\n<p class="recom-title"><b class="ic ic-ppt"></b>{{= value.title}}</p>\n</a>\n</li>\n{{?}}    {{~}}</ul>')(t.recomDataList);$(".com-ppt-tmpl").append(a),$(".com-ppt-tmpl").show()}if(t.recomDataList.bottomRecomData){var e=i.template('<h4 class="bottom-recom-parttitle">\n\u5927\u5bb6\u90fd\u5728\u770b</h4>\n<ul class="bottom-recom clearfix">\n{{~it.bottomRecomData:value:index}}        {{? index< 8}}\n        <li class="bottom-item fl">\n<div class="pic">\n<a href="{{= value.doc_url}}" target="_blank" class="log-xsend" data-logxsend="[1, 102093, {\'index\': 4 }]">\n<img class="recom-pic" src="{{= value.thumbUrlList}}" alt="">\n</a>\n</div>\n<a href="{{= value.doc_url}}" target="_blank" class="log-xsend" data-logxsend="[1, 102093, {\'index\': 4 }]">\n<p class="recom-title"><b class="ic ic-ppt"></b>{{= value.title}}</p>\n<div class="recom-doc-info clearfix">\n<span class="name fl">{{= value.uname}}</span>\n<span class="downnum fr"><i class="icon-downnum"></i>{{= value.download_count}}</span>\n<span class="viewnum fr"><i class="icon-viewnum"></i>{{= value.view_count}}</span>\n</div></a>\n</li>\n{{?}}    {{~}}</ul>\n')(t.recomDataList);$(".ppt-tmpl-recom-bottom").append(e)}}},e.exports=o});
;define("wkview:widget/view_like_recom/comp_wenku/index.js",function(e,i,n){var t=e("wkcommon:widget/lib/tangram/base/base.js"),o=e("wkcommon:widget/ui/js_core/log/log.js"),r=e("wkcommon:widget/lib/fis/data/data.js"),a=e("wkview:widget/view_like_recom/common/cb_recom_ad_solved.js"),c=e("wkview:widget/view_recom_thirdad/adControl/fcwm.js"),d=function(e){$.extend(!0,this.ops,e),this.run().run2()};d.prototype={constructor:d,ops:{id:"",readerType:"html",copyright:"",adUrl:"",viewFcReqRate:""},run:function(){var e=this,i=e.ops;return o.xsend(1,102111,{position:"comp_wenku_index_run"}),t.on("pagePre-"+i.id+"-relate","click",function(e){t.event.stop(e),o.send("view","relateDoc",{right:"pageClick",copyright:i.copyright,pageNo:+t.g("pageNum-"+i.id+"-relate").innerHTML-1,ply:i.readerType})}),t.on("pageNext-"+i.id+"-relate","click",function(e){t.event.stop(e),o.send("view","relateDoc",{right:"pageClick",copyright:i.copyright,pageNo:+t.g("pageNum-"+i.id+"-relate").innerHTML+1,ply:i.readerType})}),this},run2:function(){var e=this.ops,i=r.get("WkInfo").DocInfo||{},n=i.jiaoyu_vip_type||0;return o.xsend(1,102111,{position:"comp_wenku_index_run_run2"}),this.judgeAdSwitch().then(function(i){var t=i.adpos_12||{};if(o.xsend(1,102111,{position:"comp_wenku_index_run_run2_1"}),0===+n&&o.xsend(1,102111,{position:"comp_wenku_index_run_run2_2_vip"}),"1"===t.adswitch){var d=e.adUrl?e.adUrl:"/source/getinfo";r.set("isRightLoadFcWmAd",1),o.xsend(1,102111,{position:"comp_wenku_index_run_run2_2"}),c.getFcWm(d,e.viewFcReqRate)}else a()}),this},judgeAdSwitch:function(){var e=new $.Deferred,i={zy:!0,fc:!0,wm:!0,adswitch:"1"},n={adpos_12:i},t=(new Date).getTime();return $.ajax({url:"/xpage/interface/getadmanageconf?merge=1&end_type=1&ad_pos=12&t="+t,type:"get"}).done(function(i){e.resolve(i&&i.status&&0===i.status.code?i.data:n)}).fail(function(){e.resolve(n)}),e.promise()}},n.exports=d});
;define("wkview:widget/view_like_recom/comp_wenku_top/index.js",function(e,t,r){var i=e("wkcommon:widget/ess/getEssQuery.js"),n=e("wkcommon:widget/lib/fis/data/data.js"),a=n.get("WkInfo")||{},o=a&&a.WkAdInfo,s=o.blockStatus,c=e("wkcommon:widget/ui/js_core/log/log.js"),d=e("wkview:widget/node_modules/@baidu/el-visible/index.js"),l=function(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)},u=function(e){if(l(e)){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),r=t.exec(document.cookie);if(r)return r[2]||null}return null},f=function(e){var t=u(e);return"string"==typeof t?t=decodeURIComponent(t):null},v={bindEvent:function(){d.onElsVisible(".rec-content .rec-list .rec-item a",function(){var e=$(this),t=e.data("logged")?1:0;if(!t){var r=$(this).closest("li");c.xsend(1,102473,{index:r.index()+1}),e.data("logged",1)}})},loadRec:function(e){var t=e.title,r=o.wkAdMid&&JSON.parse(o.wkAdMid).viewToSearchReqStr;if(s)return void $(".right-top-rec").remove();$(".right-top-rec").hide();var n=-1;try{var a=f("BAIDUID")||"",d=a.substring(0,6);n=parseInt(d,16).toString(10)%100+1,+r>=n&&(n=1);var l=f("set_reader_query_ab");l>0&&(n=parseInt(l,10))}catch(u){n=-1}if(1===n){var v=this;i.getEssQuery().then(function(e){e&&("fengchao_no_query_search_default_query"!==e&&(t=e),$.ajax({url:"/search/interface/getrelatequery",dataType:"json",data:{word:t,show_doc_count:1,is_read_view:1}}).then(function(e){if(e.status&&0===e.status.code){var r=e.data,i=r.relateQuery;if(!i)return;if(0===i.length)return;v.bindEvent();var n,a="",o=Math.random(),s=1e7*o;n=s>1e4?parseInt(s/1e4,10)+"\u4e07":s+"";var d=i.length;d>4&&(d=4);var l="//wenku.baidu.com/search?word="+t+"&lm=0&od=0&fr=view_rs_1";a=['<li class="rec-item">','<a href="'+l+'" target="_blank" title="'+t+'">',t,"</a>","<span>\u5df2\u6709"+n+"\u7528\u6237\u641c\u7d22</span>","</li>"].join("");for(var u=0;d>u;u++){var f,g=i[u],w=g.doc_count;f=w>=1e8?(w/1e8).toFixed(2)+"\u4ebf":w>1e4?parseInt(w/1e4)+"\u4e07":w+"";var l="//wenku.baidu.com/search?"+$.param({word:g.title,lm:0,od:0,fr:"view_rs_"+(u+2)}),h=['<li class="rec-item">','<a href="'+l+'" target="_blank" title="'+g.title+'">',g.title,"</a>","<span>\u5df2\u6709"+f+"\u7528\u6237\u641c\u7d22</span>","</li>"].join("");a+=h}a='<ul class="rec-list">'+a+"</ul>",$(".rec-content").html(a),$("li.rec-item a").click(function(){var e=$(this).closest("li");c.xsend(1,102471,{index:e.index()+1})}),$(".right-top-rec").show(),c.xsend(1,102470,{})}}).fail(function(){$(".right-top-rec").remove()}))})}}};r.exports=v});
;define("wkview:widget/view_like_recom/index.js",function(e,o,i){var d=e("wkcommon:widget/lib/tangram/base/base.js"),t=e("wkview:widget/ui/view/page_list/page_list.js"),a=e("wkcommon:widget/ui/js_core/log/log.js"),c=e("wkcommon:widget/ui/lib/jquery/jquery.js"),n=e("wkcommon:widget/lib/fis/data/data.js"),s=e("wkview:widget/view_like_recom/common/business_session.js"),r=e("wkview:widget/view_like_recom/common/tob.js"),p=n.get("WkInfo")||{},m=p.DocInfo||{},g=function(e){c.extend(!0,this.ops,e),this.bindEvent().run(),s.init({id:this.ops.id}),r.init({id:this.ops.id,recommendAd:this.ops.recommendAd})};g.prototype={constructor:g,ops:{id:0,pageListId:0,itemIds:"",relateDocCount:0,recommendType:"",isWenkuRecom:!0,recommendAd:{},relateDocIds:""},recomShowedPages:{},bindEvent:function(){var e=this.ops,o=this;return"weipu"!==e.recommendType&&"pay_not_weipu"!==e.recommendType&&e.isWenkuRecom&&c(window).on("pageListChange_"+e.pageListId,c.proxy(o.onPageListChange,o)),c("#pageList-"+e.id+"-relate").on("mousedown",".rec-items",c.proxy(this.onMouseDownRecItem)),c(window).on("topBarFcAdRecom.tob",function(i,d){o.fcEid=d.eid,c("#pageList-"+e.id+"-relate").on("mousedown.tob",".rec-items",function(){!o.fcEid||2e3!==o.fcEid&&2001!==o.fcEid&&2002!==o.fcEid||a.xsend(101658,{index:5,fcEid:o.fcEid})})}),this},onPageListChange:function(e,o){var i=this,d=i.ops,t=c("#view-like-recom").data("score-mode"),n=0;n=c("#"+d.pageListId).find("li.current a").length;var s=0,r=0,p=0,g=[];c("#"+d.pageListId).find("li.current a").each(function(){var e=c(this),o=+e.data("priceType"),i=e.data("clickDocid");switch(g.push(i),o){case 1:s++,r++;break;case 2:s++,p++}}),a.xsend(1,101315,{doc_id:m.docId,currentDocId:m.docId,docIds:g.join(","),docLength:n,payDocCount:s,moneyDocCount:r,ticketDocCount:p,docTypeName:"",firstVisit:!i.recomShowedPages[+o.page],scoreMode:t}),i.recomShowedPages[+o.page]||(i.recomShowedPages[+o.page]=!0)},onMouseDownRecItem:function(){var e=c(this),o=document.getElementById("our-side-ad-box"),i={index:e.data("index"),click_doc_id:e.data("clickDocid"),list_doc_ids:e.data("listDocids"),price_type:e.data("priceType"),relateDocComosition:e.data("relateDoccomosition"),scoreMode:e.data("scoreMode"),expId:e.data("expId"),expName:e.data("expName"),expSourceStrId:e.data("expSourceStrId"),expSourceType:e.data("expSourceType"),outExpId:e.data("outExpId"),recFrom:"pc_oldview_relate"};o&&"none"!==o.style.display?i.ad=2:Math.floor(100*Math.random())<10&&(i.ad=1),a.xsend(1,102496,i),a.xsend(1,100026,i),~~m.is_exam_link&&a.xsend(1,100715);var d="doc";e.is(".wenku-video")&&(d="video"),e.is(".miaodong-video")&&(d="md-video"),a.xsend(1,101159,{type:d,markDocType:+i.markPayDoc,recPosition:+i.markRecPosition,recPage:+i.markRecPage,clickDocId:i.clickDocid||"",docTypeName:"",markRecFr:"view_r_1"})},run:function(){var e,o=this,i=o.ops;try{e=c("#pageList-4-relate").data("expId")}catch(n){e=""}a.xsend(1,102493,{outExpId:e,recFrom:"pc_oldview_relate"}),a.xsend(1,102111,{position:"view_like_recom_index_run"}),"weipu"!==i.recommendType&&"pay_not_weipu"!==i.recommendType?(c(window).trigger("pageListChange_"+i.pageListId,{page:1}),t.pageList({pageList:i.pageListId,pageNum:"pageNum-"+i.id+"-relate",pagePre:"pagePre-"+i.id+"-relate",pageNext:"pageNext-"+i.id+"-relate",total:Math.ceil(i.relateDocCount/5)})):a.send("view","relateDoc",{recommend_type:i.recommend_type,nact:"show"}),a.xsend(1,100124,{list_doc_ids:i.itemIds}),a.xsend(1,101158),a.xsend(1,100166),a.xsend(1,100624,{list_doc_ids:i.relateDocIds});var s=d.cookie.get("ADTUIJIAN");10>s&&a.xsend(1,101883);var r=d.dom.query("#pageList-"+i.id+"-relate li:first a[price=1]")[0];return r?(a.send("view","rrsShow",{price:"1",docId:m.docId}),this):void 0}},i.exports=g});
;define("wkview:widget/kg_recommend/view/statistic.js",function(e,n){var t=e("wkcommon:widget/ui/js_core/log/log.js"),a=e("wkview:widget/node_modules/@baidu/el-visible/index.js"),i=function(){var e=this;e.on("moduleShow",function(){t.xsend(1,101197)}),e.on("changeTab",function(e){var n=e.index+1,a=e.ent_uuid;t.xsend(1,101198,{index:n,ent_uuid:a}),t.xsend(1,101225)}),e.on("doclistBlockClick",function(){t.xsend(1,101225)}),e.on("changeTreeNode",function(){t.xsend(1,101199,{}),t.xsend(1,101225)}),e.on("switchClick",function(e){var n=$(".kgrecommend-wrap"),a=$(".tab-items-wrap .tab-item.active>span",n),i=$(".kgtree-wrap .text-wrap.current",n),d=a.attr("data-id"),o=a.text(),c=i.attr("data-id"),r=i.text(),s=e.ent_uuid;t.xsend(1,101201,{ent_uuid:s,tabId:d,tabName:encodeURIComponent(o),branchId:c,branchName:encodeURIComponent(r)}),t.xsend(1,101225)});var n=function(e,n){var a=n||{},i=$(".kgrecommend-wrap"),d=$(".tab-items-wrap .tab-item.active",i),o=$(">span",d),c=$(".kgtree-wrap .text-wrap.current",i),r=o.attr("data-id"),s=o.text(),m=c.attr("data-id"),b=c.text(),u={tabId:r,tabName:encodeURIComponent(s)};switch(a.indexType){case"branch":$.extend(!0,u,{index:c.index()+1,branchId:m,branchName:encodeURIComponent(b)});break;case"tab":$.extend(!0,u,{index:d.index()+1})}t.xsend(e,u)};e.on("changeTab",function(){n(101783,{indexType:"tab"})}),e.on("renderTab",function(){n(101783,{indexType:"tab"})}),e.on("renderTree",function(){n(101777,{indexType:"branch"})}),e.on("changeBranchNode",function(){n(101777,{indexType:"branch"})}),e.on("renderDocListContent",function(){var e=$(".kgrecommend-wrap"),n=$(".tab-items-wrap .tab-item.active>span",e),i=$(".kgtree-wrap .text-wrap.current",e),d=n.attr("data-id"),o=n.text(),c=i.attr("data-id"),r=i.text();$(".doclist-content .item",e).each(function(){var e=$(this);a.onAutoActElVisible(this,function(){t.xsend(101778,{tabId:d,tabName:encodeURIComponent(o),branchId:c,branchName:encodeURIComponent(r),index:e.index()+1})})}),$(document).trigger("scroll")}),e.on("renderDocListWrap",function(e){var n=e||{},i=$(".kgrecommend-wrap"),d=$(".tab-items-wrap .tab-item.active>span",i),o=d.attr("data-id"),c=d.text(),r=n.branchId,s=n.branchName;$(".doclist-wrapper .switch",i).each(function(){a.onAutoActElVisible(this,function(){t.xsend(101779,{tabId:o,tabName:encodeURIComponent(c),branchId:r,branchName:encodeURIComponent(s)})})}),$(document).trigger("scroll")})};n.Statistic=i});
;define("wkview:widget/kg_recommend/component/doclist/docitem/docitem.js",function(t,i){var e=t("wkview:widget/ui/html_view/widget.js"),a=e.widget,n=t("wkview:widget/kg_recommend/view/statistic.js").Statistic,o=t("wkcommon:widget/ui/lib/jquery/jquery.js"),s=t("wkcommon:widget/lib/doT/doT.min.js"),c=s.template("<div class=\"item clearfix\">\n<div class=\"title-wrap\">\n<b class=\"ic ic-{{=it.type}}\"></b>\n<a class=\"title log-xsend\"\n            data-mark-pay-doc=\"{{=it.markPayDoc}}\"\n            data-icon=\"{{=it.icon}}\"\n            data-logxsend=\"[1, 101200, {'icon':'{{=it.icon}}', 'index': '{{=it.index + 1}}',\n                'tabId': '{{=it.tabId}}', 'branchId': '{{=it.branchId}}',\n                'tabName': '{{= encodeURIComponent(it.tabName)}}', 'branchName': '{{=encodeURIComponent(it.branchName)}}',\n            }]\"\n            href=\"{{=it.uri}}\"\n            title='{{=it.title}}'\n            target=\"_blank\"\n        >\n{{=it.title}}</a>\n</div>\n<span class=\"price\">{{=it.pay}}</span>\n<span class=\"score\" title='{{=it.score}}\u5206'>{{=it.scoreStr || ''}}</span>\n</div>\n"),r=s.template('{{? it.score }}<span>\n{{ for(var i=0; i< it.onNum; i++) { }}\n        <b class="ic ic-star-s-on"></b>\n{{ } }}        {{? it.halfNum == 1 }}<b class="ic ic-star-s-half"></b>\n{{?}}        {{ for(var j=0; j< it.offNum; j++) { }}\n        <b class="ic ic-star-s-off"></b>\n{{?}}</span>\n{{??}}    \u6682\u65e0\u8bc4\u4ef7{{?}}'),d={word:"doc",txt:"txt",ppt:"ppt",pdf:"pdf",excel:"xls",video:"video"},l=a({Options:{},elements:{".score":"$scoreWrap",".title-wrap":"$titleWrap"},_init:function(){this.mediator=this.options.mediator,this.data=this.options.data},_initEvents:function(){var t=this;t.on("onload",function(){}),t.on("ondispose",function(){})},_render:function(){var t=this,i=t.data;i.type=d[i.type]||"doc",i.scoreStr=t._createStarRate(),o.isNumeric(i.score)||(i.score="0"),i.markPayDoc=1,/\u4e0b\u8f7d\u5238/.test(i.pay)?i.markPayDoc=2:/\u514d\u8d39/.test(i.pay)&&(i.markPayDoc=0),t.$el.append(c(i))},_createStarRate:function(){var t=this,i="",e=t.data.score,a=0;if(e&&o.isNumeric(e)){var n=Math.floor(e),s=5-Math.ceil(e);e>n&&(a=1),i=r({score:e,onNum:n,offNum:s,halfNum:a})}else i="\u6682\u65e0\u8bc4\u5206";return i},calTitleMaxWidth:function(t){var i=t.kgdocsWrapW,e=this.$elements.$titleWrap;e&&e.width(i-167)}},{type:"docitem"});e.register(l,n,n.prototype),i.Docitem=l});
;define("wkview:widget/kg_recommend/component/doclist/doclist.js",function(t,e){var i=t("wkview:widget/ui/html_view/widget.js"),n=i.widget,s=t("wkview:widget/kg_recommend/view/statistic.js").Statistic,o=t("wkcommon:widget/ui/lib/jquery/jquery.js"),c=t("wkcommon:widget/lib/doT/doT.min.js"),a=t("wkcommon:widget/ui/lib/browser/browser.js"),r=t("wkview:widget/kg_recommend/component/doclist/docitem/docitem.js").Docitem,d=t("wkcommon:widget/sessionX/sessionX.js"),l=d.sessionXMgr,m=n({Options:{},elements:{".switch":"$switchBtn",".switch .icon":"$switchIcon",".doclist-content":"$doclistContent"},_init:function(){this.Mediator=this.options.Mediator,this.data=this.options.data.doclist.data,this.total=this.options.data.doclist.total,this.totalPage=this.options.data.doclist.totalPage,this.curent=this.options.data.curent,this.pn=0,this.tpl=c.template('<div class="doclist-wrapper">\n<div class="doclist-hd clearfix">\n<span class="current-kp">{{=it.cur_enname}}</span>\n{{? it.total == 5 }}<span class="switch"><i class="icon iconfont">&#xe644;</i><span class="text">\u6362\u4e00\u6279<span></span>\n{{?}}</div>\n<div class="doclist-content">\n</div>\n</div>\n')},_initEvents:function(){var t=this;t.on("onload",function(){t._createItems(t.data),this.initEvent()}),t.on("onload",function(){t.bindEvent(t.$elements.$doclistContent,"click",function(e){o(e.target).hasClass("title")&&t.fire("doclistBlockClick")})}),t.on("onload",function(){t.bindEvent(t.$elements.$switchBtn,"mouseenter",function(){a.ie&&a.ie<=9&&t.$elements.$switchBtn.addClass("hoverenter")}),t.bindEvent(t.$elements.$switchBtn,"mouseleave",function(){a.ie&&a.ie<=9&&t.$elements.$switchBtn.removeClass("hoverenter")}),t.bindEvent(t.$elements.$switchBtn,"click",function(){t.$elements.$switchIcon.addClass("rotates");var e=t.curent.ent_uuid;t.fire("switchClick",{ent_uuid:e}),t.pn=++t.pn%t.totalPage,t.Mediator.fire("s:getDoclistBySwitch",{pn:t.pn,entUuid:e})})}),t.on("ondispose",function(){t.$el.html(""),t.unBindEvent(t.$elements.$switchBtn,"click"),t.unBindEvent(t.$elements.$switchBtn,"mouseenter"),t.unBindEvent(t.$elements.$switchBtn,"mouseleave")}),t.Mediator.on("v:refreshDoclist",function(e){t.$elements.$doclistContent.html(""),t.data=e.doclist.data,t._createItems(t.data),t.$elements.$switchIcon.removeClass("rotates")})},_render:function(){var t=this;t.$el.html(t.tpl({cur_enname:t.curent.ent_name||"",total:t.total})),this.fire("renderDocListWrap",{branchId:t.curent.ent_uuid,branchName:t.curent.ent_name||""})},_createItems:function(t){var e=this;e.docitems=[],e.$elements.$doclistContent.html("");var i=o(".kgrecommend-wrap");t&&o.each(t,function(t,n){n=n||{},n.index=t;var s=o(".tab-items-wrap .tab-item.active>span",i),c=o(".kgtree-wrap .text-wrap.current",i);n.tabId=s.attr("data-id"),n.tabName=s.text(),n.branchId=c.attr("data-id"),n.branchName=c.text();var a=new r({el:".doclist-content",Mediator:e.Mediator,data:n});e.docitems.push(a)}),this.fire("renderDocListContent"),o(".kgrecommend-wrap").trigger("resize")},initEvent:function(){var t=this;t.$el.on("click",".doclist-content .item a",function(){var t=o(this),e=t.closest(".item"),i=e.index()+1,n=o(".kgrec-container .tab-item.active"),s=n.index()+1,c="view_b_kg",a=t.prop("href"),r=l.createUrlParam({mark_pay_doc:t.data("markPayDoc")||0,mark_rec_page:s,mark_rec_position:i,mark_rec:c},a);t.prop("href",r)})},resize:function(t){this._resizeDocItemsTitleWidth(t)},_resizeDocItemsTitleWidth:function(t){var e=this;e.docitems&&o.each(e.docitems,function(e,i){i.calTitleMaxWidth(t)})}},{type:"doclist"});i.register(m,s,s.prototype),e.Doclist=m});
;define("wkview:widget/kg_recommend/component/kgtree/kgtree.js",function(t,e){var i=t("wkview:widget/ui/html_view/widget.js"),s=i.widget,n=t("wkview:widget/kg_recommend/view/statistic.js").Statistic,h=t("wkcommon:widget/ui/lib/jquery/jquery.js"),o=t("wkcommon:widget/ui/js_core/log/log.js"),a=s({Options:{offsetLeftLevel2:48,offsetLeftLevel3:48,textNodePathoutOffset:15,textNodeHeight:32,levelOffsetHeight:8},elements:{},_init:function(){if(this.Mediator=this.options.Mediator,this.data=this.options.data,this.hasParent=this.data.parent?1:0,this.hasChildren=this.data.children&&this.data.children.length?1:0,this.childrenLength=0,this.data.children){var t=this.data.children.length;t=t>3?3:t,this.childrenLength=t}this.level=1+this.hasParent+this.hasChildren,this.cardType=this._initCardType(),this.textNodes="",this.paths="",this._initNodes()},_initEvents:function(){var t=this;t.on("onload",function(){t.tempTextNode=t.options.tempTextNode,t._calWithAndHeight(),this.fire("renderTree")}),t.on("onload",function(){var e,i=t.$el.find(".text-wrap"),s=!1,n=0;t.bindEvent(i,"mouseenter",function(a){var r=h(a.currentTarget);if(r.hasClass("text-wrap")&&!r.hasClass("current")){var d=(new Date).getTime();s||(s=!0,e&&clearTimeout(e),e=setTimeout(function(){if(!(n-d>0&&50>n-d)){i.removeClass("current"),r.addClass("current");var s=r.attr("data-id"),h=r.attr("title"),a=r.attr("data-type");o.xsend(1,101199,{ent_uuid:s,type:a}),o.xsend(1,101225),t.fire("changeBranchNode"),t.Mediator.fire("s:getDoclistByChangeTreeNode",{entUuid:s,entName:h,pn:0}),e=null}},80))}}),t.bindEvent(i,"mouseleave",function(){s=!1,n=(new Date).getTime()})}),t.on("ondispose",function(){t.$el.html("")})},_render:function(){},_initCardType:function(){var t=-1;switch(this.level){case 3:t=3;break;case 2:t=1===this.hasParent?2:1;break;case 1:t=0}return t},_initNodes:function(){var t=this;this.nodes={cur:{ent_uuid:t.data.ent_uuid,ent_name:t.data.ent_name}},this.hasParent&&(this.nodes.parent=this.data.parent),this.hasChildren&&(this.nodes.children=this.data.children)},_calWithAndHeight:function(){this.containerWidth=this.$el.innerWidth(),this.containerHeight=this.$el.innerHeight(),this.contentWidth=this._calTreeWidth(),this.contentHeight=this._calTreeHeight(),this.contentOffsetLeft=(this.containerWidth-this.contentWidth)/2,this.contentOffsetTop=(this.containerHeight-this.contentHeight)/2,this.fire("ondispose"),this._drawTextNodes(),this._drawPaths()},_calTreeWidth:function(){var t=this,e=this.tempTextNode.text(this.nodes.cur.ent_name).parent(".text-wrap").outerWidth();t.nodes.cur.width=e;var i=0;this.hasParent&&(i=this.tempTextNode.text(this.nodes.parent.ent_name).parent(".text-wrap").outerWidth(),t.nodes.parent.width=e);var s=0;this.hasChildren&&h.each(t.nodes.children,function(e,i){var n=t.tempTextNode.text(i.ent_name).parent(".text-wrap").outerWidth();i.width=n,n>s&&(s=n)});var n=0;switch(this.cardType){case 1:n=Math.max(e,s+this.options.offsetLeftLevel2);break;case 2:n=Math.max(i,e+this.options.offsetLeftLevel2);break;case 3:n=Math.max(i,e+this.options.offsetLeftLevel2,s+this.options.offsetLeftLevel2+this.options.offsetLeftLevel3)}return n},_calTreeHeight:function(){var t=0;switch(this.cardType){case 1:t=this.options.textNodeHeight+this.options.levelOffsetHeight+this.options.textNodeHeight*this.childrenLength+this.options.levelOffsetHeight*(this.childrenLength-1);break;case 2:t=2*this.options.textNodeHeight+this.options.levelOffsetHeight;break;case 3:t=2*this.options.textNodeHeight+2*this.options.levelOffsetHeight+this.options.textNodeHeight*this.childrenLength+this.options.levelOffsetHeight*(this.childrenLength-1)}return t},_drawTextNodes:function(){var t=this;h.each(t.nodes,function(e,i){switch(e){case"parent":t._drawParentTextNode(i);break;case"cur":t._drawCurTextNode(i);break;case"children":t._drawChildrenTextNode(i)}}),this.$el.append(t.textNodes)},_drawParentTextNode:function(t){var e=t;e.type="parent",e.height=this.options.textNodeHeight,e.X=this.contentOffsetLeft,e.Y=this.contentOffsetTop,e.coords=this._setFiveCoords(e),this.textNodes+=this._createTextNodeStr(e)},_drawCurTextNode:function(t){var e=t;e.isCur=1,e.type="current",e.height=this.options.textNodeHeight,1===this.cardType?(e.X=this.contentOffsetLeft,e.Y=this.contentOffsetTop):(2===this.cardType||3===this.cardType)&&(e.X=this.contentOffsetLeft+this.options.offsetLeftLevel2,e.Y=this.contentOffsetTop+this.options.textNodeHeight+this.options.levelOffsetHeight),e.coords=this._setFiveCoords(e),this.textNodes+=this._createTextNodeStr(e)},_drawChildrenTextNode:function(t){var e=this,i=t,s=this.contentOffsetLeft,n=this.contentOffsetTop;1===this.cardType?(s+=this.options.offsetLeftLevel2,n+=this.options.textNodeHeight+this.options.levelOffsetHeight):3===this.cardType&&(s+=this.options.offsetLeftLevel2+this.options.offsetLeftLevel3,n+=2*this.options.textNodeHeight+2*this.options.levelOffsetHeight),h.each(i,function(t,i){i.type="children",i.X=s,i.Y=n+(e.options.textNodeHeight+e.options.levelOffsetHeight)*t,i.height=e.options.textNodeHeight,i.coords=e._setFiveCoords(i),e.textNodes+=e._createTextNodeStr(i)})},_setFiveCoords:function(t){var e=[t.X+t.width/2,t.Y],i=[t.X+t.width-1,t.Y+t.height/2],s=[t.X+t.width/2,t.Y+t.height],n=[t.X+this.options.textNodePathoutOffset,t.Y+t.height],h=[t.X,t.Y+t.height/2];return{c0:e,c1:i,c2:s,c3:n,c4:h}},_createTextNodeStr:function(t){var e="";t.isCur&&1===t.isCur&&(e+="current");var i='<a class="text-wrap '+e+'" data-id="'+t.ent_uuid+'" data-type="'+t.type+'"  title="'+t.ent_name+'" style="left:'+t.X+"px; top:"+t.Y+'px;"><span class="text-node">'+t.ent_name+"</span></a>";return i},_drawPaths:function(){this.hasParent&&this._drawParentPath(),this.hasChildren&&this._drawCurPath(),this.$el.append(this.paths)},_drawParentPath:function(){var t=this.nodes.parent,e=this.nodes.cur;this.paths+=this._createPathStr(t,e,"border-left-bottom")},_drawCurPath:function(){var t=this.nodes.cur,e=this,i=e.nodes.children.length,s="border-bottom";h.each(e.nodes.children,function(n,h){n===i-1&&(s="border-left-bottom"),e.paths+=e._createPathStr(t,h,s)})},_createPathStr:function(t,e,i){var s=t.coords.c3[0],n=t.coords.c3[1],h=e.coords.c4[0]-s,o=e.coords.c4[1]-n,a='<div class="path '+i+'" style="left:'+s+"px; top:"+n+"px; width:"+h+"px; height:"+o+'px;"></div>';return a}},{type:"kgtree"});i.register(a,n,n.prototype),e.KGTree=a});
;define("wkview:widget/kg_recommend/component/tab/tab.js",function(t,e){var i=t("wkview:widget/ui/html_view/widget.js"),n=i.widget,a=t("wkview:widget/kg_recommend/view/statistic.js").Statistic,s=t("wkcommon:widget/ui/lib/jquery/jquery.js"),o=t("wkcommon:widget/lib/doT/doT.min.js"),d=n({Options:{},elements:{".tab-item":"$tabItems"},_init:function(){this.Mediator=this.options.Mediator,this.data=this.options.data,this.tpl=o.template('{{~ it.items :value:index}}<li class="tab-item {{?index == 0}}active{{?}}">\n<span class="tab-item-title" data-id="{{=value.ent_uuid}}">{{=value.ent_name}}</span>\n</li>\n{{~}}')},_initEvents:function(){var t=this;t.on("onload",function(){var e,i=!1,n=0;s.each(t.$elements.$tabItems,function(a,o){t.bindEvent(o,"mouseenter",function(a){var o=(new Date).getTime(),d=s(a.currentTarget);d.hasClass("active")||i||(i=!0,e&&clearTimeout(e),e=setTimeout(function(){if(!(n-o>0&&50>n-o)){t.$elements.$tabItems.removeClass("active"),d.addClass("active");var i=d.find(".tab-item-title").attr("data-id");t.Mediator.fire("s:getDataByTabItem",{ent_uuid:i}),t.fire("changeTab",{index:d.index(),ent_uuid:i}),e=null}},50))}),t.bindEvent(o,"mouseleave",function(){i=!1,n=(new Date).getTime()})})}),t.on("ondispose",function(){})},_render:function(){var t=this;t.$el.html(t.tpl({items:t.data})),t.fire("renderTab")}},{type:"tab-items"});i.register(d,a,a.prototype),e.Tab=d});
;define("wkview:widget/kg_recommend/view/view.js",function(e,t){var i=e("wkcommon:widget/lib/tangram/base/base.js"),n=e("wkview:widget/ui/html_view/widget.js"),o=(e("wkcommon:widget/ui/lib/page/page.js"),n.widget),s=e("wkview:widget/kg_recommend/view/statistic.js").Statistic,r=e("wkcommon:widget/ui/lib/jquery/jquery.js"),d=e("wkcommon:widget/lib/doT/doT.min.js"),a=e("wkview:widget/kg_recommend/component/tab/tab.js").Tab,c=e("wkview:widget/kg_recommend/component/kgtree/kgtree.js").KGTree,l=e("wkview:widget/kg_recommend/component/doclist/doclist.js").Doclist,m={kgPadding:24,kgTreeWrapWidth:350,kgTreeWrapMr:30},g=o({Options:{},elements:{".kgrec-container":"$kgrecContainer",".kgdocs-wrap":"$kgdocsWrap",".text-node-temp .text-node":"$tempTextNode",".kgtree-content":"$kgtreeContent"},_init:function(){this.Mediator=this.options.Mediator,this.tpl=d.template('<div class=\'mod kgrec-container pt20\'>\n<div class="hd kg-hd">\u76f8\u5173\u77e5\u8bc6</div>\n<div class="bd kg-bd">\n<div class="tab-items">\n<ul class="tab-items-wrap clearfix">\n</ul>\n</div>\n<div class="tab-content clearfix">\n<div class="kgtree-wrap">\n<div class="kgtree-content"></div>\n<div class="arrow"></div>\n</div>\n<div class="kgdocs-wrap"></div>\n</div>\n</div>\n</div>\n<div class="text-node-temp">\n<a class="text-wrap">\n<span class="text-node"></span>\n</a>\n</div>\n')},_initEvents:function(){var e=this;e.on("onload",function(){i.lang.eventCenter.addEventListener("Reader.zoomChange",r.proxy(e._resize,e))}),e.on("onload",function(){function t(){var t=e.$el.offset().top,n=e.$el.height(),o=r(window).height(),s=r(window).scrollTop();s+o>=t+n&&(i||e.fire("moduleShow"),i=!0)}var i=!1;r(window).on("scroll.kgrecommend",t),t()}),e.on("ondispose",function(){}),e.Mediator.on("v:initFirstKGInfo",function(t){e.$elements.$kgrecContainer.show(),e.tabItems=t.items||[],e.cardItems=t.carditems||[],e.doclist=t.doclist||{},e._createTabItems(),e._createKGTree(e.cardItems[0]),e._ceatDoclist({doclist:e.doclist,curent:{ent_uuid:e.cardItems[0].ent_uuid,ent_name:e.cardItems[0].ent_name}})}),e.Mediator.on("v:refreshKGTreeDoclist",function(t){e._refreshKGTreeDoclist(t)}),e.Mediator.on("v:refreshWholeDoclist",function(t){e._refreshWholeDoclist(t)})},_render:function(){var e=this;this.$el.html(e.tpl())},_createTabItems:function(){var e=this;this.tabItemComp=new a({el:".tab-items-wrap",Mediator:e.Mediator,data:e.tabItems})},_createKGTree:function(e){var t=this;e&&(r.isEmptyObject(e)||(t.KGTree=new c({el:".kgtree-content",Mediator:t.Mediator,tempTextNode:t.$elements.$tempTextNode,data:e})))},_calDoclistWidth:function(){var e=r(".reader-container").width();this.$elements.$kgdocsWrap.width(e-2*m.kgPadding-m.kgTreeWrapWidth-m.kgTreeWrapMr)},_resize:function(){var e=this;this._calDoclistWidth(),this.Doclist&&this.Doclist.resize({kgdocsWrapW:e.$elements.$kgdocsWrap.width()})},_ceatDoclist:function(e){var t=this;t.Doclist&&t.Doclist.fire("ondispose"),t.Doclist=new l({el:".kgdocs-wrap",Mediator:t.Mediator,data:e})},_refreshKGTreeDoclist:function(e){var t=this;t.cardItems=e.carditems||{},t.doclist=e.doclist||[],t._createKGTree(t.cardItems),t.$elements.$kgdocsWrap.html(""),t._ceatDoclist({doclist:t.doclist,curent:{ent_uuid:t.cardItems.ent_uuid,ent_name:t.cardItems.ent_name}})},_refreshWholeDoclist:function(e){var t=this,i=e.curNode;t.doclist=e.doclist||[],t.$elements.$kgdocsWrap.html(""),t._ceatDoclist({doclist:t.doclist,curent:{ent_uuid:i.ent_uuid,ent_name:i.ent_name}})}});n.register(g,s,s.prototype),t.View=g});
;define("wkview:widget/kg_recommend/util/config.js",function(e,E,t){var n="//wenku.baidu.com",i=!1;i===!0&&(n="http://cp01-wenku-orptest.epc.baidu.com:8099"),t.exports={type:{getrelinfo:"GETRELINFO_INTERFACE",getCardDocsByEntid:"GETCARDDOCSBYENTID_INTERFACE",getDoclistByPn:"GETDOCLISTBYPN_INTERFACE"},url:{GETRELINFO_INTERFACE:n+"/knowledge/pc/getpcentityinfo",GETCARDDOCSBYENTID_INTERFACE:n+"/knowledge/pc/getpcinfobyentid",GETDOCLISTBYPN_INTERFACE:n+"/knowledge/pc/getspecificpageinfo"},rn:20}});
;define("wkview:widget/kg_recommend/util/getContent.js",function(e,t){var n=e("wkcommon:widget/ui/lib/jquery/jquery.js"),i=(e("wkview:widget/kg_recommend/util/config.js"),function(e,t){var e=e+"?callback=?";return n.getJSON(e,t)});t.getContent=i});
;define("wkview:widget/kg_recommend/store/getContentData.js",function(e,t){var n=e("wkcommon:widget/ui/lib/jquery/jquery.js"),o=e("wkview:widget/kg_recommend/util/getContent.js").getContent,i=e("wkview:widget/kg_recommend/util/config.js"),r=function(e,t){var r=function(e){var r=new n.Deferred,d=i.url[e],g={doc_id:t.doc_id};return o(d,g).done(function(e){r.resolve(e)}),r.promise()};e.on("s:getContentData",function(e){var t=e.type||i.type.getrelinfo,n=e.promise;return r(t).then(function(e){n.resolve(e)}),n})};t.getContentData=r});
;define("wkview:widget/kg_recommend/store/getCardDocsByEntid.js",function(e,n){var t=e("wkcommon:widget/ui/lib/jquery/jquery.js"),i=e("wkview:widget/kg_recommend/util/getContent.js").getContent,o=e("wkview:widget/kg_recommend/util/config.js"),r={},d=function(e,n){var d=function(e,d){var c=new t.Deferred,u=o.url[e],s={doc_id:n.doc_id,entUuid:d};return r[d]?c.resolve(r[d]):i(u,s).done(function(e){r[d]=e,c.resolve(e)}),c.promise()};e.on("s:getCardDocsByEntid",function(e){var n=e.type,t=e.entUuid,i=e.promise;return d(n,t).then(function(e){i.resolve(e)}),i})};n.getCardDocsByEntid=d});
;define("wkview:widget/kg_recommend/store/getDoclistByPn.js",function(e,n){var t=e("wkcommon:widget/ui/lib/jquery/jquery.js"),i=e("wkview:widget/kg_recommend/util/getContent.js").getContent,o=e("wkview:widget/kg_recommend/util/config.js"),r=function(e,n){var r=function(e,r,c){var d=new t.Deferred,u=o.url[e],g={entUuid:r,doc_id:n.doc_id,pn:c};return i(u,g).done(function(e){d.resolve(e)}),d.promise()};e.on("s:getDoclistByPn",function(e){var n=e.type,t=e.entUuid,i=e.pn,o=e.promise;return r(n,t,i).then(function(e){o.resolve(e)}),o})};n.getDoclistByPn=r});
;define("wkview:widget/kg_recommend/kg_recommend.js",function(e,t){function n(e){var t=new d({el:e.el,docWrap:e.docWrap,Mediator:o});t.on("onload",function(){c(o,{doc_id:e.docId}),r(o,{doc_id:e.docId}),s(o,{doc_id:e.docId}),o.fire("v:initFirstKGInfo",e.data||{}),o.on("s:getDataByTabItem",function(t){var n=t&&t.ent_uuid;o.fire("s:getCardDocsByEntid",{type:g.type.getCardDocsByEntid,doc_id:e.docId,entUuid:n}).then(function(e){o.fire("v:refreshKGTreeDoclist",e)})}),o.on("s:getDoclistBySwitch",function(e){var t=e.entUuid,n=e.pn;o.fire("s:getDoclistByPn",{type:g.type.getDoclistByPn,pn:n,entUuid:t}).then(function(e){o.fire("v:refreshDoclist",e)})}),o.on("s:getDoclistByChangeTreeNode",function(e){var t=e.entUuid,n=e.entName,i={ent_uuid:t,ent_name:n},d=e.pn;o.fire("s:getDoclistByPn",{type:g.type.getDoclistByPn,pn:d,entUuid:t}).then(function(e){e.curNode=i,o.fire("v:refreshWholeDoclist",e)})})})}var i=e("wkcommon:widget/ui/js_core/mvp/event/event.js").custEvent,o=new i,d=e("wkview:widget/kg_recommend/view/view.js").View,c=e("wkview:widget/kg_recommend/store/getContentData.js").getContentData,r=e("wkview:widget/kg_recommend/store/getCardDocsByEntid.js").getCardDocsByEntid,s=e("wkview:widget/kg_recommend/store/getDoclistByPn.js").getDoclistByPn,g=e("wkview:widget/kg_recommend/util/config.js");t.main=n});
;define("wkview:widget/format_convert/dialog_down_doc/format_convert.js",function(e,o,t){var i=e("wkcommon:widget/lib/tangram/base/base.js"),d=e("wkcommon:widget/lib/doT/doT.min.js"),n=e("wkcommon:widget/ui/js_core/log/log.js"),a={1:"pdf",2:"ppt",3:"word",4:"excel"};t.exports={template:'<div class="format-convert-content">\n<i class="vip-tag-icon"></i>\n<div class="format-convert-text">\n<i class="doc-icon doc-icon-{{=it.docTypeMap[it.docTypeSelect]}}"></i>\n<p>\n\u8f6c\u4e3a{{? !it.docTypeChanged}}\u5176\u4ed6{{??}}{{= it.docTypeMap[it.docTypeSelect]}}{{?}}\u683c\u5f0f</p>\n<i class="arrow"></i>\n</div>\n<div class="format-convert-list">\n{{~ it.docTypeCandidates :item:i }}<div class="format-convert-item" data-doc-type="{{=item}}">\n<i class="doc-icon doc-icon-{{=it.docTypeMap[item]}}"></i>\n<p>\u8f6c\u4e3a{{=it.docTypeMap[item]}}{{? item==it.docTypeOri}}\u539f{{?}}\u683c\u5f0f</p>\n</div>\n{{~}}</div>\n</div>',docTypeConvertFromQuery:null,getQueryConvert:function(){var e=i.url.getQueryValue(location.href,"docTypeConvert");e&&(this.docTypeConvertFromQuery=e)},sortFn:function(e,o){return 4===+e?1:+o-+e},init:function(e,o){var t,i,d=o.vipInfo,n=o.transType;for(var r in n)if(n.hasOwnProperty(r)){t=r,i=n[r]||[],this.docTypeCandidates=n[r].slice(0),this.docTypeCandidates.sort(this.sortFn),this.olDDocTypeCandidates=this.docTypeCandidates.slice(0);break}if(t&&i.length){this.getQueryConvert();var c={docTypeMap:a,docTypeOri:t,docTypeSelect:t,docTypeChanged:!1,docTypeCandidates:this.docTypeCandidates,vipInfo:d};if(this.docTypeConvertFromQuery&&this.docTypeConvertFromQuery!==t){var s=this.arrIndexOf(this.olDDocTypeCandidates,this.docTypeConvertFromQuery+""),p=this.olDDocTypeCandidates.slice(0);p.splice(s,1),c.docTypeCandidates=p.concat(t+""),c.docTypeSelect=this.docTypeConvertFromQuery,c.docTypeChanged=!0;var y=window.dataFormatConvert&&window.dataFormatConvert.docTypeConvert;window.dataFormatConvert={docTypeConvert:y?y:+this.docTypeConvertFromQuery,docTypeOrigin:1}}if(window.dataFormatConvert&&window.dataFormatConvert.docTypeConvert&&"trigger"===window.dataFormatSource){var v=window.dataFormatConvert.docTypeConvert,s=this.arrIndexOf(this.olDDocTypeCandidates,v+""),p=this.olDDocTypeCandidates.slice(0);p.splice(s,1),c.docTypeCandidates=p.concat(t+""),c.docTypeSelect=v,c.docTypeChanged=!0,window.dataFormatSource="",window.dataFormatConvert={docTypeConvert:+v,docTypeOrigin:1}}this.render(e,c),this.bindEvent(e,c)}},render:function(e,o){e.html(d.template(this.template)(o))},arrIndexOf:function(e,o){if(!e||!e.length)return-1;for(var t=0,i=e.length;i>t;t++)if(e[t]===o)return t;return-1},bindEvent:function(e,o){var t=o.vipInfo,i=o.docTypeMap,d=+o.docTypeOri,a=this;e.on("mouseenter",".format-convert-content",function(){n.xsend(1,101966),$(this).addClass("hover"),$(".format-convert-list",e).show()}).on("mouseleave",".format-convert-content",function(){$(this).removeClass("hover"),$(".format-convert-list",e).hide()}).on("click",".format-convert-item",function(){var o=$(this),n=+o.data("docType"),r=i[n];if(document.downloadForm&&(window.dataFormatConvert={docTypeOrigin:+d,docTypeConvert:+n}),t.isVip)$(window).trigger("switch-format-doc-type",{docTypeText:r});else{if(n!==d){var c="https://wenku.baidu.com/cashier/browse/jiaoyuvipcashier?"+$.param({cashier_code:"pcview_download_convert"});return window.open(c),$(".format-convert-list",e).hide(),!1}$(window).trigger("switch-format-doc-type",{docTypeText:r})}$(".format-convert-list",e).hide();var s=!0;if(+o.data("docType")!==+d){var p=a.arrIndexOf(a.olDDocTypeCandidates,n+""),y=a.olDDocTypeCandidates.slice(0);y.splice(p,1),a.docTypeCandidates=y.concat(d+""),s=!0}else a.docTypeCandidates=a.olDDocTypeCandidates.slice(0),s=!1;a.render(e,{docTypeMap:i,docTypeOri:d,docTypeSelect:n,docTypeChanged:s,docTypeCandidates:a.docTypeCandidates})})}}});
;define("wkview:widget/format_convert/download_handler/download_handler.js",function(e,n,r){var t=e("wkcommon:widget/lib/doT/doT.min.js"),o=function(){};o.prototype={constructor:o,needConvert:function(e,n,r){var t=n.vipHuixueConvert||{};if(0===+t.is_open)return!1;var o=!1,a=e||{};return a.docTypeOrigin&&a.docTypeConvert&&a.docTypeOrigin!==a.docTypeConvert&&!n.downloaded&&r.isVip&&(o=!0),o},isSafari:function(){return navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")},run:function(e,n,r){var o=this,a=n||{};$.eduAjax2({url:e,type:"POST",data:a,dataType:"json",bizSuccess:function(e){var n=e||{},a=JSON.parse(JSON.stringify(n.transDocParams));a.title=encodeURIComponent(a.title),a.tpl="download",a.wp=r.wpsf;var i=[],d="_blank";o.isSafari()&&(d="_self"),$.each(a,function(e,n){i.push({key:e,val:n})});var u=t.template('<form class="form-convert"\n    target="{{=it.target}}"\n    action="/user/browse/huixueconvert"\n    method="POST"\n>\n{{~ it.paramArr :item:i }}<input type="hidden" name="{{=item.key}}" value="{{=item.val}}">\n{{~}}</form>')({paramArr:i,target:d}),c=$(u);$("body").append(c),c.submit()},bizError:function(e){o.handlerError(e)},error:function(e){o.handlerError(e)}})},handlerError:function(e){var n=this,r=e||{},t=r.transDocParams;if(t){var o,a=window.getDonwloadCompletePage,i={};2===+r.error_no&&(i={formatConvertExp:1}),"function"==typeof a&&(o=a(i)),window.location.href=t.transDocBos,setTimeout(function(){if(o)if(n.isSafari()||o.disableBlank)location.href=o.url;else{var e=document.createElement("form");e=document.createElement("form"),e.action=o.url,e.target="_blank",e.method="POST",document.body.appendChild(e),e.submit()}},1200)}},getQuery:function(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=window.location.search.substr(1).match(n);return null!==r?unescape(r[2]):""},handleComplete:function(){var e=this.getQuery("formatConvertExp");1===+e&&$.toast("\u7cfb\u7edf\u9519\u8bef\uff0c\u5df2\u4e3a\u60a8\u4e0b\u8f7d\u539f\u683c\u5f0f\u6587\u6863")}},r.exports=new o});
;define("wkview:widget/ad/viewSideDownAd/viewSideDown.js",function(e){var i=e("wkcommon:widget/lib/tangram/base/base.js"),o=e("wkview:widget/common_item/autofixed/autofixed.js").autofixed,w=e("wkcommon:widget/ui/lib/jquery/jquery.js"),n={init:function(){(!i.browser.ie||i.browser.ie>7)&&new o({el:i.g("viewSideDown"),exTop:w(window).height()-270});var e=w("#viewSideDown");e.on("click",".btn-viewSideDown-close",function(i){i.stopPropagation(),e.hide()})}};return n});
;define("wkview:widget/raw_income/raw_income.js",function(e,t,i){function n(e){this.options=e||{},this.step2Tmpl=a.template('<div class="WkDownload-activity">\n<div class="dialog-ad dialog-ad-nomarl">\n<div class="donwload-activity-dialog-container">\n<div class="myclose"></div>\n<div class="income-close-btn verify-close-btn" data-fun="close-dialog"></div>\n<div class="dialog-left-greenbar"></div>\n<div class="dialog-top">\n<p class="doc-title" rel="new-dialog" alt="dialog_tit">{{=it.tmpdata.step2.title}}</p>\n</div>\n<div class="dialog-inner tac">\n<div id="giftform">\n{{~it.tmpdata.step2.collectList:value:index}}<div class="formgroup {{=value.className}}">\n{{? value.type == \'options\'}}<div class="ui-bz-select"><p class="ui-bz-select-word" data-fun="select">{{=value.title}}</p>\n<ul class="ui-bz-select-option">\n{{~value.list:valuelist:indexlist}}<li><a href="javascript:;" data-fun="choice" data-value="{{=valuelist.value}}">{{=valuelist.value}}</span></a></li>\n{{~}}</ul>\n<input type="text" name="{{=value.name}}" class="ipt-hide">\n</div>\n{{??}}<input type="text" placeholder="{{=value.title}}" name="{{=value.name}}" class="txt_usname fixplaceholder"/>\n{{?}}</div>\n{{~}}<div class="formgroup">\n<input class="ui-bz-ipt ui-bz-ipt-bgw fixplaceholder" type="text" placeholder="\u8bf7\u586b\u5199\u624b\u673a\u53f7\u7801" name="phone" autocomplete="off">\n<div class="sug phone-sug"></div>\n<span class="errorinfo">\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7</span>\n</div>\n<div class="formgroup" style="display: none;">\n<div class="tel-wrap">\n<input class="ui-bz-ipt ui-bz-ipt-bgw fixplaceholder" type="text" placeholder="\u8bf7\u586b\u5199\u624b\u673a\u9a8c\u8bc1\u7801" name="phone_vcode" style="width: 139px;">\n<a href="javascript:;" class="ui-bz-btn-normal ui-bz-btn-51offer">\n<b class="ui-bz-btn-p-15 ui-bz-btc" data-fun="get-smsg">\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801</b>\n</a>\n</div>\n<span class="errorinfo" id="telerror">\u8bf7\u586b\u5199\u6b63\u786e\u624b\u673a\u9a8c\u8bc1\u7801</span>\n</div>\n<div class="formgroup form-err-group">\n<span class="errorinfo"></span>\n</div>\n<div class="formgroup">\n<div class="formgroup-privacy">\n<span class="please-select" data-fun="please-select"></span>\n\u6211\u4e86\u89e3\u672c\u9875\u4fe1\u606f\u53bb\u5411\u3002<span class="privacy-protection">\u9690\u79c1\u4fdd\u969c<span>\u60a8\u586b\u5199\u7684\u8054\u7cfb\u4fe1\u606f\u5c06\u7531{{=it.tmpdata.adname}}\u83b7\u53d6\u5e76\u53ef\u80fd\u76f4\u63a5\u5411\u60a8\u81f4\u7535\uff0c\u5982\u60a8\u4e0d\u5e0c\u671b\u6253\u6270\uff0c\u8bf7\u52ff\u4f7f\u7528\u8be5\u670d\u52a1</span>\n</span>\n</div>\n</div>\n</div>\n{{? it.index == 3}}<div class="public-tip public-tip-v2">\n{{=it.tmpdata.advertiser_step2.before}}<span class="name">{{=it.tmpdata.advertiser_step2.name}}</span>\n{{=it.tmpdata.advertiser_step2.after}}<span class="private">\n&nbsp;\u9690\u79c1\u4fdd\u969c<div class="hover-tip-hujiang">\n<span class="arrow-icon"></span>\n{{=it.tmpdata.privacy_policy}}</div>\n</span>\n</div>\n<a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc"><b class="ui-bz-btn-p-16 ui-bz-btc" data-fun="submit-info">\u514d\u8d39\u9884\u7ea6</b></a>\n{{?}}                {{? it.index == 1}}<a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc"><b class="ui-bz-btn-p-16 ui-bz-btc" data-fun="submit-info">\u514d\u8d39\u4e0b\u8f7d</b></a>\n{{?}}</div>\n</div>\n</div>\n</div>\n<div class="WkDownload-activity-iframe">\n<iframe allowTransparency="true" src="" frameborder="0" scrolling="no"></iframe>\n</div>\n'),this.init()}{var o=e("wkcommon:widget/ui/lib/jquery/jquery.js"),a=e("wkcommon:widget/lib/doT/doT.min.js"),s=e("wkcommon:widget/lib/tangram/base/base.js"),r=e("wkcommon:widget/ui/js_core/log/log.js"),l=(e("wkcommon:widget/ui/js_core/dialog/dialog.js"),e("wkcommon:widget/ui/js_core/_dialog/_dialog.js")),d=e("wkcommon:widget/lib/fis/data/data.js");e("wkcommon:widget/ui/lib/jquery_xdomainrequest/xdomainrequest.js")}n.prototype={init:function(){var e=this;e.addEventListener()},getHTML:function(e){var t="step"+(e||2)+"Tmpl";return this[t]({type:e||0,activity_id:this.activity_id})},closeDialog:function(e){var t=this;o(".WkDownload-activity, .WkDownload-activity-iframe").remove(),"function"==typeof e&&e(t)},showDialog:function(){var e=this,t=(o(window).height(),l.customDialog);new t({width:481,content:e.step2Tmpl({index:e.options.index,tmpdata:e.options}),closeSelector:".myclose",mask:{bgColor:"transparent"}}),3==e.options.index&&r.xsend(1,101105,{id:e.options.adId,index:3}),e.placeholder()},getPhoneMsg:function(e){o.get("/org/interface/getphone?&t="+Math.random(),function(e){0===e.errno&&e.data.securemobil&&!e.data.is_same&&o(".phone-sug").html(e.data.securemobil)})},addEventListener:function(){var e=this;o("body").on("click",".dialog-ad",function(t){var i=o(t.target),n=i.attr("data-fun");switch(n){case"submit-info":var a={},s=e.getFormData();if(a.mobile=s.phone,a.unit_id=e.options.unitid,a.phone_vcode=s.phone_vcode,a.keyword=e.options.keyword,a.province_id=e.options.city,a.title=d.get("WkInfo").DocInfo.title,o(".select-no").length>0)return void alert("\u8bf7\u5148\u9009\u4e2d\u4e86\u89e3\u672c\u9875\u4fe1\u606f\u53bb\u5411");var l=document.cookie,c=l.indexOf("cpladtime");if(-1===c)return void alert("\u9875\u9762\u5df2\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u5237\u65b0\u9875\u9762\u540e\u586b\u5199");if(""===s.phone_vcode)return void e.showErr("phone_vcode");if(void 0!==s.filter&&""===s.filter)return void alert("\u8bf7\u5148\u586b\u5199\u5b8c\u6574\u95ee\u5377\u8c03\u67e5");a.phone_vcode=s.phone_vcode,delete s.phone_vcode,a.clues_data=s,3==e.options.index&&r.xsend(1,101105,{id:e.options.adId,index:4}),o(".form-err-group").removeClass("err"),o.ajax({type:"get",url:"https://contentad.baidu.com/delivery/user/wkcplclueadd",data:a,dataType:"json",success:function(t){var n=t.status.code;if(0===n){i.attr("data-fun",""),e.options.step2.download_url&&e.godownload(e.options.step2.download_url),(!s.filter||s.filter&&"\u662f"===decodeURI(s.filter))&&e.visitUrl(e.options.actionurl);var a=setTimeout(function(){clearTimeout(a),e.gonext()},1e3)}else o(".form-err-group .errorinfo").html(t.status.msg||"\u7cfb\u7edf\u7e41\u5fd9, \u8bf7\u7a0d\u540e\u91cd\u8bd5"),o(".form-err-group").addClass("err")}});break;case"get-smsg":var p=o(".dialog-ad input[name=phone]");if(!e.isTel(p.val()))return void p.css("border-color","red").siblings(".errorinfo").css("display","block");i.parent().addClass("ui-bz-btn-disable"),i.attr("data-fun","");var u="\u79d2\u540e\u91cd\u53d1",v=120;o.ajax({type:"get",url:"https://contentad.baidu.com/delivery/tool/sendauthcode",data:{mobile:p.val(),no_decode:1,valid_time:120},dataType:"json",success:function(t){var n=+t.status.code;if(0!==n){o("#telerror").html(t.status.msg),e.showErr("phone_vcode");var a=setInterval(function(){clearInterval(a),i.parent().removeClass("ui-bz-btn-disable"),i.text("\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801").attr("data-fun","get-smsg")},3e3)}else var s=setInterval(function(){v?(i.text(v+u),v--):(clearInterval(s),i.parent().removeClass("ui-bz-btn-disable"),i.text("\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801").attr("data-fun","get-smsg"))},1e3)}});break;case"choice":var f=i.attr("data-value"),m=i.text(),h=i.parents(".ui-bz-select");h.find(".ui-bz-select-word").text(m),h.find(".ipt-hide").val(f),h.find(".ui-bz-select-option").hide(),e.rmErr(h.find(".ipt-hide").attr("name"));break;case"please-select":i.hasClass("select-no")?i.removeClass("select-no"):i.addClass("select-no")}}),o("body").on("blur","input[name=phone]",function(){var t=o(this),i=t.val();return e.rmErr("phone"),e.isTel(i)?void 0:void e.showErr("phone")}),o("body").on("blur","input[name=phone_vcode]",function(){var t=o(this).val();e.rmErr("phone_vcode"),o.trim(t)||(o("#telerror").html("\u9a8c\u8bc1\u7801\u4e3a\u7a7a"),e.showErr("phone_vcode"))}),o("body").on("keyup blur change",".dialog-ad .ic-name",function(){o.trim(o(this).val())?e.rmErr("name"):e.showErr("name")}),o("body").on("keyup blur change",".dialog-ad input[name=phone]",function(t){t.preventDefault();var i=o(this).val(),n=o(".phone-sug").html(),a=new RegExp("^"+i);return i===n?(o(".phone-sug").hide(),void o(".tel-wrap").parent().hide()):(e.isTel(i)&&i!==n&&o(".tel-wrap").parent().show(),i?void(a.test(n)?o(".phone-sug").show():o(".phone-sug").hide()):void o(".phone-sug").hide())}),o("body").on("click",".verify-close-btn",function(){o(".myclose").trigger("click"),o(".ys-ads-mask").hide()}),o("body").on("click",".phone-sug",function(){o(".dialog-ad input[name=phone]").val(o(this).html()),o(".dialog-ad input[name=phone]").trigger("blur"),o(this).hide()}),o("body").on("focus","#giftform input",function(){o(".form-err-group").removeClass("err")}),o("body").on("click",".formgroup .ui-bz-select",function(){o(this).find(".ui-bz-select-option").show()}),o("body").on("mouseleave",".formgroup .ui-bz-select",function(){o(this).find(".ui-bz-select-option").hide()})},cancleEvent:function(){o("body").off("click",".phone-sug"),o("body").off("click",".verify-close-btn"),o("body").off("keyup blur change",".dialog-ad input[name=phone]"),o("body").off("blur","input[name=phone_vcode]"),o("body").off("blur","input[name=phone]"),o("body").off("click",".dialog-ad")},getFormData:function(){var e=o("#giftform").find(":input").serializeArray();return this.serialize2obj(e)},serialize2obj:function(e){for(var t={},i=0;i<e.length;i++)t[e[i].name]=encodeURIComponent(e[i].value);return t},checkData:function(e){var t=this,i=[];return t.isTel(e.phone)||(t.showErr("phone"),i.push("phone")),i.length?(t.showErr(i),!1):!0},gonext:function(){var e=this;r.xsend(1,100896,{id:e.options.ad_id}),o(".myclose").trigger("click"),new l.customDialog({width:465,height:230,content:e.options.downloadTpl({list:0,tmpdata:e.options}),closeSelector:".myclose",mask:{bgColor:"transparent"}})},godownload:function(e){var t='<iframe allowTransparency="true" src="'+e+'" frameborder="0" scrolling="no"></iframe>';o("body").append(t)},isTel:function(e){return!!e.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/)},placeholder:function(){+s.browser.ie<=9&&o(".fixplaceholder").each(function(e,t){var i=o(t).attr("placeholder");o(t).val(i).click(function(){o(this).val()===i&&o(this).val("")}).blur(function(){var e=o(this).val();o.trim(e)||o(this).val(i)})})},showErr:function(e){var t=typeof e;if("string"===t)o("input[name="+e+"]").parents(".formgroup").addClass("err");else if("object"===t)for(var i=e.length-1;i>=0;i--)o("input[name="+e[i]+"]").parents(".formgroup").addClass("err")},rmErr:function(e){var t=typeof e;if("string"===t)o("input[name="+e+"]").parents(".formgroup").removeClass("err");else if("array"===t)for(var i=e.length-1;i>=0;i--)o("input[name="+e[i]+"]").parents(".formgroup").removeClass("err")},visitUrl:function(e){if(e){var t=new Image;return t.src=e,t}}},i.exports=n});
;define("wkview:widget/raw_income/native_income/native_income.js",function(a,t,i){var s=a("wkcommon:widget/ui/lib/jquery/jquery.js"),e=(a("wkcommon:widget/lib/tangram/base/base.js"),a("wkcommon:widget/ui/js_core/_dialog/_dialog.js")),n=a("wkcommon:widget/lib/doT/doT.min.js"),c=a("wkview:widget/raw_income/raw_income.js"),o=a("wkcommon:widget/ui/js_core/log/log.js"),d=a("wkcommon:widget/ui/js_core/xform/xform.js"),l=(a("wkcommon:widget/ui/lib/jquery_xdomainrequest/xdomainrequest.js"),function(){this.option={},this.cacheList="",this.video="",this.cacheData={},this.downloadTpl=n.template('<!-- htmlcs-disable -->\n{{? it.list == 1 }}\n<div class="ads-doc-list">\n    <div class="header">\n        <div class="myclose"></div>\n        <div class="close list-close-btn"></div>\n        <h2>{{= it.data.title}}</h2>\n        <p>\u5171<span class="counter">{{= it.data.doc_list.length}}</span>\u7bc7\u6587\u6863&nbsp;&nbsp;{{= it.data.count}}\u4eba\u5df2\u4e0b\u8f7d</p>\n        </div>\n    <div class="cont" id="cont">\n        <ul class="list dialog-list">\n            {{if (it.data && it.data.doc_list.length >0) {}}\n            {{for(var i=0;i< it.data.doc_list.length;i++) {}}\n            <li><span class="number">{{=i+1}}</span> <span class="ic ic-{{=it.data.doc_list[i].type}}"></span>{{=it.data.doc_list[i].title}}</li>\n            {{}}}\n            {{ } }}\n        </ul>\n        <a href="###" class="ui-bz-btn-senior native-ads-download-btn">\n            <b class="ui-bz-btn-p-40 ui-bz-btc ">\u514d\u8d39\u4e0b\u8f7d</b>\n            </a>\n        </div>\n    </div>\n{{?? it.list == 0}}\n<div class="download-success-dialog">\n    <div class="myclose"></div>\n    <div class="close success-close-btn"></div>\n    <div class="dialog-left-greenbar"></div>\n    <div class="dialog-top">\n        <p class="doc-title" rel="new-dialog" alt="dialog_tit">{{=it.tmpdata.title}}</p>\n        </div>\n    <div class="dialog-inner tac">\n        <img class="ui-bz-avatar ui-bz-avatar-60-60" src="{{=it.tmpdata.step3.download_image}}" alt="" >\n        <p class="success">{{=it.tmpdata.step3.download_wenan}}\n            <a href="{{=it.tmpdata.step3.third_url}}" target="_blank" class="outlink log-xsend" data-logxsend="[1, 100897]">{{=it.tmpdata.step3.third_name}}</a>\n        </p>\n        </div>\n    {{? it.tmpdata.advertiser_step2}}\n    <div class="public-tip">\n        {{=it.tmpdata.advertiser_step2.before}}\n        <span class="name">{{=it.tmpdata.advertiser_step2.name}}</span>\n        {{=it.tmpdata.advertiser_step2.after}}\n        <span class="private">\u9690\u79c1\u4fdd\u969c<div class="hover-tip-hujiang"><span class="arrow-icon"></span>{{=it.tmpdata.privacy_policy}}</div></span>\n    </div>\n    {{??}}\n    <div class="public-tip">{{=it.tmpdata.advertiser}} <span class="private">\u9690\u79c1\u4fdd\u969c<div class="hover-tip-hujiang"><span class="arrow-icon"></span>{{=it.tmpdata.privacy_policy}}</div></span>\n        </div>\n    </div>\n    {{?}}\n{{?? it.list == 2}}\n    <div class="video-con">\n        <span class="myclose"></span>\n        <span class="video-close"></span>\n        <div class="header clearfix">\n            <span class="green-icon"></span><p class="video-title">{{= it.options.title}}</p><span class="video-size">&nbsp;(\u8bd5\u770b3\u5206\u949f)</span>\n        </div>\n        <div class="video" id="video">\n            \n        </div>\n        <div class="temp" style="display: none;">\n            <div class="video-wrap">\n\n            </div>\n            <p class="wenan">\u9884\u89c8\u7ed3\u675f</p>\n            <a href="{{= it.options.button_url}}" class="wrap-button" target="_blank">\u67e5\u770b\u5b8c\u6574\u89c6\u9891</a>\n        </div>\n        <div class="foot">\n            <img src="{{= it.options.video_img}}" alt="" class="video-jigou-icon">\n            <div class="content">\n                <div class="content-title">\n                    <span class="jigou-name">{{= it.options.release_user}}</span>&nbsp;\u63d0\u4f9b\u672c\u89c6\u9891\n                </div>\n                <p class="jigou-miaosu">{{= it.options.abstract}}</p>\n                <div class="video-tail-info">\n                    <span class="people-num">{{= it.options.view_count}}</span>\u4eba\u5df2\u89c2\u770b&nbsp;&nbsp;{{= it.options.section}}\n                </div>\n            </div>\n            <a href="{{= it.options.button_url}}"  target="_blank" title="" class="video-button">\u67e5\u770b\u5b8c\u6574\u89c6\u9891</a>\n        </div>\n    </div>\n{{?? it.list == 3}}\n<div class="ads-order-dialog">\n    <div class="header">\n        <div class="myclose"></div>\n        <div class="close list-close-btn"></div>\n        <h4>{{= it.data.title}}</h4>\n    </div>\n    <div class="container">\n        <img src="{{= it.data.banner}}" alt="">\n    </div>\n    <div class="footer">\n        <img src="{{= it.data.advertiser.advertiserLogo}}">\n        <p class="public-tip"><span>{{= it.data.advertiser.advertiserName}}</span>\u4e13\u4e1a\u63d0\u4f9b</p>\n        <p class="public-tip">{{= it.data.advertiser.advertiserTip}}</p>\n        <a href="###" class="ui-bz-btn-senior native-ads-download-btn">\n            <b class="ui-bz-btc ui-bz-btn-p-16">\u514d\u8d39\u9884\u7ea6</b>\n        </a>\n    </div>\n</div>\n\n{{?}}'),this.cacheData.downloadTpl=this.downloadTpl,this.init()});l.prototype={init:function(){var a=(s("head"),this);a.bindEvent(),window.oRawIncome=new c(a.cacheData)},showDialog:function(a,t){this.tempOptions=t;var i=this;if(3==a){o.xsend(1,101105,{id:t.adId,index:2});var n=this.getData(a,t);if(n){var c={};c.banner=i.cacheData.banner,c.title=i.cacheData.title,c.advertiser=i.cacheData.advertiser,c.privacy_policy=i.cacheData.privacy_policy,c.count=i.cacheData.count;var d=e.customDialog;s(".ys-ads-mask").show(),new d({width:464,height:332,content:i.downloadTpl({list:a,data:c}),closeSelector:".myclose",mask:{bgColor:"transparent"}})}}if(1==a){var n=this.getPlatInfo(t);if(n){var c={};c.doc_list=i.cacheList,c.title=i.cacheData.title,c.advertiser=i.cacheData.advertiser,c.privacy_policy=i.cacheData.privacy_policy,c.count=i.cacheData.count;var d=e.customDialog;s(".ys-ads-mask").show(),new d({width:464,height:1==a?500:332,content:i.downloadTpl({list:a,data:c}),closeSelector:".myclose",mask:{bgColor:"transparent"}})}}},bindEvent:function(){var a=this;s("body").on("click",".success-close-btn, .list-close-btn",function(){s(".myclose").trigger("click"),s(".ys-ads-mask").hide()}),s("body").on("click",".native-ads-download-btn",function(){s(".myclose").trigger("click"),window.oRawIncome.showDialog(),o.xsend(1,100895,{id:a.option.ad_id})}),s("body").on("click",".wrap-button",function(){o.xsend(1,100914,{ac_id:a.tempOptions.ad_id,res_time:Date.parse(new Date)-a.tempTime})}),s("body").on("keyup",function(a){27==a.keyCode&&(s(".myclose").trigger("click"),s(".ys-ads-mask").hide(),s(window).trigger("videoClose"))}),s("body").on("click",".success a",function(){o.xsend(1,100897,{id:a.option.ad_id})})},getData:function(a,t){var i=this;return i.cacheList||i.cacheData.advertiser_step2?!0:(d.getJSON(t.xpageId,{success:function(n){var c=e.customDialog;1==a?i.cacheList=n.model.step1.doc_list:3==a&&(i.cacheData.banner=n.model.step1.banner,i.cacheData.advertiser_step2=n.model.step2.advertiser),i.cacheData.index=a,i.cacheData.title=n.model.step1.title,i.cacheData.step2=n.model.step2,i.cacheData.step3=n.model.step3,i.cacheData.advertiser=n.model.step1.advertiser,i.cacheData.privacy_policy=n.model.step1.privacy_policy,i.cacheData.adname=n.wkrightcpl.dialog_page.step3.third_name,i.cacheData.download_tips=n.model.step1.download_tips,i.cacheData.adId=t.adId,i.cacheData.count=t.count,n.model.step1.count=t.count,s(".ys-ads-mask").show(),new c({width:464,height:1==a?564:332,content:i.downloadTpl({list:a,data:n.model.step1}),closeSelector:".myclose",mask:{bgColor:"transparent"}})}}),!1)},getPlatInfo:function(a){var t=this;if(t.cacheList||t.cacheData.advertiser_step2)return!0;var i=a.clickurl||"#";return t.visitUrl(i),s.ajax({type:"post",url:"//eduad.baidu.com/cpl/wenku_post_json",data:JSON.stringify({slotid:"28",unitid:a.unitid,sid:a.sid,wkcplpage:"dialog",p:a.p,stm:a.stm}),contentType:"text/plain",dataType:"json",success:function(i){var n=e.customDialog;t.cacheData.index=1,t.cacheData.keyword=a.keyword,t.cacheData.city=a.city,t.cacheData.actionurl=i.wkrightcpl.actionurl,t.cacheData.unitid=a.unitid,t.cacheData.adname=i.wkrightcpl.dialog_page.step3.third_name,t.cacheList=i.wkrightcpl.dialog_page.step1.doc_list,t.cacheData.title=i.wkrightcpl.dialog_page.step1.title,t.cacheData.step2=i.wkrightcpl.dialog_page.step2,t.cacheData.step3=i.wkrightcpl.dialog_page.step3,t.cacheData.advertiser=i.wkrightcpl.dialog_page.step1.advertiser,t.cacheData.privacy_policy=i.wkrightcpl.dialog_page.step1.privacy_policy,t.cacheData.download_tips=i.wkrightcpl.dialog_page.step1.download_tips,t.cacheData.count=a.count,i.wkrightcpl.dialog_page.step1.count=a.count,s(".ys-ads-mask").show(),new n({width:464,height:500,content:t.downloadTpl({list:1,data:i.wkrightcpl.dialog_page.step1}),closeSelector:".myclose",mask:{bgColor:"transparent"}})},error:function(a){console.log(a)}}),!1},visitUrl:function(a){if(a){var t=new Image;return t.src=a,t}}},i.exports=l});
;define("wkview:widget/ui/detectImgBlock/detectImgBlock.js",function(e,t,o){var r=e("wkcommon:widget/ui/js_core/log/log.js"),n=!1,c=!1,s=function(){var e=new $.Deferred;if(c)e.resolve(n);else{var t=new Image,o="https://wkstatic.bdimg.com/static/wkcommon/widget/header/search_box/images/ad-icon_dbfa705.png";c=!0,t.onload=function(){e.resolve(n)},t.onerror=function(){n=!0,e.resolve(n),r.xsend(1,101001)},t.src=o}return e.promise()};o.exports.detectImgBlock=s;var i=function(e){var t={actId:"101002",pos:e||1};n===!0&&r.xsend(1,t.actId)};o.exports.requestBlock=i;var d=function(e){var t=e;setTimeout(function(){var e=t.children("div"),o=t.children("iframe"),n=e.length||o.length,c=parseInt(t.height(),10),s=$("#html-reader-AD-3t4").selector,i=$("#html-reader-AD-4t5").selector,d=t.selector===s||t.selector===i;d&&!n&&r.xsend(1,101003),t.length>0&&!c&&r.xsend(1,101003)},2e3)};o.exports.domBlock=d});
;define("wkview:widget/ui/detectImgBlock/conf.js",function(o,c,m){m.exports.urlHostMap={"wenku.baidu.com":1,"tob-cms.bj.bcebos.com":1,"edu-tob.bdimg.com":1,"edu-wenku.bdimg.com":1,"cpro.baidustatic.com":1,"su.bdimg.com":1,"wenku-cms.bj.bcebos.com":1,"passport.baidu.com":1,"hm.baidu.com":1,"pos.baidu.com":1,"entry.baidu.com":1,"www.baidu.com":1,"msg.baidu.com":1,"news.baidu.com":1,"tieba.baidu.com":1,"zhidao.baidu.com":1,"music.baidu.com":1,"gaokao.baidu.com":1,"youke.baidu.com":1,"www.chuanke.com":1,"baike.baidu.com":1,"ikefu.baidu.com":1,"fanyi.baidu.com":1,"map.baidu.com":1,"v.baidu.com":1,"image.baidu.com":1,"img.baidu.com":1,"edu-wenku.bdimg.com":1,"hiphotos.baidu.com":1,"wkbos.bdimg.com":1,"himg.bdimg.com":1,"gss0.baidu.com":1,"gsp0.baidu.com":1,"yuedu.baidu.com":1,"bos.wenku.bdimg.com":1,"cdn.miti.baidu.com":1,"wkgk.baidu.com":1,"retype.wenku.bdimg.com":1,"static.wenku.bdimg.com":1,"wkstatic.bdimg.com":1,"bosstatic.wenku.bdimg.com":1,"fex.bdstatic.com":1,"zhifu.baidu.com":1,"gss3.bdstatic.com":1,"yuedu-cms.bj.bcebos.com":1,"gonglve-cms.bj.bcebos.com":1,"youke-cms.bj.bcebos.com":1,"gaokao-cms.bj.bcebos.com":1,"cp01-wenku-test4.cp01.baidu.com:8097":1,"yf-iknow-heter00.yf01.baidu.com:8083":1}});
;define("wkview:widget/ui/detectImgBlock/hijack.js",function(i,t,e){var n=i("wkview:widget/ui/detectImgBlock/conf.js").urlHostMap,c=i("wkcommon:widget/ui/js_core/log/log.js"),o=function(){this.init()};o.prototype={init:function(){this.iframeHijack(),this.jsHijack()},iframeHijack:function(){window.self!==window.top&&c.xsend(1,101005,{index:0})},jsHijack:function(){var i=this;setTimeout(function(){for(var t=$("script"),e=$("iframe"),n=$("img"),c=$("a"),o=[t,n,e],a=0;a<o.length;a++)$.each(o[a],function(t,e){var n=e.src;i.whiteListMatch(n)});$.each(c,function(t,e){var n=e.href;i.whiteListMatch(n)})},2500)},whiteListMatch:function(i){var t,e=i;"string"==typeof e&&(e.indexOf(".baidu.com")>-1||e.indexOf("data:image/png;base64")>-1)||e&&(e=e.split("//")[1],t=e&&e.split("/")[0],t&&!n[t]&&c.xsend(1,101005,{index:1,link:i}))}},e.exports=o});
;define("wkview:widget/doc_dw_wangpan_main/doc_dw_wangpan_main.js",function(n,o,w){function i(){}var a=(n("wkview:widget/ui/view/down_wangpan/down_org_vip.js"),n("wkview:widget/ui/view/down_wangpan/down_doc.js").downWangpanDoc,n("wkcommon:widget/ui/js_core/login/login.js").login,n("wkcommon:widget/lib/tangram/base/base.js")),e=(n("wkcommon:widget/ui/js_core/log/log.js"),n("wkview:widget/ui/view/down_wangpan/dialog_down_doc/dialog_down_doc.js"),i.prototype);e.goSpecialDownload=function(n){var o=this;o.WkInfo=n,o.normal()},e.normal=function(){a.lang.eventCenter.dispatchEvent("wangpan.doc")};var d=function(){var n;return function(){return n=n?n:new i}}();w.exports=d()});
;define("wkview:widget/doc_dw_wangpan_main/doc_dw_wangpan_pro.js",function(e,o,i){var n=e("wkcommon:widget/lib/tangram/base/base.js"),t=e("wkcommon:widget/ui/js_core/dialog/dialog.js"),d=(e("wkview:widget/ui/view/operate/operate.js"),e("wkcommon:widget/lib/fis/data/data.js")),a=e("wkcommon:widget/ui/js_core/log/log.js"),r=e("wkcommon:widget/ui/js_core/util/util.js"),c=(e("wkcommon:widget/ui/js_core/login/login.js").login,e("wkcommon:widget/ui/lib/cookie/cookie.js"),d.get("WkInfo")),s=e("wkcommon:widget/ui/lib/jquery/jquery.js"),w=(e("wkview:widget/ui/file_downloader_ui/file_downloader_ui.js"),e("wkcommon:widget/ui/lib/cookie/cookie.js"),e("wkview:widget/ui/view/down_doc/down_org_vip.js"),e("wkview:widget/ui/dialog_down_doc/dialog_down_doc.js"),e("wkview:widget/ui/view/down_doc/dialog_down_doc/dialog_down_doc.js"),e("wkview:widget/doc_download_main/submit.js")),u=function(){var e=null;return function(){return e||(e=t.dialogCreate()),e}}(),l=function(){var e=function(){this.init.apply(this)};return s.extend(e.prototype,{userData:{},publicData:{isInit:!1,dialogWindow:!1},init:function(){var e=this;e.WkInfo=c,e.UserInfo=e.WkInfo.UserInfo,e.VipInfo=d.get("WkInfo").VipInfo,e.UserInfo&&(e.isCreater=e.UserInfo.isCreater),e.docSize=(e.WkInfo.DocInfo.size/1024+"").replace(/^(\d+\.\d)\d+$/,"$1"),e.urlInterfaceGetRepeatDown=e.WkInfo.Urls.interfaceGetRepeatDown,e.docId=e.WkInfo.DocInfo.docId,e.isPaymentDoc=e.WkInfo.DocInfo.isPaymentDoc,e.isPaied=e.WkInfo.DocInfo.ispaied,this.publicData.isInit===!1&&(n.lang.eventCenter.addEventListener("wangpan.toGetProFile",function(){e.getFile()}),n.lang.eventCenter.addEventListener("wangpan.checkVipDownload",function(){e.checkVipDownload()}),this.publicData.isInit=!0)},start:function(){var e=this;return e.publicData.dialogWindow=!1,e.UserInfo?void(e.isCreater&&n.lang.eventCenter.dispatchEvent("wangpan.toGetProFile")):void window.location.reload()},dialogDownDoc:function(){var e=this,o=e.WkInfo.DocInfo||{};return o.professionalDoc&&1===+o.professionalDoc?void 0:(e.publicData.dialogWindow.show(function(){}),!0)},checkVipDownload:function(){},getFile:function(e){var o=this,i=!1;"payed"===e?(u().confirm({title:"\u4e0b\u8f7d\u6587\u6863",content:'<iframe width="460" height="220" name="runDown" frameborder="0"></iframe>',width:500,height:220,onRendered:function(){o.postGetFile()}}),u().hide()):(u().confirm({title:"\u4e0b\u8f7d\u6587\u6863",content:'<iframe name="runDown" frameborder="0"></iframe>',width:500,btnText:["\u4e0b\u8f7d","\u53d6\u6d88"],onRendered:function(){o.postGetFile(),i||(i=!0,"1"===document.downloadForm.storage.value&&n.ajax.get("/user/submit/foldutimeupdate?atype=updateFoldUTime&fold_id=0&_t="+(new Date).getTime()))},onOk:function(){o.postGetFile(),"first"!==e&&"ticket"!==e||i||(i=!0,"1"===document.downloadForm.storage.value&&n.ajax.get("/user/submit/foldutimeupdate?atype=updateFoldUTime&fold_id=0&_t="+(new Date).getTime()))}}),u().hide())},bindSaveEvent:function(){var e=u().el,o=n.dom.getAttr(e,"data-is-bind-save");"binded"!==o&&(r.delegate(e,".choice-for-saved","click",function(){this.checked?document.downloadForm.storage.value=1:(document.downloadForm.storage.value=0,a.send("down","cancel_copy"))}),n.dom.setAttr(e,"data-is-bind-save","binded")),document.downloadForm.storage.value=1},postGetFile:function(){var e=this,o=0,i=e.WkInfo.DocInfo.size;a.send("down","down_doc_tongji",{size:i,useMutli:o});var t=window.postVcode||0,d=window.postVinput||0;s(document.downloadForm).find("input[name=v_code]").val(t),s(document.downloadForm).find("input[name=v_input]").val(d),n.lang.eventCenter.dispatchEvent("wangpan.realStart",{hasActivityAferDownload:e.userData.hasActivityAferDownload});var r=e.userData.isvip||e.userData.is_edu_vip||e.userData.is_jiaoyu_vip,c=r&&e.userData.isVipDocLimited;if(e.isEduLimitedDoc&&e.endTime&&c){var u=s(document.downloadForm);u.attr("action","/user/submit/downloadnew"),u.append('<input type="hidden" name="down_process" value="10">')}w.run(document.downloadForm)}}),e}(),f=function(){var e=l,o=new e;return o};i.exports.downDocCreate=f,i.exports.downDoc=l});
;define("wkview:widget/commerce/pinzhuan/model.js",function(e,r,o){function t(){var e=c.get("WkInfo").DocInfo||{},r=e.title||"";return""===r&&console.error("pz got empty query"),r}var c=e("wkcommon:widget/lib/fis/data/data.js"),n="https://wenku.baidu.com",a=0,f=[],d=null,i=!1;o.exports.fetchData=function(e){var r=new $.Deferred;return 0===a?(a=1,$.ajax({url:n+"/common/fc/pc/pz_view",dataType:"json",data:{url:location.href,query:t()},success:function(o){if(0===o.code){var t=!1;for($.map(o.data,function(o){o.srcId===e&&(t=!0,r.resolve(o))}),t||r.reject(-1);f.length>0;){var c=f.pop(),t=!1;$.map(o.data,function(e){e.srcId===c.srcId&&(t=!0,c.defer.resolve(e))}),t||c.defer.reject(-1)}d=o.data,i=!0}else{for(console.error("pz server data error");f.length>0;){var c=f.pop();c.defer.reject(o.code)}r.reject(o.code)}a=2},fail:function(){for(console.error("pz api network error");f.length>0;){var e=f.pop();e.defer.reject(-1)}r.reject(-1)},error:function(){for(console.error("pz api network error");f.length>0;){var e=f.pop();e.defer.reject(-1)}r.reject(-1)}})):1===a?f.push({defer:r,srcId:e}):2===a&&(i?setTimeout(function(){var o=!1;$.map(d,function(t){t.srcId===e&&(o=!0,r.resolve(t))}),o||r.reject(-1)},0):r.reject(-1)),r}});
;define("wkview:widget/commerce/fengchao/left.js",function(e,t,r){function n(){var e=c.get("WkInfo").DocInfo||{},t=e.title||"wenku";return t}function o(){var e=new $.Deferred;return 0===a?(a=1,$.ajax({url:f+"/common/fc/pc/view_left",dataType:"json",data:{url:location.href,query:n()},success:function(t){if(0===t.code)e.resolve({ads:t.data.ads,time:t.data.im_time_sign,script:t.script});else{for(;i.length>0;){var r=i.pop();r.defer.reject(t.code)}e.reject(t.code)}a=2},fail:function(){for(a=2;i.length>0;){var t=i.pop();t.defer.reject(-1)}e.reject(-1)},error:function(){for(a=2;i.length>0;){var t=i.pop();t.defer.reject(-1)}e.reject(-1)}})):1===a?i.push({defer:e}):2===a&&(d?setTimeout(function(){e.resolve(u)},0):e.reject(-1)),e}var c=e("wkcommon:widget/lib/fis/data/data.js"),f="//wenku.baidu.com",a=0,i=[],u=null,d=!1;r.exports.fetchData=function(){var e=new $.Deferred;return o().then(function(t){e.resolve(t)}).fail(function(t){e.reject(t)}),e}});
;define("wkview:widget/commerce/fengchao/model.js",function(e,o,d){function r(){var e=a.get("WkInfo").DocInfo||{},o=e.title||"";return""===o&&console.error("fc recom got empty query"),o}function c(e,o){var o=o||{},d={adPid:"pc_view_continuetoread_relatedoc",adId:"pc_ns_wenku_yuedu_new",container:"fc-container",source:"PC_FENGCHAO_RECOM"};d=$.extend({},d,o),t.xsend(1,e,d)}function n(e,o,d){var n=new $.Deferred,l=0,g=0,j=a.get("WkInfo")||{},I=j.WkAdInfo&&j.WkAdInfo.wkAdMid&&JSON.parse(j.WkAdInfo.wkAdMid),k=I&&I.vipNoAd;+$("#jiaoyu-vip-data").val()&&k&&(l=1,w.getFlow(k.vipNoAd.flow)?g=30601:w.getFlow(k.vipNoAdDuiZhao.flow)&&(g=30602));var x={url:location.href,query:r(),eid:e,eidVip:l,hxEid:g};o&&(x.essQuery=o),f.newViewId()>0&&(x.newViewId=f.newViewId),i.send({adPid:1,adId:"fc",act:"req"}),i.send({adPid:2,adId:"fc",act:"req"});var h=window.wkCommonLogParam.t1272;return isNaN(h)||3!==+h||(x.eid=[x.eid,41630].join(",")),$.ajax({url:s+"/common/fc/pc/view_recom",dataType:"json",data:x,success:function(e){if(c(102099,{errcode:e.code}),0===e.code){for($.map(e.data,function(e){e.srcId===d&&n.resolve(e.adPlace)});m.length>0;){var o=m.pop();$.map(e.data,function(e){e.srcId===o.srcId&&o.defer.resolve(e.adPlace)})}p=e.data,v=!0,t.xsend(1,101912,{index:1}),i.send({adPid:1,adId:"fc",act:"back"}),i.send({adPid:2,adId:"fc",act:"back"})}else if(1001===e.code){for(t.xsend(1,101912,{index:2}),console.error("fc recom data error");m.length>0;){var o=m.pop();o.defer.reject(e.code)}n.reject(e.code)}else if(1002===e.code)t.xsend(1,101912,{index:3}),console.error("fc recom data error");else if(1003===e.code){for(t.xsend(1,101912,{index:4}),console.warn("fc recom recall failed");m.length>0;){var o=m.pop();o.defer.reject(e.code)}n.reject(e.code)}else{for(t.xsend(1,101912,{index:5}),console.error("fc recom data error");m.length>0;){var o=m.pop();o.defer.reject(e.code)}n.reject(e.code)}u=2},fail:function(){for(t.xsend(1,101912,{index:6}),c(102099,{responseType:"fail"}),console.error("fc recom api network error");m.length>0;){var e=m.pop();e.defer.reject(-1)}n.reject(-1),i.send({adPid:1,adId:"fc",act:"fail"})}}),n}var a=e("wkcommon:widget/lib/fis/data/data.js"),t=e("wkcommon:widget/ui/js_core/log/log.js"),i=e("wkcommon:widget/ui/js_core/log/xshowLog.js"),s="https://wenku.baidu.com",f=e("wkview:widget/ad_smallflow/ad_smallflow.js"),l=e("wkcommon:widget/ess/getEssQuery.js"),w=e("wkcommon:widget/ui/lib/hxABtest/hxABtest.js"),u=0,m=[],p=null,v=!1;d.exports.fetchData=function(e){var o=new $.Deferred;if(0===u){u=1;var d=f.fcTestId();c(102098),l.getEssQuery().then(function(r){n(d,r,e).then(function(e){o.resolve(e)})})}else{if(1===u)return m.push({defer:o,srcId:e}),o;if(2===u)return v?setTimeout(function(){$.map(p,function(d){d.srcId===e&&o.resolve(d.adPlace)})},0):o.reject(-1),o}return o}});
;define("wkview:widget/commerce/fengchao/videoSmallFlow.js",function(e,o,r){var i=e("wkcommon:widget/lib/fis/data/data.js"),t=e("wkcommon:widget/ui/lib/browser/browser.js"),n=function(e){var o=-1,r=-1;try{var i=T.cookie.get("BAIDUID");o=parseInt(i.substring(0,6),16),r=o%(e||10)+1}catch(t){console.log("ABtestTool ERROR",t)}return r};r.exports=function(){var e=i.get("WkInfo").DocInfo||{};if(8!==+e.cid2&&9!==+e.cid2&&31!==+e.cid2)return!1;var o=n(20),r=t.ieVersion();if(r>0&&11>r)return!1;var c=location.search;return 1!==o&&1!==+T.url.getQueryValue(c,"_2019_video_")?!1:!0}});
;define("wkview:widget/commerce/fengchao/modelAnimation.js",function(e,t,i){function n(){var e=u.get("WkInfo").DocInfo||{},t=e.title||"wenku";return t}function o(e,t,i,n){var r=1;n&&22011===n&&(r=1),0>=t||(i.push(e.splice(0,r)),t--,o(e,t,i,n))}function r(e){for(var t=0;t<e.length;t++)if(e[t].style&&"idea2408"in e[t].style&&e[t].style.idea2408.images){e[t].style.idea2408.pic_url_items=e[t].style.idea2408.images;var i=e[t].style.idea2408.pic_url_items;if(i&&i.length)for(var n=0;n<i.length;n++)i[n].pic=i[n].image_url}}function a(){var e=new $.Deferred;return 0===k?(k=1,m.getJSON("pcViewFcPercent",{success:function(t){if(f=100*Math.random(),t){for(e.resolve(t,f);y.length>0;){var i=y.pop();i.defer.resolve(t,f)}I=t,D=!0}else{for(;y.length>0;){var i=y.pop();i.defer.reject()}e.reject()}k=2},error:function(){for(;y.length>0;){var t=y.pop();t.defer.reject(-1)}e.reject(-1)}})):1===k?y.push({defer:e}):2===k&&(D?setTimeout(function(){e.resolve(I,f)},0):e.reject(-1)),e}function c(e,t){var i={adPid:"pc_view_reader_bottom",adId:"pc_ns_wenku_yuedu_gap",source:"view_btw",viewEid:t};l.xsend(1,e,i)}function d(e,t,i){var a,d=new $.Deferred,s=0,f=u.get("WkInfo")||{},l=f.WkAdInfo&&f.WkAdInfo.wkAdMid&&JSON.parse(f.WkAdInfo.wkAdMid),m=l&&l.vipNoAd;+$("#jiaoyu-vip-data").val()&&m&&(s=1,j.getFlow(m.vipNoAd.flow)?a=30601:j.getFlow(m.vipNoAdDuiZhao.flow)&&(a=30602));var w={url:location.href,query:n(),smallEid:t,eidVip:s,hxEid:a};i&&(w.essQuery=i),e&&(w.animEid=-1),p.newViewId()>0&&(w.newViewId=p.newViewId);var v=window.wkCommonLogParam.t1272;return isNaN(v)||3!==+v||(w.eid=41630),$.ajax({url:_+"/common/fc/pc/view_btw",dataType:"json",data:w,success:function(t){if(c(102099,""),0===t.code){var i=[];for(r(t.data.ads),o(t.data.ads,4,i,e),d.resolve({ads:i,im_time_sign:t.data.im_time_sign});A.length>0;){var n=A.pop();n.defer.resolve({ads:i,im_time_sign:t.data.im_time_sign})}b={ads:i,im_time_sign:t.data.im_time_sign},x=!0}else{for(;A.length>0;){var n=A.pop();n.defer.reject(t.code)}d.reject(t.code)}h=2},fail:function(){for(h=2;A.length>0;){var e=A.pop();e.defer.reject(-1)}d.reject(-1)},error:function(){for(h=2;A.length>0;){var e=A.pop();e.defer.reject(-1)}d.reject(-1)}}),d}function s(e){var t=new $.Deferred;if(0===h){h=1;var i="";i=g()?"90201":"90202",$(".union-ad-bottom").on("click",function(){l.xsend(1,102132,i)}),v.getEssQuery().then(function(t){d(e,i,t).then(function(){})}),c(102098,"")}else 1===h?A.push({defer:t}):2===h&&(x?setTimeout(function(){t.resolve(b)},0):t.reject(-1));return t}var f,l=e("wkcommon:widget/ui/js_core/log/log.js"),u=e("wkcommon:widget/lib/fis/data/data.js"),m=e("wkcommon:widget/ui/js_core/xform/xform.js"),w=e("wkcommon:widget/lib/tangram/base/base.js"),v=e("wkcommon:widget/ess/getEssQuery.js"),g=e("wkview:widget/commerce/fengchao/videoSmallFlow.js"),p=e("wkview:widget/ad_smallflow/ad_smallflow.js"),j=e("wkcommon:widget/ui/lib/hxABtest/hxABtest.js"),_="//wenku.baidu.com",h=0,k=0,y=[],A=[],b=null,I=null,x=!1,D=!1;i.exports.fetchData=function(e){var t=new $.Deferred,i=w.cookie.get("fcAdAnimation");return"1"===i?(s(e).then(function(e){t.resolve(e)}).fail(function(e){t.reject(e)}),t):(a().then(function(i,n){var o=i.fcPercent;o>=n?s(e).then(function(e){t.resolve(e)}).fail(function(){t.reject()}):t.reject()}).fail(function(e){t.reject(e)}),t)}});
;define("wkview:widget/commerce/fengchao/modelStru.js",function(e,r,o){function c(){var e=t.get("WkInfo").DocInfo||{},r=e.title||"";return""===r&&console.error("fc stru got empty query"),r}var t=e("wkcommon:widget/lib/fis/data/data.js"),n=e("wkcommon:widget/ui/js_core/log/log.js"),d="https://wenku.baidu.com",a=0,s=[],f=null,i=!1;o.exports.fetchData=function(e){var r=new $.Deferred;if(0===a){a=1;var o=window.wkCommonLogParam.t1272,t="";isNaN(o)||3!==+o||(t=41630),$.ajax({url:d+"/common/fc/pc/stru_recom",dataType:"json",data:{url:location.href,query:c(),eid:t},success:function(o){if(0===o.code){for($.map(o.data,function(o){o.srcId===e&&r.resolve(o.adPlace)});s.length>0;){var c=s.pop();$.map(o.data,function(e){e.srcId===c.srcId&&c.defer.resolve(e.adPlace)})}i=!0,n.xsend(1,101929,{index:1})}else if(1001===o.code){for(n.xsend(1,101929,{index:2}),console.error("fc stru data error");s.length>0;){var c=s.pop();c.defer.reject(o.code)}r.reject(o.code)}else if(1002===o.code)n.xsend(1,101929,{index:3}),console.error("fc stru data error");else if(1003===o.code){for(n.xsend(1,101929,{index:4}),console.warn("fc stru recall failed");s.length>0;){var c=s.pop();c.defer.reject(o.code)}r.reject(o.code)}else{for(n.xsend(1,101929,{index:5}),console.error("fc stru data error");s.length>0;){var c=s.pop();c.defer.reject(o.code)}r.reject(o.code)}a=0},fail:function(){for(n.xsend(1,101929,{index:6}),console.error("fc stru api network error");s.length>0;){var e=s.pop();e.defer.reject(-1)}r.reject(-1)}})}else 1===a?s.push({defer:r,srcId:e}):2===a&&(i?setTimeout(function(){$.map(f,function(o){o.srcId===e&&r.resolve(o.adPlace)})},0):r.reject(-1));return r}});
;define("wkview:widget/ad_xpageForm/xpageForm.js",function(e,o,i){var a=e("wkcommon:widget/ui/js_core/xform/xform.js"),n=e("wkcommon:widget/lib/doT/doT.min.js"),t=e("wkcommon:widget/vipNoAdDialog/vipNoAdDialog.js"),r=e("wkcommon:widget/ui/js_core/log/log.js"),d=(e("wkcommon:widget/ui/lib/cookie/cookie.js"),e("wkcommon:widget/ui/lib/hxABtest/hxABtest.js")),g=e("wkcommon:widget/lib/fis/data/data.js"),m=function(e){this.$el=$(e.el),this.orgName=e.orgName,this.template=n.template('<a href="{{=it.bannerUrl}}">\n<img src="{{=it.bannerImage}}">\n</a>'),this.showXpageAD()};m.prototype={showXpageAD:function(){var e=this;a.getJSON("wenku_pc_banner_5to6",{success:function(o){var i=o.data||{},a=i.orgMatchList||[];for(var n in a){var t=a[n];if(t.orgName===e.orgName)return void(t.bannerUrl&&t.bannerImage?(e.$el.html(e.template({bannerUrl:t.bannerUrl,bannerImage:t.bannerImage})),e.addVipPrevilege(),e.addOrgGuideClick(t.orgUrl,t.orgName)):(e.$el.remove(),$(".org-guide").remove()))}0===a.length&&(e.$el.remove(),$(".org-guide").remove())}})},addOrgGuideClick:function(e,o){var i=$("<span>");i.addClass("org-guide"),i.text("\u8fdb\u5165\u5b98\u7f51"),$(".doc-desc-all").append(i),$(".doc-desc-all").on("click",".org-guide",function(){r.xsend(1,101832,{index:o}),setTimeout(function(){location.href=e},100)})},addVipPrevilege:function(){$("#html-reader-AD-5t6").append('<a class="ad-logo"></a>'),$("#html-reader-AD-5t6").on("click",".ad-logo",function(){if(+$("#jiaoyu-vip-data").val()){$(".ad-onff").remove();var e=g.get("WkInfo")||{},o=e.DocInfo||{},i=e.WkAdInfo&&e.WkAdInfo.wkAdMid&&JSON.parse(e.WkAdInfo.wkAdMid),a=i&&i.vipNoAd||{};d.setUpCookie("adOnView","/view",{vipNoAd:a,jiaoyu_vip_stime:o.jiaoyu_vip_stime})}else{new t}})}},i.exports=m});
;define("wkview:widget/top_ads_banner/top_ads_banner.js",function(t,e,a){var o=t("wkcommon:widget/ui/js_core/xform/xform.js"),i=t("wkcommon:widget/lib/doT/doT.min.js"),n=(t("wkcommon:widget/ui/js_core/login/login.js"),t("wkcommon:widget/lib/fis/data/data.js")),s=t("wkcommon:widget/ui/js_core/log/log.js"),r=t("wkview:widget/common_item/commonUtil/commonUtil.js"),c=n.get("WkInfo")||{},d=c.DocInfo||{},l='<a href="javascript:;" class="top-ads-container top-ads-banner-goto-cashier log-xsend" data-logxsend="[1, 100017]" data-href="{{=it.jumpUrl}}">\n<p class="left-image" style="background: url({{=it.imgUrl}}) no-repeat;"></p>\n<div class="right-info">\n<p class="right-first-para">{{=it[\'first-para\']}}</p>\n<p class="right-second-para">{{=it[\'second-para\']}}</p>\n</div>\n</a>\n',g={ALL:"1",PAY:"2",NON_PAY:"3"},h=function(t){this.$el=$(".top-ads-banner-wrap"),this.crumbs=t.crumbs||"",this.categoryList=this.crumbs.split(","),this.categoryTpl=i.template(l),this.init()};h.prototype={constructor:h,docValueCategory:"1",init:function(){this.rerender(),this.getDataList(),this.bindEvent(),s.xsend(1,101909)},rerender:function(){var t=r.calcualteDocValueType(d),e=r.DOC_VALUE_TYPE;switch(t){case e.PAY_DISCOUNT:case e.PARTNER_NORMAL:case e.PAY_NORMAL:case e.PAY_PACK:this.docValueCategory=g.PAY,this.$el.empty();break;default:this.docValueCategory=g.NON_PAY}},getDataList:function(){var t=this;o.getJSON("top_ads_banner",{success:function(e){if(e&&e.matchDataList&&e.matchDataList.length>0){var a=e.matchDataList,o=t.indexOfTarget(a);-1!==o&&o<a.length&&t.$el.html(t.categoryTpl(a[o]))}}}).always(function(){t.$el.removeClass("hide")})},indexOfTarget:function(t){for(var e=-1,a=this.categoryList.length-1;a>=0;a--)for(var o=0;o<t.length;o++){var i=t[o]||{};if(i.keyword===this.categoryList[a]&&(i.docValueCategory===g.ALL||i.docValueCategory===g.PAY&&this.docValueCategory===g.PAY||i.docValueCategory===g.NON_PAY&&this.docValueCategory===g.NON_PAY))return o}return e},bindEvent:function(){var t=n.get("WkInfo")||{},e=t.DocInfo||{},a=e.docId||0;this.$el.on("click",function(){var t=$(this).find(".top-ads-banner-goto-cashier"),e=t.attr("data-href")+a;T.lang.eventCenter.addEventListener("Login.Success",function(t){T.event.stop(t),window.location.href=e}),window.location.href=e})}},a.exports=h});